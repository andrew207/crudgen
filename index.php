<!DOCTYPE html>
<html>
<head>
    <title>C.R.U.D. Generator</title>
    <style>
        body {
            text-align: center;
            font-size: 120%;
        }
        
        table {
            margin: 0 auto 10px auto;
            table-layout: fixed;
            width: 100%;
        }
        
        tr td {
            text-align: left;
        }
        
        tr td:first-child {
            text-align: right;
        }
        
        pre {
            text-align: left;
        }
    </style>
</head>
<body>
    <h1>C.R.U.D. Generator</h1>
    <p>This tool will build an interface for creating, reading, updating and deleting elements in your MySQL database.</p>
    <p>It is recommended you take a backup before using this tool because it might break everything, eat everything in your fridge and shave a rude word into the back of your head.</p>
<?php
$form = '    <form action="' . basename($_SERVER['PHP_SELF']) . '" method="POST" id="credentials">' . PHP_EOL . '        <table>' . PHP_EOL . '            <tr>' . PHP_EOL . '                <td><label for="dbname">Database Name (might be localhost): </label></td>' . PHP_EOL . '                <td><input type="text" name="dbname" id="dbname" required></td>' . PHP_EOL . '            </tr>' . PHP_EOL . '            <tr>' . PHP_EOL . '                <td><label for="dbuname">Database Username: </label></td>' . PHP_EOL . '                <td><input type="text" name="dbuname" id="dbuname" required></td>' . PHP_EOL . '            </tr>' . PHP_EOL . '            <tr>' . PHP_EOL . '                <td><label for="dbpwd">Database Password: </label></td>' . PHP_EOL . '                <td><input type="text" name="dbpwd" id="dbpwd" required></td>' . PHP_EOL . '            </tr>' . PHP_EOL . '            <tr>' . PHP_EOL . '                <td><label for="dbtbl">Database Target Table: </label></td>' . PHP_EOL . '                <td><input type="text" name="dbtbl" id="dbtbl" required></td>' . PHP_EOL . '            </tr>' . PHP_EOL . '        </table>' . PHP_EOL . '        <input type="submit">' . PHP_EOL . '    </form>' . PHP_EOL?>
<?php
if (isset($_POST['dbname']) && isset($_POST['dbuname']) && isset($_POST['dbpwd']) && isset($_POST['dbtbl'])) {
    // Directory writable
    $writable = "";
    if (is_writable(basename($_SERVER['PHP_SELF']))) {
        $writable = "";
    } else {
        $writable = "is <b>not</b>";
    }
    
    // DB credentials work
    $dbname    = $_POST['dbname'];
    $uname     = $_POST['dbuname'];
    $upass     = $_POST['dbpwd'];
    $tableName = $_POST['dbtbl'];
    
    @$conn = mysqli_connect($dbname, $uname, $upass, $tableName);
    
    if (mysqli_connect_errno()) {
        echo "    <p>I couldn't make a MySQL connection. Here's the exact error.<br>";
        echo mysqli_connect_error() . "</p>";
        echo $form;
    } else {
        echo "    <p>Looks good so far, writing supporting files...</p>";
        writeFiles($dbname, $uname, $upass, $tableName);
        echo "    <p>Generating HTML pages...</p>";
        include '__generator.php';
        echo "    <p>Done! Here's a list of files.";
        include 'list.php';
        echo "    <p>Whilst working I created a couple of supporting files. <a href='cleanup.php'>Click here to remove them.</a></p>";
    }
?>

<?php
    if (strlen($writeable) > 0) {
?> <p>Your file system <?php
        echo $writeable;
?> writeable. I need to be able to write files to build your interface.</p> <?php
        echo $form;
    }
?>

<?php
    // else == post is not set
} else {
    // Directory writable
    $writeable = "";
    if (is_writable(basename($_SERVER['PHP_SELF']))) {
        
    } else {
        echo "    <p>Your file system is <b>not</b> writeable. I need to be able to write files to build your interface.</p></body></html>";
        die("    <br>You need to make the directory this script is in writeable to continue.");
    }
?>

<p>In order to get started I need some details from you.</p>
<?php
    echo $form;
}
?>
<?php
function writeFiles($dbname, $uname, $upass, $tableName)
{
    $DATETIME_JS = "/**\r\n * @preserve jQuery DateTimePicker plugin v2.3.8\r\n * @homepage http://xdsoft.net/jqplugins/datetimepicker/\r\n * (c) 2014, Chupurnov Valeriy.\r\n */\r\nif (location.href.match(/xdsoft/)) {\r\n\talert(\"Don't use datetimepicker.js from xdsoft.net how CDN\");\r\n\tlocation.href = 'http://xdsoft.net/jqplugins/datetimepicker/';\r\n}\r\n(function (\$) {\r\n\t'use strict';\r\n\tvar default_options  = {\r\n\t\ti18n: {\r\n\t\t\tar: { // Arabic\r\n\t\t\t\tmonths: [\r\n\t\t\t\t\t\"\u00D9\u0192\u00D8\u00A7\u00D9\u2020\u00D9\u02C6\u00D9\u2020 \u00D8\u00A7\u00D9\u201E\u00D8\u00AB\u00D8\u00A7\u00D9\u2020\u00D9\u0160\", \"\u00D8\u00B4\u00D8\u00A8\u00D8\u00A7\u00D8\u00B7\", \"\u00D8\u00A2\u00D8\u00B0\u00D8\u00A7\u00D8\u00B1\", \"\u00D9\u2020\u00D9\u0160\u00D8\u00B3\u00D8\u00A7\u00D9\u2020\", \"\u00D9\u2026\u00D8\u00A7\u00D9\u0160\u00D9\u02C6\", \"\u00D8\u00AD\u00D8\u00B2\u00D9\u0160\u00D8\u00B1\u00D8\u00A7\u00D9\u2020\", \"\u00D8\u00AA\u00D9\u2026\u00D9\u02C6\u00D8\u00B2\", \"\u00D8\u00A2\u00D8\u00A8\", \"\u00D8\u00A3\u00D9\u0160\u00D9\u201E\u00D9\u02C6\u00D9\u201E\", \"\u00D8\u00AA\u00D8\u00B4\u00D8\u00B1\u00D9\u0160\u00D9\u2020 \u00D8\u00A7\u00D9\u201E\u00D8\u00A3\u00D9\u02C6\u00D9\u201E\", \"\u00D8\u00AA\u00D8\u00B4\u00D8\u00B1\u00D9\u0160\u00D9\u2020 \u00D8\u00A7\u00D9\u201E\u00D8\u00AB\u00D8\u00A7\u00D9\u2020\u00D9\u0160\", \"\u00D9\u0192\u00D8\u00A7\u00D9\u2020\u00D9\u02C6\u00D9\u2020 \u00D8\u00A7\u00D9\u201E\u00D8\u00A3\u00D9\u02C6\u00D9\u201E\"\r\n\t\t\t\t],\r\n\t\t\t\tdayOfWeek: [\r\n\t\t\t\t\t\"\u00D9\u2020\", \"\u00D8\u00AB\", \"\u00D8\u00B9\", \"\u00D8\u00AE\"," . "\"\u00D8\u00AC\", \"\u00D8\u00B3\", \"\"\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\tro: { // Romanian\r\n\t\t\t\tmonths: [\r\n\t\t\t\t\t\"ianuarie\", \"februarie\", \"martie\", \"aprilie\", \"mai\", \"iunie\", \"iulie\", \"august\", \"septembrie\", \"octombrie\", \"noiembrie\", \"decembrie\"\r\n\t\t\t\t],\r\n\t\t\t\tdayOfWeek: [\r\n\t\t\t\t\t\"l\", \"ma\", \"mi\", \"j\", \"v\", \"s\", \"d\"\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\tid: { // Indonesian\r\n\t\t\t\tmonths: [\r\n\t\t\t\t\t\"Januari\", \"Februari\", \"Maret\", \"April\", \"Mei\", \"Juni\", \"Juli\", \"Agustus\", \"September\", \"Oktober\", \"November\", \"Desember\"\r\n\t\t\t\t],\r\n\t\t\t\tdayOfWeek: [\r\n\t\t\t\t\t\"Sen\", \"Sel\", \"Rab\", \"Kam\", \"Jum\", \"Sab\", \"Min\"\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\tbg: { // Bulgarian\r\n\t\t\t\tmonths: [\r\n\t\t\t\t\t\"\u00D0\u00AF\u00D0\u00BD\u00D1\u0192\u00D0\u00B0\u00D1\u20AC\u00D0\u00B8\", \"\u00D0\u00A4\u00D0\u00B5\u00D0\u00B2\u00D1\u20AC\u00D1\u0192\u00D0\u00B0\u00D1\u20AC\u00D0\u00B8\", \"\u00D0\u0153\u00D0\u00B0\u00D1\u20AC\u00D1\u201A\", \"\u00D0\u0090\u00D0\u00BF\u00D1\u20AC\u00D0\u00B8\u00D0\u00BB\", \"\u00D0\u0153\u00D0\u00B0\u00D0\u00B9\", \"\u00D0\u00AE\u00D0\u00BD\u00D0\u00B8\", \"\u00D0\u00AE\u00D0\u00BB\u00D0\u00B8\", \"\u00D0\u0090\u00D0\u00B2\u00D0\u00B3\u00D1\u0192\u00D1\u0081\u00D1\u201A\", \"\u00D0\u00A1\u00D0\u00B5\u00D0\u00BF\u00D1\u201A\u00D0\u00B5\u00D0\u00BC\u00D0\u00B2\u00D1\u20AC\u00D0\u00B8\", \"\u00D0\u017E\u00D0\u00BA\u00D1\u201A\u00D0\u00BE\u00D0\u00BC\u00D0\u00B2\u00D1\u20AC\u00D0\u00B8\", \"\u00D0\u009D\u00D0\u00BE\u00D0\u00B5\u00D0\u00BC" . "\u00D0\u00B2\u00D1\u20AC\u00D0\u00B8\", \"\u00D0\u201D\u00D0\u00B5\u00D0\u00BA\u00D0\u00B5\u00D0\u00BC\u00D0\u00B2\u00D1\u20AC\u00D0\u00B8\"\r\n\t\t\t\t],\r\n\t\t\t\tdayOfWeek: [\r\n\t\t\t\t\t\"\u00D0\u009D\u00D0\u00B4\", \"\u00D0\u0178\u00D0\u00BD\", \"\u00D0\u2019\u00D1\u201A\", \"\u00D0\u00A1\u00D1\u20AC\", \"\u00D0\u00A7\u00D1\u201A\", \"\u00D0\u0178\u00D1\u201A\", \"\u00D0\u00A1\u00D0\u00B1\"\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\tfa: { // Persian/Farsi\r\n\t\t\t\tmonths: [\r\n\t\t\t\t\t'\u00D9\u0081\u00D8\u00B1\u00D9\u02C6\u00D8\u00B1\u00D8\u00AF\u00DB\u0152\u00D9\u2020', '\u00D8\u00A7\u00D8\u00B1\u00D8\u00AF\u00DB\u0152\u00D8\u00A8\u00D9\u2021\u00D8\u00B4\u00D8\u00AA', '\u00D8\u00AE\u00D8\u00B1\u00D8\u00AF\u00D8\u00A7\u00D8\u00AF', '\u00D8\u00AA\u00DB\u0152\u00D8\u00B1', '\u00D9\u2026\u00D8\u00B1\u00D8\u00AF\u00D8\u00A7\u00D8\u00AF', '\u00D8\u00B4\u00D9\u2021\u00D8\u00B1\u00DB\u0152\u00D9\u02C6\u00D8\u00B1', '\u00D9\u2026\u00D9\u2021\u00D8\u00B1', '\u00D8\u00A2\u00D8\u00A8\u00D8\u00A7\u00D9\u2020', '\u00D8\u00A2\u00D8\u00B0\u00D8\u00B1', '\u00D8\u00AF\u00DB\u0152', '\u00D8\u00A8\u00D9\u2021\u00D9\u2026\u00D9\u2020', '\u00D8\u00A7\u00D8\u00B3\u00D9\u0081\u00D9\u2020\u00D8\u00AF'\r\n\t\t\t\t],\r\n\t\t\t\tdayOfWeek: [\r\n\t\t\t\t\t'\u00DB\u0152\u00DA\u00A9\u00D8\u00B4\u00D9\u2020\u00D8\u00A8\u00D9\u2021', '\u00D8\u00AF\u00D9\u02C6\u00D8\u00B4\u00D9\u2020\u00D8\u00A8\u00D9\u2021', '\u00D8\u00B3\u00D9\u2021 \u00D8\u00B4\u00D9\u2020\u00D8\u00A8\u00D9\u2021', '\u00DA\u2020\u00D9\u2021\u00D8\u00A7\u00D8\u00B1\u00D8\u00B4\u00D9\u2020\u00D8\u00A8\u00D9\u2021', '\u00D9\u00BE" . "\u00D9\u2020\u00D8\u00AC\u00D8\u00B4\u00D9\u2020\u00D8\u00A8\u00D9\u2021', '\u00D8\u00AC\u00D9\u2026\u00D8\u00B9\u00D9\u2021', '\u00D8\u00B4\u00D9\u2020\u00D8\u00A8\u00D9\u2021'\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\tru: { // Russian\r\n\t\t\t\tmonths: [\r\n\t\t\t\t\t'\u00D0\u00AF\u00D0\u00BD\u00D0\u00B2\u00D0\u00B0\u00D1\u20AC\u00D1\u0152', '\u00D0\u00A4\u00D0\u00B5\u00D0\u00B2\u00D1\u20AC\u00D0\u00B0\u00D0\u00BB\u00D1\u0152', '\u00D0\u0153\u00D0\u00B0\u00D1\u20AC\u00D1\u201A', '\u00D0\u0090\u00D0\u00BF\u00D1\u20AC\u00D0\u00B5\u00D0\u00BB\u00D1\u0152', '\u00D0\u0153\u00D0\u00B0\u00D0\u00B9', '\u00D0\u02DC\u00D1\u017D\u00D0\u00BD\u00D1\u0152', '\u00D0\u02DC\u00D1\u017D\u00D0\u00BB\u00D1\u0152', '\u00D0\u0090\u00D0\u00B2\u00D0\u00B3\u00D1\u0192\u00D1\u0081\u00D1\u201A', '\u00D0\u00A1\u00D0\u00B5\u00D0\u00BD\u00D1\u201A\u00D1\u008F\u00D0\u00B1\u00D1\u20AC\u00D1\u0152', '\u00D0\u017E\u00D0\u00BA\u00D1\u201A\u00D1\u008F\u00D0\u00B1\u00D1\u20AC\u00D1\u0152', '\u00D0\u009D\u00D0\u00BE\u00D1\u008F\u00D0\u00B1\u00D1\u20AC\u00D1\u0152', '\u00D0\u201D\u00D0\u00B5\u00D0\u00BA\u00D0\u00B0\u00D0\u00B1\u00D1\u20AC\u00D1\u0152'\r\n\t\t\t\t],\r\n\t\t\t\tdayOfWeek: [\r\n\t\t\t\t\t\"\u00D0\u2019\u00D1\u0081\u00D0\u00BA\", \"\u00D0\u0178\u00D0\u00BD\", \"\u00D0\u2019\u00D1\u201A\", \"\u00D0\u00A1\u00D1\u20AC\", \"\u00D0\u00A7\u00D1\u201A\", \"\u00D0\u0178\u00D1\u201A\", \"\u00D0\u00A1\u00D0\u00B1\"\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\tuk: { // Ukrainian\r\n\t\t\t\tmonths: [\r\n\t\t\t\t\t'\u00D0\u00A1\u00D1\u2013\u00D1\u2021\u00D0\u00B5\u00D0\u00BD\u00D1\u0152', '\u00D0\u203A\u00D1\u017D\u00D1" . "\u201A\u00D0\u00B8\u00D0\u00B9', '\u00D0\u2018\u00D0\u00B5\u00D1\u20AC\u00D0\u00B5\u00D0\u00B7\u00D0\u00B5\u00D0\u00BD\u00D1\u0152', '\u00D0\u0161\u00D0\u00B2\u00D1\u2013\u00D1\u201A\u00D0\u00B5\u00D0\u00BD\u00D1\u0152', '\u00D0\u00A2\u00D1\u20AC\u00D0\u00B0\u00D0\u00B2\u00D0\u00B5\u00D0\u00BD\u00D1\u0152', '\u00D0\u00A7\u00D0\u00B5\u00D1\u20AC\u00D0\u00B2\u00D0\u00B5\u00D0\u00BD\u00D1\u0152', '\u00D0\u203A\u00D0\u00B8\u00D0\u00BF\u00D0\u00B5\u00D0\u00BD\u00D1\u0152', '\u00D0\u00A1\u00D0\u00B5\u00D1\u20AC\u00D0\u00BF\u00D0\u00B5\u00D0\u00BD\u00D1\u0152', '\u00D0\u2019\u00D0\u00B5\u00D1\u20AC\u00D0\u00B5\u00D1\u0081\u00D0\u00B5\u00D0\u00BD\u00D1\u0152', '\u00D0\u2013\u00D0\u00BE\u00D0\u00B2\u00D1\u201A\u00D0\u00B5\u00D0\u00BD\u00D1\u0152', '\u00D0\u203A\u00D0\u00B8\u00D1\u0081\u00D1\u201A\u00D0\u00BE\u00D0\u00BF\u00D0\u00B0\u00D0\u00B4', '\u00D0\u201C\u00D1\u20AC\u00D1\u0192\u00D0\u00B4\u00D0\u00B5\u00D0\u00BD\u00D1\u0152'\r\n\t\t\t\t],\r\n\t\t\t\tdayOfWeek: [\r\n\t\t\t\t\t\"\u00D0\u009D\u00D0\u00B4\u00D0\u00BB\", \"\u00D0\u0178\u00D0\u00BD\u00D0\u00B4\", \"\u00D0\u2019\u00D1\u201A\u00D1\u20AC\", \"\u00D0\u00A1\u00D1\u20AC\u00D0\u00B4\", \"\u00D0\u00A7\u00D1\u201A\u00D0\u00B2\", \"\u00D0\u0178\u00D1\u201A\u00D0\u00BD\", \"\u00D0\u00A1\u00D0\u00B1\u00D1\u201A\"\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\ten: { // English\r\n\t\t\t\tmonths: [\r\n\t\t\t\t\t\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"\r\n\t\t\t\t],\r\n\t\t\t\tdayOfWeek: [\r\n\t\t\t\t\t\"Sun\", \"Mon\", \"Tue\", " . "\"Wed\", \"Thu\", \"Fri\", \"Sat\"\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\tel: { // \u00CE\u2022\u00CE\u00BB\u00CE\u00BB\u00CE\u00B7\u00CE\u00BD\u00CE\u00B9\u00CE\u00BA\u00CE\u00AC\r\n\t\t\t\tmonths: [\r\n\t\t\t\t\t\"\u00CE\u2122\u00CE\u00B1\u00CE\u00BD\u00CE\u00BF\u00CF\u2026\u00CE\u00AC\u00CF\u0081\u00CE\u00B9\u00CE\u00BF\u00CF\u201A\", \"\u00CE\u00A6\u00CE\u00B5\u00CE\u00B2\u00CF\u0081\u00CE\u00BF\u00CF\u2026\u00CE\u00AC\u00CF\u0081\u00CE\u00B9\u00CE\u00BF\u00CF\u201A\", \"\u00CE\u0153\u00CE\u00AC\u00CF\u0081\u00CF\u201E\u00CE\u00B9\u00CE\u00BF\u00CF\u201A\", \"\u00CE\u2018\u00CF\u20AC\u00CF\u0081\u00CE\u00AF\u00CE\u00BB\u00CE\u00B9\u00CE\u00BF\u00CF\u201A\", \"\u00CE\u0153\u00CE\u00AC\u00CE\u00B9\u00CE\u00BF\u00CF\u201A\", \"\u00CE\u2122\u00CE\u00BF\u00CF\u008D\u00CE\u00BD\u00CE\u00B9\u00CE\u00BF\u00CF\u201A\", \"\u00CE\u2122\u00CE\u00BF\u00CF\u008D\u00CE\u00BB\u00CE\u00B9\u00CE\u00BF\u00CF\u201A\", \"\u00CE\u2018\u00CF\u008D\u00CE\u00B3\u00CE\u00BF\u00CF\u2026\u00CF\u0192\u00CF\u201E\u00CE\u00BF\u00CF\u201A\", \"\u00CE\u00A3\u00CE\u00B5\u00CF\u20AC\u00CF\u201E\u00CE\u00AD\u00CE\u00BC\u00CE\u00B2\u00CF\u0081\u00CE\u00B9\u00CE\u00BF\u00CF\u201A\", \"\u00CE\u0178\u00CE\u00BA\u00CF\u201E\u00CF\u017D\u00CE\u00B2\u00CF\u0081\u00CE\u00B9\u00CE\u00BF\u00CF\u201A\", \"\u00CE\u009D\u00CE\u00BF\u00CE\u00AD\u00CE\u00BC\u00CE\u00B2\u00CF\u0081\u00CE\u00B9\u00CE\u00BF\u00CF\u201A\", \"\u00CE\u201D\u00CE\u00B5\u00CE\u00BA\u00CE\u00AD\u00CE\u00BC\u00CE\u00B2\u00CF\u0081\u00CE\u00B9\u00CE\u00BF\u00CF\u201A\"\r\n\t\t\t\t],\r\n\t\t\t\tdayOfWeek: [\r\n\t\t\t\t\t\"\u00CE\u0161\u00CF" . "\u2026\u00CF\u0081\", \"\u00CE\u201D\u00CE\u00B5\u00CF\u2026\", \"\u00CE\u00A4\u00CF\u0081\u00CE\u00B9\", \"\u00CE\u00A4\u00CE\u00B5\u00CF\u201E\", \"\u00CE \u00CE\u00B5\u00CE\u00BC\", \"\u00CE \u00CE\u00B1\u00CF\u0081\", \"\u00CE\u00A3\u00CE\u00B1\u00CE\u00B2\"\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\tde: { // German\r\n\t\t\t\tmonths: [\r\n\t\t\t\t\t'Januar', 'Februar', 'M\u00C3\u00A4rz', 'April', 'Mai', 'Juni', 'Juli', 'August', 'September', 'Oktober', 'November', 'Dezember'\r\n\t\t\t\t],\r\n\t\t\t\tdayOfWeek: [\r\n\t\t\t\t\t\"So\", \"Mo\", \"Di\", \"Mi\", \"Do\", \"Fr\", \"Sa\"\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\tnl: { // Dutch\r\n\t\t\t\tmonths: [\r\n\t\t\t\t\t\"januari\", \"februari\", \"maart\", \"april\", \"mei\", \"juni\", \"juli\", \"augustus\", \"september\", \"oktober\", \"november\", \"december\"\r\n\t\t\t\t],\r\n\t\t\t\tdayOfWeek: [\r\n\t\t\t\t\t\"zo\", \"ma\", \"di\", \"wo\", \"do\", \"vr\", \"za\"\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\ttr: { // Turkish\r\n\t\t\t\tmonths: [\r\n\t\t\t\t\t\"Ocak\", \"\u00C5\u017Eubat\", \"Mart\", \"Nisan\", \"May\u00C4\u00B1s\", \"Haziran\", \"Temmuz\", \"A\u00C4\u0178ustos\", \"Eyl\u00C3\u00BCl\", \"Ekim\", \"Kas\u00C4\u00B1m\", \"Aral\u00C4\u00B1k\"\r\n\t\t\t\t],\r\n\t\t\t\tdayOfWeek: [\r\n\t\t\t\t\t\"Paz\", \"Pts\", \"Sal\", \"\u00C3\u2021ar\", \"Per\", \"Cum\", \"Cts\"\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\tfr: { //French\r\n\t\t\t\tmonths: [\r\n\t\t\t\t\t\"Janvier\", \"F\u00C3\u00A9vrier\", \"Mars\", \"Avril\", \"Mai\", \"Juin\", \"Juillet\", \"Ao\u00C3\u00BBt\", \"Septembre\", \"Octobre\", \"Novembre\", \"D\u00C3\u00A9cembre\"" . "\r\n\t\t\t\t],\r\n\t\t\t\tdayOfWeek: [\r\n\t\t\t\t\t\"Dim\", \"Lun\", \"Mar\", \"Mer\", \"Jeu\", \"Ven\", \"Sam\"\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\tes: { // Spanish\r\n\t\t\t\tmonths: [\r\n\t\t\t\t\t\"Enero\", \"Febrero\", \"Marzo\", \"Abril\", \"Mayo\", \"Junio\", \"Julio\", \"Agosto\", \"Septiembre\", \"Octubre\", \"Noviembre\", \"Diciembre\"\r\n\t\t\t\t],\r\n\t\t\t\tdayOfWeek: [\r\n\t\t\t\t\t\"Dom\", \"Lun\", \"Mar\", \"Mi\u00C3\u00A9\", \"Jue\", \"Vie\", \"S\u00C3\u00A1b\"\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\tth: { // Thai\r\n\t\t\t\tmonths: [\r\n\t\t\t\t\t'\u00E0\u00B8\u00A1\u00E0\u00B8\u0081\u00E0\u00B8\u00A3\u00E0\u00B8\u00B2\u00E0\u00B8\u201E\u00E0\u00B8\u00A1', '\u00E0\u00B8\u0081\u00E0\u00B8\u00B8\u00E0\u00B8\u00A1\u00E0\u00B8 \u00E0\u00B8\u00B2\u00E0\u00B8\u017E\u00E0\u00B8\u00B1\u00E0\u00B8\u2122\u00E0\u00B8\u02DC\u00E0\u00B9\u0152', '\u00E0\u00B8\u00A1\u00E0\u00B8\u00B5\u00E0\u00B8\u2122\u00E0\u00B8\u00B2\u00E0\u00B8\u201E\u00E0\u00B8\u00A1', '\u00E0\u00B9\u20AC\u00E0\u00B8\u00A1\u00E0\u00B8\u00A9\u00E0\u00B8\u00B2\u00E0\u00B8\u00A2\u00E0\u00B8\u2122', '\u00E0\u00B8\u017E\u00E0\u00B8\u00A4\u00E0\u00B8\u00A9\u00E0\u00B8 \u00E0\u00B8\u00B2\u00E0\u00B8\u201E\u00E0\u00B8\u00A1', '\u00E0\u00B8\u00A1\u00E0\u00B8\u00B4\u00E0\u00B8\u2013\u00E0\u00B8\u00B8\u00E0\u00B8\u2122\u00E0\u00B8\u00B2\u00E0\u00B8\u00A2\u00E0\u00B8\u2122', '\u00E0\u00B8\u0081\u00E0\u00B8\u00A3\u00E0\u00B8\u0081\u00E0\u00B8\u017D\u00E0\u00B8\u00B2\u00E0\u00B8\u201E\u00E0\u00B8\u00A1', '\u00E0\u00B8\u00AA\u00E0\u00B8\u00B4\u00E0\u00B8\u2021\u00E0\u00B8\u00AB\u00E0\u00B8\u00B2\u00E0\u00B8" . "\u201E\u00E0\u00B8\u00A1', '\u00E0\u00B8\u0081\u00E0\u00B8\u00B1\u00E0\u00B8\u2122\u00E0\u00B8\u00A2\u00E0\u00B8\u00B2\u00E0\u00B8\u00A2\u00E0\u00B8\u2122', '\u00E0\u00B8\u2022\u00E0\u00B8\u00B8\u00E0\u00B8\u00A5\u00E0\u00B8\u00B2\u00E0\u00B8\u201E\u00E0\u00B8\u00A1', '\u00E0\u00B8\u017E\u00E0\u00B8\u00A4\u00E0\u00B8\u00A8\u00E0\u00B8\u02C6\u00E0\u00B8\u00B4\u00E0\u00B8\u0081\u00E0\u00B8\u00B2\u00E0\u00B8\u00A2\u00E0\u00B8\u2122', '\u00E0\u00B8\u02DC\u00E0\u00B8\u00B1\u00E0\u00B8\u2122\u00E0\u00B8\u00A7\u00E0\u00B8\u00B2\u00E0\u00B8\u201E\u00E0\u00B8\u00A1'\r\n\t\t\t\t],\r\n\t\t\t\tdayOfWeek: [\r\n\t\t\t\t\t'\u00E0\u00B8\u00AD\u00E0\u00B8\u00B2.', '\u00E0\u00B8\u02C6.', '\u00E0\u00B8\u00AD.', '\u00E0\u00B8\u017E.', '\u00E0\u00B8\u017E\u00E0\u00B8\u00A4.', '\u00E0\u00B8\u00A8.', '\u00E0\u00B8\u00AA.'\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\tpl: { // Polish\r\n\t\t\t\tmonths: [\r\n\t\t\t\t\t\"stycze\u00C5\u201E\", \"luty\", \"marzec\", \"kwiecie\u00C5\u201E\", \"maj\", \"czerwiec\", \"lipiec\", \"sierpie\u00C5\u201E\", \"wrzesie\u00C5\u201E\", \"pa\u00C5\u00BAdziernik\", \"listopad\", \"grudzie\u00C5\u201E\"\r\n\t\t\t\t],\r\n\t\t\t\tdayOfWeek: [\r\n\t\t\t\t\t\"nd\", \"pn\", \"wt\", \"\u00C5\u203Ar\", \"cz\", \"pt\", \"sb\"\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\tpt: { // Portuguese\r\n\t\t\t\tmonths: [\r\n\t\t\t\t\t\"Janeiro\", \"Fevereiro\", \"Mar\u00C3\u00A7o\", \"Abril\", \"Maio\", \"Junho\", \"Julho\", \"Agosto\", \"Setembro\", \"Outubro\", \"Novembro\", \"Dezembro\"\r\n\t\t\t\t],\r\n\t\t\t\tdayOfWeek: [\r\n\t\t\t\t\t\"Dom\", \"Seg\", \"Ter\", \"Qua\", \"Qui\", \"Sex\"," . "\"Sab\"\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\tch: { // Simplified Chinese\r\n\t\t\t\tmonths: [\r\n\t\t\t\t\t\"\u00E4\u00B8\u20AC\u00E6\u0153\u02C6\", \"\u00E4\u00BA\u0152\u00E6\u0153\u02C6\", \"\u00E4\u00B8\u2030\u00E6\u0153\u02C6\", \"\u00E5\u203A\u203A\u00E6\u0153\u02C6\", \"\u00E4\u00BA\u201D\u00E6\u0153\u02C6\", \"\u00E5\u2026\u00E6\u0153\u02C6\", \"\u00E4\u00B8\u0192\u00E6\u0153\u02C6\", \"\u00E5\u2026\u00AB\u00E6\u0153\u02C6\", \"\u00E4\u00B9\u009D\u00E6\u0153\u02C6\", \"\u00E5\u008D\u0081\u00E6\u0153\u02C6\", \"\u00E5\u008D\u0081\u00E4\u00B8\u20AC\u00E6\u0153\u02C6\", \"\u00E5\u008D\u0081\u00E4\u00BA\u0152\u00E6\u0153\u02C6\"\r\n\t\t\t\t],\r\n\t\t\t\tdayOfWeek: [\r\n\t\t\t\t\t\"\u00E6\u2014\u00A5\", \"\u00E4\u00B8\u20AC\", \"\u00E4\u00BA\u0152\", \"\u00E4\u00B8\u2030\", \"\u00E5\u203A\u203A\", \"\u00E4\u00BA\u201D\", \"\u00E5\u2026\"\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\tse: { // Swedish\r\n\t\t\t\tmonths: [\r\n\t\t\t\t\t\"Januari\", \"Februari\", \"Mars\", \"April\", \"Maj\", \"Juni\", \"Juli\", \"Augusti\", \"September\",  \"Oktober\", \"November\", \"December\"\r\n\t\t\t\t],\r\n\t\t\t\tdayOfWeek: [\r\n\t\t\t\t\t\"S\u00C3\u00B6n\", \"M\u00C3\u00A5n\", \"Tis\", \"Ons\", \"Tor\", \"Fre\", \"L\u00C3\u00B6r\"\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\tkr: { // Korean\r\n\t\t\t\tmonths: [\r\n\t\t\t\t\t\"1\u00EC\u203A\u201D\", \"2\u00EC\u203A\u201D\", \"3\u00EC\u203A\u201D\", \"4\u00EC\u203A\u201D\", \"5\u00EC\u203A\u201D\", \"6\u00EC\u203A\u201D\", \"7\u00EC\u203A\u201D\", \"8\u00EC\u203A\u201D\", \"9\u00EC\u203A\u201D\", \"10\u00EC\u203A\u201D\", \"11\u00EC\u203A\u201D\"," . "\"12\u00EC\u203A\u201D\"\r\n\t\t\t\t],\r\n\t\t\t\tdayOfWeek: [\r\n\t\t\t\t\t\"\u00EC\u009D\u00BC\", \"\u00EC\u203A\u201D\", \"\u00ED\u2122\u201D\", \"\u00EC\u02C6\u02DC\", \"\u00EB\u00AA\u00A9\", \"\u00EA\u00B8\u02C6\", \"\u00ED\u2020 \"\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\tit: { // Italian\r\n\t\t\t\tmonths: [\r\n\t\t\t\t\t\"Gennaio\", \"Febbraio\", \"Marzo\", \"Aprile\", \"Maggio\", \"Giugno\", \"Luglio\", \"Agosto\", \"Settembre\", \"Ottobre\", \"Novembre\", \"Dicembre\"\r\n\t\t\t\t],\r\n\t\t\t\tdayOfWeek: [\r\n\t\t\t\t\t\"Dom\", \"Lun\", \"Mar\", \"Mer\", \"Gio\", \"Ven\", \"Sab\"\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\tda: { // Dansk\r\n\t\t\t\tmonths: [\r\n\t\t\t\t\t\"January\", \"Februar\", \"Marts\", \"April\", \"Maj\", \"Juni\", \"July\", \"August\", \"September\", \"Oktober\", \"November\", \"December\"\r\n\t\t\t\t],\r\n\t\t\t\tdayOfWeek: [\r\n\t\t\t\t\t\"S\u00C3\u00B8n\", \"Man\", \"Tir\", \"Ons\", \"Tor\", \"Fre\", \"L\u00C3\u00B8r\"\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\tno: { // Norwegian\r\n\t\t\t\tmonths: [\r\n\t\t\t\t\t\"Januar\", \"Februar\", \"Mars\", \"April\", \"Mai\", \"Juni\", \"Juli\", \"August\", \"September\", \"Oktober\", \"November\", \"Desember\"\r\n\t\t\t\t],\r\n\t\t\t\tdayOfWeek: [\r\n\t\t\t\t\t\"S\u00C3\u00B8n\", \"Man\", \"Tir\", \"Ons\", \"Tor\", \"Fre\", \"L\u00C3\u00B8r\"\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\tja: { // Japanese\r\n\t\t\t\tmonths: [\r\n\t\t\t\t\t\"1\u00E6\u0153\u02C6\", \"2\u00E6\u0153\u02C6\", \"3\u00E6\u0153\u02C6\", \"4\u00E6\u0153\u02C6\", \"5\u00E6\u0153\u02C6\", \"6\u00E6\u0153\u02C6\", \"7\u00E6\u0153\u02C6\", \"8\u00E6\u0153\u02C6\", \"9\u00E6\u0153\u02C6\", \"10\u00E6\u0153\u02C6\", \"11\u00E6\u0153\u02C6\", \"12\u00E6\u0153\u02C6\"\r\n\t\t\t\t],\r\n\t\t\t\tdayOfWeek: [\r\n\t\t\t\t\t\"\u00E6\u2014\u00A5\", \"\u00E6\u0153\u02C6\", \"\u00E7\u0081\u00AB\", \"\u00E6\u00B0\u00B4\", \"\u00E6\u0153\u00A8\", \"\u00E9\u2021\u2018\", \"\u00E5\u0153\u0178\"\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\tvi: { // Vietnamese\r\n\t\t\t\tmonths: [\r\n\t\t\t\t\t\"Th\u00C3\u00A1ng 1\", \"Th\u00C3\u00A1ng 2\", \"Th\u00C3\u00A1ng 3\", \"Th\u00C3\u00A1ng 4\", \"Th\u00C3\u00A1ng 5\", \"Th\u00C3\u00A1ng 6\", \"Th\u00C3\u00A1ng 7\", \"Th\u00C3\u00A1ng 8\", \"Th\u00C3\u00A1ng 9\", \"Th\u00C3\u00A1ng 10\", \"Th\u00C3\u00A1ng 11\", \"Th\u00C3\u00A1ng 12\"\r\n\t\t\t\t],\r\n\t\t\t\tdayOfWeek: [\r\n\t\t\t\t\t\"CN\", \"T2\", \"T3\", \"T4\", \"T5\", \"T6\", \"T7\"\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\tsl: { // Sloven\u00C5\u00A1\u00C4\u008Dina\r\n\t\t\t\tmonths: [\r\n\t\t\t\t\t\"Januar\", \"Februar\", \"Marec\", \"April\", \"Maj\", \"Junij\", \"Julij\", \"Avgust\", \"September\", \"Oktober\", \"November\", \"December\"\r\n\t\t\t\t],\r\n\t\t\t\tdayOfWeek: [\r\n\t\t\t\t\t\"Ned\", \"Pon\", \"Tor\", \"Sre\", \"\u00C4\u0152et\", \"Pet\", \"Sob\"\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\tcs: { // \u00C4\u0152e\u00C5\u00A1tina\r\n\t\t\t\tmonths: [\r\n\t\t\t\t\t\"Leden\", \"\u00C3\u0161nor\", \"B\u00C5\u2122ezen\", \"Duben\", \"Kv\u00C4\u203Aten\", \"\u00C4\u0152erven\", \"\u00C4\u0152ervenec\", \"Srpen\", \"Z\u00C3\u00A1\u00C5\u2122\", \"\u00C5\u02DC\u00C3jen\", \"Listopad\", \"Prosinec\"\r\n\t\t\t\t],\r\n\t\t\t\tdayOfWeek: [\r\n\t\t\t\t\t\"Ne\", \"Po\", \"\u00C3\u0161t\", \"St\", \"\u00C4\u0152t\", \"P\u00C3\u00A1\", \"So\"\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\thu: { // Hungarian\r\n\t\t\t\tmonths: [\r\n\t\t\t\t\t\"Janu\u00C3\u00A1r\", \"Febru\u00C3\u00A1r\", \"M\u00C3\u00A1rcius\", \"\u00C3\u0081prilis\", \"M\u00C3\u00A1jus\", \"J\u00C3\u00BAnius\", \"J\u00C3\u00BAlius\", \"Augusztus\", \"Szeptember\", \"Okt\u00C3\u00B3ber\", \"November\", \"December\"\r\n\t\t\t\t],\r\n\t\t\t\tdayOfWeek: [\r\n\t\t\t\t\t\"Va\", \"H\u00C3\u00A9\", \"Ke\", \"Sze\", \"Cs\", \"P\u00C3\u00A9\", \"Szo\"\r\n\t\t\t\t]\r\n\t\t\t}\r\n\t\t},\r\n\t\tvalue: '',\r\n\t\tlang: 'en',\r\n\r\n\t\tformat:\t'Y/m/d H:i',\r\n\t\tformatTime:\t'H:i',\r\n\t\tformatDate:\t'Y/m/d',\r\n\r\n\t\tstartDate:\tfalse, // new Date(), '1986/12/08', '-1970/01/05','-1970/01/05',\r\n\t\tstep: 60,\r\n\t\tmonthChangeSpinner: true,\r\n\r\n\t\tcloseOnDateSelect: false,\r\n\t\tcloseOnWithoutClick: true,\r\n\t\tcloseOnInputClick: true,\r\n\r\n\t\ttimepicker: true,\r\n\t\tdatepicker: true,\r\n\t\tweeks: false,\r\n\r\n\t\tdefaultTime: false,\t// use formatTime format (ex. '10:00' for formatTime:\t'H:i')\r\n\t\tdefaultDate: false,\t// use formatDate format (ex new Date() or '1986/12/08' or '-1970/01/05' or '-1970/01/05')\r\n\r\n\t\tminDate: false,\r\n\t\tmaxDate: false,\r\n\t\tminTime: false,\r\n\t\tmaxTime: false,\r\n\r\n\t\tallowTimes: [],\r\n\t\topened: false,\r\n\t\tinitTime: true,\r\n\t\tinline: false,\r\n\t\ttheme: '',\r\n\r\n\t\tonSelectDate: function () {},\r\n\t\tonSelectTime: function () {},\r\n\t\tonChangeMonth: function () {},\r\n\t\tonChangeYear: function () {},\r\n\t\tonChangeDateTime: function () {},\r\n\t\tonShow: function () {},\r\n\t\tonClose: function () {},\r\n\t\tonGenerate: function () {},\r\n\r\n\t\twithoutCopyright: true,\r\n\t\tinverseButton: false,\r\n\t\thours12: false,\r\n\t\tnext:\t'xdsoft_next',\r\n\t\tprev : 'xdsoft_prev',\r\n\t\tdayOfWeekStart: 0,\r\n\t\tparentID: 'body',\r\n\t\ttimeHeightInTimePicker: 25,\r\n\t\ttimepickerScrollbar: true,\r\n\t\ttodayButton: true,\r\n\t\tdefaultSelect: true,\r\n\r\n\t\tscrollMonth: true,\r\n\t\tscrollTime: true,\r\n\t\tscrollInput: true,\r\n\r\n\t\tlazyInit: false,\r\n\t\tmask: false,\r\n\t\tvalidateOnBlur: true,\r\n\t\tallowBlank: true,\r\n\t\tyearStart: 1950,\r\n\t\tyearEnd: 2050,\r\n\t\tstyle: '',\r\n\t\tid: '',\r\n\t\tfixed: false,\r\n\t\troundTime: 'round', // ceil, floor\r\n\t\tclassName: '',\r\n\t\tweekends: [],\r\n\t\tyearOffset: 0,\r\n\t\tbeforeShowDay: null\r\n\t};\r\n\t// fix for ie8\r\n\tif (!Array.prototype.indexOf) {\r\n\t\tArray.prototype.indexOf = function (obj, start) {\r\n\t\t\tvar i, j;\r\n\t\t\tfor (i = (start || 0), j = this.length; i < j; i += 1) {\r\n\t\t\t\tif (this[i] === obj) { return i; }\r\n\t\t\t}\r\n\t\t\treturn -1;\r\n\t\t};\r\n\t}\r\n\tDate.prototype.countDaysInMonth = function () {\r\n\t\treturn new Date(this.getFullYear(), this.getMonth() + 1, 0).getDate();\r\n\t};\r\n\t\$.fn.xdsoftScroller = function (percent) {\r\n\t\treturn this.each(function () {\r\n\t\t\tvar timeboxparent = \$(this),\r\n\t\t\t\tpointerEventToXY = function (e) {\r\n\t\t\t\t\tvar out = {x: 0, y: 0},\r\n\t\t\t\t\t\ttouch;\r\n\t\t\t\t\tif (e.type === 'touchstart' || e.type === 'touchmove' || e.type === 'touchend' || e.type === 'touchcancel') {\r\n\t\t\t\t\t\ttouch  = e.originalEvent.touches[0] || e.originalEvent.changedTouches[0];\r\n\t\t\t\t\t\tout.x = touch.clientX;\r\n\t\t\t\t\t\tout.y = touch.clientY;\r\n\t\t\t\t\t} else if (e.type === 'mousedown' || e.type === 'mouseup' || e.type === 'mousemove' || e.type === 'mouseover' || e.type === 'mouseout' || e.type === 'mouseenter' || e.type === 'mouseleave') {\r\n\t\t\t\t\t\tout.x = e.clientX;\r\n\t\t\t\t\t\tout.y = e.clientY;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn out;\r\n\t\t\t\t},\r\n\t\t\t\tmove = 0,\r\n\t\t\t\ttimebox,\r\n\t\t\t\tparentHeight,\r\n\t\t\t\theight,\r\n\t\t\t\tscrollbar,\r\n\t\t\t\tscroller,\r\n\t\t\t\tmaximumOffset = 100,\r\n\t\t\t\tstart = false,\r\n\t\t\t\tstartY = 0,\r\n\t\t\t\tstartTop = 0,\r\n\t\t\t\th1 = 0,\r\n\t\t\t\ttouchStart = false,\r\n\t\t\t\tstartTopScroll = 0,\r\n\t\t\t\tcalcOffset = function () {};\r\n\r\n\t\t\tif (!\$(this).hasClass('xdsoft_scroller_box')) {\r\n\t\t\t\ttimebox = timeboxparent.children().eq(0);\r\n\t\t\t\tparentHeight = timeboxparent[0].clientHeight;\r\n\t\t\t\theight = timebox[0].offsetHeight;\r\n\t\t\t\tscrollbar = \$('<div class=\"xdsoft_scrollbar\"></div>');\r\n\t\t\t\tscroller = \$('<div class=\"xdsoft_scroller\"></div>');\r\n\t\t\t\tscrollbar.append(scroller);\r\n\r\n\t\t\t\ttimeboxparent.addClass('xdsoft_scroller_box').append(scrollbar);\r\n\t\t\t\tcalcOffset = function calcOffset(event) {\r\n\t\t\t\t\tvar offset = pointerEventToXY(event).y - startY + startTopScroll;\r\n\t\t\t\t\tif (offset < 0) {\r\n\t\t\t\t\t\toffset = 0;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (offset + scroller[0].offsetHeight > h1) {\r\n\t\t\t\t\t\toffset = h1 - scroller[0].offsetHeight;\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttimeboxparent.trigger('scroll_element.xdsoft_scroller', [maximumOffset ? offset / maximumOffset : 0]);\r\n\t\t\t\t};\r\n\r\n\t\t\t\tscroller\r\n\t\t\t\t\t.on('touchstart.xdsoft_scroller mousedown.xdsoft_scroller', function (event) {\r\n\t\t\t\t\t\tif (!parentHeight) {\r\n\t\t\t\t\t\t\ttimeboxparent.trigger('resize_scroll.xdsoft_scroller', [percent]);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tstartY = pointerEventToXY(event).y;\r\n\t\t\t\t\t\tstartTopScroll = parseInt(scroller.css('margin-top'), 10);\r\n\t\t\t\t\t\th1 = scrollbar[0].offsetHeight;\r\n\r\n\t\t\t\t\t\tif (event.type === 'mousedown') {\r\n\t\t\t\t\t\t\tif (document) {\r\n\t\t\t\t\t\t\t\t\$(document.body).addClass('xdsoft_noselect');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\$([document.body, window]).on('mouseup.xdsoft_scroller', function arguments_callee() {\r\n\t\t\t\t\t\t\t\t\$([document.body, window]).off('mouseup.xdsoft_scroller', arguments_callee)\r\n\t\t\t\t\t\t\t\t\t.off('mousemove.xdsoft_scroller', calcOffset)\r\n\t\t\t\t\t\t\t\t\t.removeClass('xdsoft_noselect');\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\$(document.body).on('mousemove.xdsoft_scroller', calcOffset);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\ttouchStart = true;\r\n\t\t\t\t\t\t\tevent.stopPropagation();\r\n\t\t\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.on('touchmove', function (event) {\r\n\t\t\t\t\t\tif (touchStart) {\r\n\t\t\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\t\t\tcalcOffset(event);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.on('touchend touchcancel', function (event) {\r\n\t\t\t\t\t\ttouchStart =  false;\r\n\t\t\t\t\t\tstartTopScroll = 0;\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\ttimeboxparent\r\n\t\t\t\t\t.on('scroll_element.xdsoft_scroller', function (event, percentage) {\r\n\t\t\t\t\t\tif (!parentHeight) {\r\n\t\t\t\t\t\t\ttimeboxparent.trigger('resize_scroll.xdsoft_scroller', [percentage, true]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tpercentage = percentage > 1 ? 1 : (percentage < 0 || isNaN(percentage)) ? 0 : percentage;\r\n\r\n\t\t\t\t\t\tscroller.css('margin-top', maximumOffset * percentage);\r\n\r\n\t\t\t\t\t\tsetTimeout(function () {\r\n\t\t\t\t\t\t\ttimebox.css('marginTop', -parseInt((timebox[0].offsetHeight - parentHeight) * percentage, 10));\r\n\t\t\t\t\t\t}, 10);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.on('resize_scroll.xdsoft_scroller', function (event, percentage, noTriggerScroll) {\r\n\t\t\t\t\t\tvar percent, sh;\r\n\t\t\t\t\t\tparentHeight = timeboxparent[0].clientHeight;\r\n\t\t\t\t\t\theight = timebox[0].offsetHeight;\r\n\t\t\t\t\t\tpercent = parentHeight / height;\r\n\t\t\t\t\t\tsh = percent * scrollbar[0].offsetHeight;\r\n\t\t\t\t\t\tif (percent > 1) {\r\n\t\t\t\t\t\t\tscroller.hide();\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tscroller.show();\r\n\t\t\t\t\t\t\tscroller.css('height', parseInt(sh > 10 ? sh : 10, 10));\r\n\t\t\t\t\t\t\tmaximumOffset = scrollbar[0].offsetHeight - scroller[0].offsetHeight;\r\n\t\t\t\t\t\t\tif (noTriggerScroll !== true) {\r\n\t\t\t\t\t\t\t\ttimeboxparent.trigger('scroll_element.xdsoft_scroller', [percentage || Math.abs(parseInt(timebox.css('marginTop'), 10)) / (height - parentHeight)]);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\ttimeboxparent.on('mousewheel', function (event) {\r\n\t\t\t\t\tvar top = Math.abs(parseInt(timebox.css('marginTop'), 10));\r\n\r\n\t\t\t\t\ttop = top - (event.deltaY * 20);\r\n\t\t\t\t\tif (top < 0) {\r\n\t\t\t\t\t\ttop = 0;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\ttimeboxparent.trigger('scroll_element.xdsoft_scroller', [top / (height - parentHeight)]);\r\n\t\t\t\t\tevent.stopPropagation();\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t});\r\n\r\n\t\t\t\ttimeboxparent.on('touchstart', function (event) {\r\n\t\t\t\t\tstart = pointerEventToXY(event);\r\n\t\t\t\t\tstartTop = Math.abs(parseInt(timebox.css('marginTop'), 10));\r\n\t\t\t\t});\r\n\r\n\t\t\t\ttimeboxparent.on('touchmove', function (event) {\r\n\t\t\t\t\tif (start) {\r\n\t\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\t\tvar coord = pointerEventToXY(event);\r\n\t\t\t\t\t\ttimeboxparent.trigger('scroll_element.xdsoft_scroller', [(startTop - (coord.y - start.y)) / (height - parentHeight)]);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\ttimeboxparent.on('touchend touchcancel', function (event) {\r\n\t\t\t\t\tstart = false;\r\n\t\t\t\t\tstartTop = 0;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\ttimeboxparent.trigger('resize_scroll.xdsoft_scroller', [percent]);\r\n\t\t});\r\n\t};\r\n\r\n\t\$.fn.datetimepicker = function (opt) {\r\n\t\tvar KEY0 = 48,\r\n\t\t\tKEY9 = 57,\r\n\t\t\t_KEY0 = 96,\r\n\t\t\t_KEY9 = 105,\r\n\t\t\tCTRLKEY = 17,\r\n\t\t\tDEL = 46,\r\n\t\t\tENTER = 13,\r\n\t\t\tESC = 27,\r\n\t\t\tBACKSPACE = 8,\r\n\t\t\tARROWLEFT = 37,\r\n\t\t\tARROWUP = 38,\r\n\t\t\tARROWRIGHT = 39,\r\n\t\t\tARROWDOWN = 40,\r\n\t\t\tTAB = 9,\r\n\t\t\tF5 = 116,\r\n\t\t\tAKEY = 65,\r\n\t\t\tCKEY = 67,\r\n\t\t\tVKEY = 86,\r\n\t\t\tZKEY = 90,\r\n\t\t\tYKEY = 89,\r\n\t\t\tctrlDown\t=\tfalse,\r\n\t\t\toptions = (\$.isPlainObject(opt) || !opt) ? \$.extend(true, {}, default_options, opt) : \$.extend(true, {}, default_options),\r\n\r\n\t\t\tlazyInitTimer = 0,\r\n\t\t\tcreateDateTimePicker,\r\n\t\t\tdestroyDateTimePicker,\r\n\t\t\t_xdsoft_datetime,\r\n\r\n\t\t\tlazyInit = function (input) {\r\n\t\t\t\tinput\r\n\t\t\t\t\t.on('open.xdsoft focusin.xdsoft mousedown.xdsoft', function initOnActionCallback(event) {\r\n\t\t\t\t\t\tif (input.is(':disabled') || input.is(':hidden') || !input.is(':visible') || input.data('xdsoft_datetimepicker')) {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tclearTimeout(lazyInitTimer);\r\n\t\t\t\t\t\tlazyInitTimer = setTimeout(function () {\r\n\r\n\t\t\t\t\t\t\tif (!input.data('xdsoft_datetimepicker')) {\r\n\t\t\t\t\t\t\t\tcreateDateTimePicker(input);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tinput\r\n\t\t\t\t\t\t\t\t.off('open.xdsoft focusin.xdsoft mousedown.xdsoft', initOnActionCallback)\r\n\t\t\t\t\t\t\t\t.trigger('open.xdsoft');\r\n\t\t\t\t\t\t}, 100);\r\n\t\t\t\t\t});\r\n\t\t\t};\r\n\r\n\t\tcreateDateTimePicker = function (input) {\r\n\t\t\tvar datetimepicker = \$('<div ' + (options.id ? 'id=\"' + options.id + '\"' : '') + ' ' + (options.style ? 'style=\"' + options.style + '\"' : '') + ' class=\"xdsoft_datetimepicker xdsoft_' + options.theme + ' xdsoft_noselect ' + (options.weeks ? ' xdsoft_showweeks' : '') + options.className + '\"></div>'),\r\n\t\t\t\txdsoft_copyright = \$('<div class=\"xdsoft_copyright\"><a target=\"_blank\" href=\"http://xdsoft.net/jqplugins/datetimepicker/\">xdsoft.net</a></div>'),\r\n\t\t\t\tdatepicker = \$('<div class=\"xdsoft_datepicker active\"></div>'),\r\n\t\t\t\tmounth_picker = \$('<div class=\"xdsoft_mounthpicker\"><button type=\"button\" class=\"xdsoft_prev\"></button><button type=\"button\" class=\"xdsoft_today_button\"></button>' +\r\n\t\t\t\t\t'<div class=\"xdsoft_label xdsoft_month\"><span></span><i></i></div>' +\r\n\t\t\t\t\t'<div class=\"xdsoft_label xdsoft_year\"><span></span><i></i></div>' +\r\n\t\t\t\t\t'<button type=\"button\" class=\"xdsoft_next\"></button></div>'),\r\n\t\t\t\tcalendar = \$('<div class=\"xdsoft_calendar\"></div>'),\r\n\t\t\t\ttimepicker = \$('<div class=\"xdsoft_timepicker active\"><button type=\"button\" class=\"xdsoft_prev\"></button><div class=\"xdsoft_time_box\"></div><button type=\"button\" class=\"xdsoft_next\"></button></div>'),\r\n\t\t\t\ttimeboxparent = timepicker.find('.xdsoft_time_box').eq(0),\r\n\t\t\t\ttimebox = \$('<div class=\"xdsoft_time_variant\"></div>'),\r\n\t\t\t\tscrollbar = \$('<div class=\"xdsoft_scrollbar\"></div>'),\r\n\t\t\t\tscroller = \$('<div class=\"xdsoft_scroller\"></div>'),\r\n\t\t\t\tmonthselect = \$('<div class=\"xdsoft_select xdsoft_monthselect\"><div></div></div>'),\r\n\t\t\t\tyearselect = \$('<div class=\"xdsoft_select xdsoft_yearselect\"><div></div></div>'),\r\n\t\t\t\ttriggerAfterOpen = false,\r\n\t\t\t\tXDSoft_datetime,\r\n\t\t\t\t//scroll_element,\r\n\t\t\t\txchangeTimer,\r\n\t\t\t\ttimerclick,\r\n\t\t\t\tcurrent_time_index,\r\n\t\t\t\tsetPos,\r\n\t\t\t\ttimer = 0,\r\n\t\t\t\ttimer1 = 0;\r\n\r\n\t\t\tmounth_picker\r\n\t\t\t\t.find('.xdsoft_month span')\r\n\t\t\t\t\t.after(monthselect);\r\n\t\t\tmounth_picker\r\n\t\t\t\t.find('.xdsoft_year span')\r\n\t\t\t\t\t.after(yearselect);\r\n\r\n\t\t\tmounth_picker\r\n\t\t\t\t.find('.xdsoft_month,.xdsoft_year')\r\n\t\t\t\t\t.on('mousedown.xdsoft', function (event) {\r\n\t\t\t\t\tvar select = \$(this).find('.xdsoft_select').eq(0),\r\n\t\t\t\t\t\tval = 0,\r\n\t\t\t\t\t\ttop = 0,\r\n\t\t\t\t\t\tvisible = select.is(':visible'),\r\n\t\t\t\t\t\titems,\r\n\t\t\t\t\t\ti;\r\n\r\n\t\t\t\t\tmounth_picker\r\n\t\t\t\t\t\t.find('.xdsoft_select')\r\n\t\t\t\t\t\t\t.hide();\r\n\t\t\t\t\tif (_xdsoft_datetime.currentTime) {\r\n\t\t\t\t\t\tval = _xdsoft_datetime.currentTime[\$(this).hasClass('xdsoft_month') ? 'getMonth' : 'getFullYear']();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tselect[visible ? 'hide' : 'show']();\r\n\t\t\t\t\tfor (items = select.find('div.xdsoft_option'), i = 0; i < items.length; i += 1) {\r\n\t\t\t\t\t\tif (items.eq(i).data('value') === val) {\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\ttop += items[0].offsetHeight;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tselect.xdsoftScroller(top / (select.children()[0].offsetHeight - (select[0].clientHeight)));\r\n\t\t\t\t\tevent.stopPropagation();\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t});\r\n\r\n\t\t\tmounth_picker\r\n\t\t\t\t.find('.xdsoft_select')\r\n\t\t\t\t\t.xdsoftScroller()\r\n\t\t\t\t.on('mousedown.xdsoft', function (event) {\r\n\t\t\t\t\tevent.stopPropagation();\r\n\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t})\r\n\t\t\t\t.on('mousedown.xdsoft', '.xdsoft_option', function (event) {\r\n\t\t\t\t\tvar year = _xdsoft_datetime.currentTime.getFullYear();\r\n\t\t\t\t\tif (_xdsoft_datetime && _xdsoft_datetime.currentTime) {\r\n\t\t\t\t\t\t_xdsoft_datetime.currentTime[\$(this).parent().parent().hasClass('xdsoft_monthselect') ? 'setMonth' : 'setFullYear'](\$(this).data('value'));\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\$(this).parent().parent().hide();\r\n\r\n\t\t\t\t\tdatetimepicker.trigger('xchange.xdsoft');\r\n\t\t\t\t\tif (options.onChangeMonth && \$.isFunction(options.onChangeMonth)) {\r\n\t\t\t\t\t\toptions.onChangeMonth.call(datetimepicker, _xdsoft_datetime.currentTime, datetimepicker.data('input'));\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (year !== _xdsoft_datetime.currentTime.getFullYear() && \$.isFunction(options.onChangeYear)) {\r\n\t\t\t\t\t\toptions.onChangeYear.call(datetimepicker, _xdsoft_datetime.currentTime, datetimepicker.data('input'));\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\tdatetimepicker.setOptions = function (_options) {\r\n\t\t\t\toptions = \$.extend(true, {}, options, _options);\r\n\r\n\t\t\t\tif (_options.allowTimes && \$.isArray(_options.allowTimes) && _options.allowTimes.length) {\r\n\t\t\t\t\toptions.allowTimes = \$.extend(true, [], _options.allowTimes);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (_options.weekends && \$.isArray(_options.weekends) && _options.weekends.length) {\r\n\t\t\t\t\toptions.weekends = \$.extend(true, [], _options.weekends);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ((options.open || options.opened) && (!options.inline)) {\r\n\t\t\t\t\tinput.trigger('open.xdsoft');\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (options.inline) {\r\n\t\t\t\t\ttriggerAfterOpen = true;\r\n\t\t\t\t\tdatetimepicker.addClass('xdsoft_inline');\r\n\t\t\t\t\tinput.after(datetimepicker).hide();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (options.inverseButton) {\r\n\t\t\t\t\toptions.next = 'xdsoft_prev';\r\n\t\t\t\t\toptions.prev = 'xdsoft_next';\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (options.datepicker) {\r\n\t\t\t\t\tdatepicker.addClass('active');\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdatepicker.removeClass('active');\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (options.timepicker) {\r\n\t\t\t\t\ttimepicker.addClass('active');\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttimepicker.removeClass('active');\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (options.value) {\r\n\t\t\t\t\tif (input && input.val) {\r\n\t\t\t\t\t\tinput.val(options.value);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t_xdsoft_datetime.setCurrentTime(options.value);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (isNaN(options.dayOfWeekStart)) {\r\n\t\t\t\t\toptions.dayOfWeekStart = 0;\r\n\t\t\t\t} else {\r\n\t\t\t\t\toptions.dayOfWeekStart = parseInt(options.dayOfWeekStart, 10) % 7;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!options.timepickerScrollbar) {\r\n\t\t\t\t\tscrollbar.hide();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (options.minDate && /^-(.*)\$/.test(options.minDate)) {\r\n\t\t\t\t\toptions.minDate = _xdsoft_datetime.strToDateTime(options.minDate).dateFormat(options.formatDate);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (options.maxDate &&  /^\\+(.*)\$/.test(options.maxDate)) {\r\n\t\t\t\t\toptions.maxDate = _xdsoft_datetime.strToDateTime(options.maxDate).dateFormat(options.formatDate);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tmounth_picker\r\n\t\t\t\t\t.find('.xdsoft_today_button')\r\n\t\t\t\t\t\t.css('visibility', !options.todayButton ? 'hidden' : 'visible');\r\n\r\n\t\t\t\tif (options.mask) {\r\n\t\t\t\t\tvar e,\r\n\t\t\t\t\t\tgetCaretPos = function (input) {\r\n\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\tif (document.selection && document.selection.createRange) {\r\n\t\t\t\t\t\t\t\t\tvar range = document.selection.createRange();\r\n\t\t\t\t\t\t\t\t\treturn range.getBookmark().charCodeAt(2) - 2;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (input.setSelectionRange) {\r\n\t\t\t\t\t\t\t\t\treturn input.selectionStart;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tsetCaretPos = function (node, pos) {\r\n\t\t\t\t\t\t\tnode = (typeof node === \"string\" || node instanceof String) ? document.getElementById(node) : node;\r\n\t\t\t\t\t\t\tif (!node) {\r\n\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (node.createTextRange) {\r\n\t\t\t\t\t\t\t\tvar textRange = node.createTextRange();\r\n\t\t\t\t\t\t\t\ttextRange.collapse(true);\r\n\t\t\t\t\t\t\t\ttextRange.moveEnd('character', pos);\r\n\t\t\t\t\t\t\t\ttextRange.moveStart('character', pos);\r\n\t\t\t\t\t\t\t\ttextRange.select();\r\n\t\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (node.setSelectionRange) {\r\n\t\t\t\t\t\t\t\tnode.setSelectionRange(pos, pos);\r\n\t\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tisValidValue = function (mask, value) {\r\n\t\t\t\t\t\t\tvar reg = mask\r\n\t\t\t\t\t\t\t\t.replace(/([\\[\\]\\/\\{\\}\\(\\)\\-\\.\\+]{1})/g, '\\\\\\$1')\r\n\t\t\t\t\t\t\t\t.replace(/_/g, '{digit+}')\r\n\t\t\t\t\t\t\t\t.replace(/([0-9]{1})/g, '{digit\$1}')\r\n\t\t\t\t\t\t\t\t.replace(/\\{digit([0-9]{1})\\}/g, '[0-\$1_]{1}')\r\n\t\t\t\t\t\t\t\t.replace(/\\{digit[\\+]\\}/g, '[0-9_]{1}');\r\n\t\t\t\t\t\t\treturn (new RegExp(reg)).test(value);\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\tinput.off('keydown.xdsoft');\r\n\r\n\t\t\t\t\tif (options.mask === true) {\r\n\t\t\t\t\t\toptions.mask = options.format\r\n\t\t\t\t\t\t\t.replace(/Y/g, '9999')\r\n\t\t\t\t\t\t\t.replace(/F/g, '9999')\r\n\t\t\t\t\t\t\t.replace(/m/g, '19')\r\n\t\t\t\t\t\t\t.replace(/d/g, '39')\r\n\t\t\t\t\t\t\t.replace(/H/g, '29')\r\n\t\t\t\t\t\t\t.replace(/i/g, '59')\r\n\t\t\t\t\t\t\t.replace(/s/g, '59');\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (\$.type(options.mask) === 'string') {\r\n\t\t\t\t\t\tif (!isValidValue(options.mask, input.val())) {\r\n\t\t\t\t\t\t\tinput.val(options.mask.replace(/[0-9]/g, '_'));\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tinput.on('keydown.xdsoft', function (event) {\r\n\t\t\t\t\t\t\tvar val = this.value,\r\n\t\t\t\t\t\t\t\tkey = event.which,\r\n\t\t\t\t\t\t\t\tpos,\r\n\t\t\t\t\t\t\t\tdigit;\r\n\r\n\t\t\t\t\t\t\tif (((key >= KEY0 && key <= KEY9) || (key >= _KEY0 && key <= _KEY9)) || (key === BACKSPACE || key === DEL)) {\r\n\t\t\t\t\t\t\t\tpos = getCaretPos(this);\r\n\t\t\t\t\t\t\t\tdigit = (key !== BACKSPACE && key !== DEL) ? String.fromCharCode((_KEY0 <= key && key <= _KEY9) ? key - KEY0 : key) : '_';\r\n\r\n\t\t\t\t\t\t\t\tif ((key === BACKSPACE || key === DEL) && pos) {\r\n\t\t\t\t\t\t\t\t\tpos -= 1;\r\n\t\t\t\t\t\t\t\t\tdigit = '_';\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\twhile (/[^0-9_]/.test(options.mask.substr(pos, 1)) && pos < options.mask.length && pos > 0) {\r\n\t\t\t\t\t\t\t\t\tpos += (key === BACKSPACE || key === DEL) ? -1 : 1;\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\tval = val.substr(0, pos) + digit + val.substr(pos + 1);\r\n\t\t\t\t\t\t\t\tif (\$.trim(val) === '') {\r\n\t\t\t\t\t\t\t\t\tval = options.mask.replace(/[0-9]/g, '_');\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tif (pos === options.mask.length) {\r\n\t\t\t\t\t\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\tpos += (key === BACKSPACE || key === DEL) ? 0 : 1;\r\n\t\t\t\t\t\t\t\twhile (/[^0-9_]/.test(options.mask.substr(pos, 1)) && pos < options.mask.length && pos > 0) {\r\n\t\t\t\t\t\t\t\t\tpos += (key === BACKSPACE || key === DEL) ? -1 : 1;\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\tif (isValidValue(options.mask, val)) {\r\n\t\t\t\t\t\t\t\t\tthis.value = val;\r\n\t\t\t\t\t\t\t\t\tsetCaretPos(this, pos);\r\n\t\t\t\t\t\t\t\t} else if (\$.trim(val) === '') {\r\n\t\t\t\t\t\t\t\t\tthis.value = options.mask.replace(/[0-9]/g, '_');\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tinput.trigger('error_input.xdsoft');\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tif (([AKEY, CKEY, VKEY, ZKEY, YKEY].indexOf(key) !== -1 && ctrlDown) || [ESC, ARROWUP, ARROWDOWN, ARROWLEFT, ARROWRIGHT, F5, CTRLKEY, TAB, ENTER].indexOf(key) !== -1) {\r\n\t\t\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (options.validateOnBlur) {\r\n\t\t\t\t\tinput\r\n\t\t\t\t\t\t.off('blur.xdsoft')\r\n\t\t\t\t\t\t.on('blur.xdsoft', function () {\r\n\t\t\t\t\t\t\tif (options.allowBlank && !\$.trim(\$(this).val()).length) {\r\n\t\t\t\t\t\t\t\t\$(this).val(null);\r\n\t\t\t\t\t\t\t\tdatetimepicker.data('xdsoft_datetime').empty();\r\n\t\t\t\t\t\t\t} else if (!Date.parseDate(\$(this).val(), options.format)) {\r\n\t\t\t\t\t\t\t\t\$(this).val((_xdsoft_datetime.now()).dateFormat(options.format));\r\n\t\t\t\t\t\t\t\tdatetimepicker.data('xdsoft_datetime').setCurrentTime(\$(this).val());\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tdatetimepicker.data('xdsoft_datetime').setCurrentTime(\$(this).val());\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tdatetimepicker.trigger('changedatetime.xdsoft');\r\n\t\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\toptions.dayOfWeekStartPrev = (options.dayOfWeekStart === 0) ? 6 : options.dayOfWeekStart - 1;\r\n\r\n\t\t\t\tdatetimepicker\r\n\t\t\t\t\t.trigger('xchange.xdsoft')\r\n\t\t\t\t\t.trigger('afterOpen.xdsoft');\r\n\t\t\t};\r\n\r\n\t\t\tdatetimepicker\r\n\t\t\t\t.data('options', options)\r\n\t\t\t\t.on('mousedown.xdsoft', function (event) {\r\n\t\t\t\t\tevent.stopPropagation();\r\n\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\tyearselect.hide();\r\n\t\t\t\t\tmonthselect.hide();\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t});\r\n\r\n\t\t\t//scroll_element = timepicker.find('.xdsoft_time_box');\r\n\t\t\ttimeboxparent.append(timebox);\r\n\t\t\ttimeboxparent.xdsoftScroller();\r\n\r\n\t\t\tdatetimepicker.on('afterOpen.xdsoft', function () {\r\n\t\t\t\ttimeboxparent.xdsoftScroller();\r\n\t\t\t});\r\n\r\n\t\t\tdatetimepicker\r\n\t\t\t\t.append(datepicker)\r\n\t\t\t\t.append(timepicker);\r\n\r\n\t\t\tif (options.withoutCopyright !== true) {\r\n\t\t\t\tdatetimepicker\r\n\t\t\t\t\t.append(xdsoft_copyright);\r\n\t\t\t}\r\n\r\n\t\t\tdatepicker\r\n\t\t\t\t.append(mounth_picker)\r\n\t\t\t\t.append(calendar);\r\n\r\n\t\t\t\$(options.parentID)\r\n\t\t\t\t.append(datetimepicker);\r\n\r\n\t\t\tXDSoft_datetime = function () {\r\n\t\t\t\tvar _this = this;\r\n\t\t\t\t_this.now = function (norecursion) {\r\n\t\t\t\t\tvar d = new Date(),\r\n\t\t\t\t\t\tdate,\r\n\t\t\t\t\t\ttime;\r\n\r\n\t\t\t\t\tif (!norecursion && options.defaultDate) {\r\n\t\t\t\t\t\tdate = _this.strToDate(options.defaultDate);\r\n\t\t\t\t\t\td.setFullYear(date.getFullYear());\r\n\t\t\t\t\t\td.setMonth(date.getMonth());\r\n\t\t\t\t\t\td.setDate(date.getDate());\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (options.yearOffset) {\r\n\t\t\t\t\t\td.setFullYear(d.getFullYear() + options.yearOffset);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (!norecursion && options.defaultTime) {\r\n\t\t\t\t\t\ttime = _this.strtotime(options.defaultTime);\r\n\t\t\t\t\t\td.setHours(time.getHours());\r\n\t\t\t\t\t\td.setMinutes(time.getMinutes());\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn d;\r\n\t\t\t\t};\r\n\r\n\t\t\t\t_this.isValidDate = function (d) {\r\n\t\t\t\t\tif (Object.prototype.toString.call(d) !== \"[object Date]\") {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn !isNaN(d.getTime());\r\n\t\t\t\t};\r\n\r\n\t\t\t\t_this.setCurrentTime = function (dTime) {\r\n\t\t\t\t\t_this.currentTime = (typeof dTime === 'string') ? _this.strToDateTime(dTime) : _this.isValidDate(dTime) ? dTime : _this.now();\r\n\t\t\t\t\tdatetimepicker.trigger('xchange.xdsoft');\r\n\t\t\t\t};\r\n\r\n\t\t\t\t_this.empty = function () {\r\n\t\t\t\t\t_this.currentTime = null;\r\n\t\t\t\t};\r\n\r\n\t\t\t\t_this.getCurrentTime = function (dTime) {\r\n\t\t\t\t\treturn _this.currentTime;\r\n\t\t\t\t};\r\n\r\n\t\t\t\t_this.nextMonth = function () {\r\n\t\t\t\t\tvar month = _this.currentTime.getMonth() + 1,\r\n\t\t\t\t\t\tyear;\r\n\t\t\t\t\tif (month === 12) {\r\n\t\t\t\t\t\t_this.currentTime.setFullYear(_this.currentTime.getFullYear() + 1);\r\n\t\t\t\t\t\tmonth = 0;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tyear = _this.currentTime.getFullYear();\r\n\r\n\t\t\t\t\t_this.currentTime.setDate(\r\n\t\t\t\t\t\tMath.min(\r\n\t\t\t\t\t\t\tnew Date(_this.currentTime.getFullYear(), month + 1, 0).getDate(),\r\n\t\t\t\t\t\t\t_this.currentTime.getDate()\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t);\r\n\t\t\t\t\t_this.currentTime.setMonth(month);\r\n\r\n\t\t\t\t\tif (options.onChangeMonth && \$.isFunction(options.onChangeMonth)) {\r\n\t\t\t\t\t\toptions.onChangeMonth.call(datetimepicker, _xdsoft_datetime.currentTime, datetimepicker.data('input'));\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (year !== _this.currentTime.getFullYear() && \$.isFunction(options.onChangeYear)) {\r\n\t\t\t\t\t\toptions.onChangeYear.call(datetimepicker, _xdsoft_datetime.currentTime, datetimepicker.data('input'));\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tdatetimepicker.trigger('xchange.xdsoft');\r\n\t\t\t\t\treturn month;\r\n\t\t\t\t};\r\n\r\n\t\t\t\t_this.prevMonth = function () {\r\n\t\t\t\t\tvar month = _this.currentTime.getMonth() - 1;\r\n\t\t\t\t\tif (month === -1) {\r\n\t\t\t\t\t\t_this.currentTime.setFullYear(_this.currentTime.getFullYear() - 1);\r\n\t\t\t\t\t\tmonth = 11;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t_this.currentTime.setDate(\r\n\t\t\t\t\t\tMath.min(\r\n\t\t\t\t\t\t\tnew Date(_this.currentTime.getFullYear(), month + 1, 0).getDate(),\r\n\t\t\t\t\t\t\t_this.currentTime.getDate()\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t);\r\n\t\t\t\t\t_this.currentTime.setMonth(month);\r\n\t\t\t\t\tif (options.onChangeMonth && \$.isFunction(options.onChangeMonth)) {\r\n\t\t\t\t\t\toptions.onChangeMonth.call(datetimepicker, _xdsoft_datetime.currentTime, datetimepicker.data('input'));\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdatetimepicker.trigger('xchange.xdsoft');\r\n\t\t\t\t\treturn month;\r\n\t\t\t\t};\r\n\r\n\t\t\t\t_this.getWeekOfYear = function (datetime) {\r\n\t\t\t\t\tvar onejan = new Date(datetime.getFullYear(), 0, 1);\r\n\t\t\t\t\treturn Math.ceil((((datetime - onejan) / 86400000) + onejan.getDay() + 1) / 7);\r\n\t\t\t\t};\r\n\r\n\t\t\t\t_this.strToDateTime = function (sDateTime) {\r\n\t\t\t\t\tvar tmpDate = [], timeOffset, currentTime;\r\n\r\n\t\t\t\t\tif (sDateTime && sDateTime instanceof Date && _this.isValidDate(sDateTime)) {\r\n\t\t\t\t\t\treturn sDateTime;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\ttmpDate = /^(\\+|\\-)(.*)\$/.exec(sDateTime);\r\n\t\t\t\t\tif (tmpDate) {\r\n\t\t\t\t\t\ttmpDate[2] = Date.parseDate(tmpDate[2], options.formatDate);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (tmpDate  && tmpDate[2]) {\r\n\t\t\t\t\t\ttimeOffset = tmpDate[2].getTime() - (tmpDate[2].getTimezoneOffset()) * 60000;\r\n\t\t\t\t\t\tcurrentTime = new Date((_xdsoft_datetime.now()).getTime() + parseInt(tmpDate[1] + '1', 10) * timeOffset);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tcurrentTime = sDateTime ? Date.parseDate(sDateTime, options.format) : _this.now();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (!_this.isValidDate(currentTime)) {\r\n\t\t\t\t\t\tcurrentTime = _this.now();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn currentTime;\r\n\t\t\t\t};\r\n\r\n\t\t\t\t_this.strToDate = function (sDate) {\r\n\t\t\t\t\tif (sDate && sDate instanceof Date && _this.isValidDate(sDate)) {\r\n\t\t\t\t\t\treturn sDate;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar currentTime = sDate ? Date.parseDate(sDate, options.formatDate) : _this.now(true);\r\n\t\t\t\t\tif (!_this.isValidDate(currentTime)) {\r\n\t\t\t\t\t\tcurrentTime = _this.now(true);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn currentTime;\r\n\t\t\t\t};\r\n\r\n\t\t\t\t_this.strtotime = function (sTime) {\r\n\t\t\t\t\tif (sTime && sTime instanceof Date && _this.isValidDate(sTime)) {\r\n\t\t\t\t\t\treturn sTime;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar currentTime = sTime ? Date.parseDate(sTime, options.formatTime) : _this.now(true);\r\n\t\t\t\t\tif (!_this.isValidDate(currentTime)) {\r\n\t\t\t\t\t\tcurrentTime = _this.now(true);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn currentTime;\r\n\t\t\t\t};\r\n\r\n\t\t\t\t_this.str = function () {\r\n\t\t\t\t\treturn _this.currentTime.dateFormat(options.format);\r\n\t\t\t\t};\r\n\t\t\t\t_this.currentTime = this.now();\r\n\t\t\t};\r\n\r\n\t\t\t_xdsoft_datetime = new XDSoft_datetime();\r\n\r\n\t\t\tmounth_picker\r\n\t\t\t\t.find('.xdsoft_today_button')\r\n\t\t\t\t.on('mousedown.xdsoft', function () {\r\n\t\t\t\t\tdatetimepicker.data('changed', true);\r\n\t\t\t\t\t_xdsoft_datetime.setCurrentTime(0);\r\n\t\t\t\t\tdatetimepicker.trigger('afterOpen.xdsoft');\r\n\t\t\t\t}).on('dblclick.xdsoft', function () {\r\n\t\t\t\t\tinput.val(_xdsoft_datetime.str());\r\n\t\t\t\t\tdatetimepicker.trigger('close.xdsoft');\r\n\t\t\t\t});\r\n\t\t\tmounth_picker\r\n\t\t\t\t.find('.xdsoft_prev,.xdsoft_next')\r\n\t\t\t\t.on('mousedown.xdsoft', function () {\r\n\t\t\t\t\tvar \$this = \$(this),\r\n\t\t\t\t\t\ttimer = 0,\r\n\t\t\t\t\t\tstop = false;\r\n\r\n\t\t\t\t\t(function arguments_callee1(v) {\r\n\t\t\t\t\t\tvar month =  _xdsoft_datetime.currentTime.getMonth();\r\n\t\t\t\t\t\tif (\$this.hasClass(options.next)) {\r\n\t\t\t\t\t\t\t_xdsoft_datetime.nextMonth();\r\n\t\t\t\t\t\t} else if (\$this.hasClass(options.prev)) {\r\n\t\t\t\t\t\t\t_xdsoft_datetime.prevMonth();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (options.monthChangeSpinner) {\r\n\t\t\t\t\t\t\tif (!stop) {\r\n\t\t\t\t\t\t\t\ttimer = setTimeout(arguments_callee1, v || 100);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}(500));\r\n\r\n\t\t\t\t\t\$([document.body, window]).on('mouseup.xdsoft', function arguments_callee2() {\r\n\t\t\t\t\t\tclearTimeout(timer);\r\n\t\t\t\t\t\tstop = true;\r\n\t\t\t\t\t\t\$([document.body, window]).off('mouseup.xdsoft', arguments_callee2);\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\r\n\t\t\ttimepicker\r\n\t\t\t\t.find('.xdsoft_prev,.xdsoft_next')\r\n\t\t\t\t.on('mousedown.xdsoft', function () {\r\n\t\t\t\t\tvar \$this = \$(this),\r\n\t\t\t\t\t\ttimer = 0,\r\n\t\t\t\t\t\tstop = false,\r\n\t\t\t\t\t\tperiod = 110;\r\n\t\t\t\t\t(function arguments_callee4(v) {\r\n\t\t\t\t\t\tvar pheight = timeboxparent[0].clientHeight,\r\n\t\t\t\t\t\t\theight = timebox[0].offsetHeight,\r\n\t\t\t\t\t\t\ttop = Math.abs(parseInt(timebox.css('marginTop'), 10));\r\n\t\t\t\t\t\tif (\$this.hasClass(options.next) && (height - pheight) - options.timeHeightInTimePicker >= top) {\r\n\t\t\t\t\t\t\ttimebox.css('marginTop', '-' + (top + options.timeHeightInTimePicker) + 'px');\r\n\t\t\t\t\t\t} else if (\$this.hasClass(options.prev) && top - options.timeHeightInTimePicker >= 0) {\r\n\t\t\t\t\t\t\ttimebox.css('marginTop', '-' + (top - options.timeHeightInTimePicker) + 'px');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\ttimeboxparent.trigger('scroll_element.xdsoft_scroller', [Math.abs(parseInt(timebox.css('marginTop'), 10) / (height - pheight))]);\r\n\t\t\t\t\t\tperiod = (period > 10) ? 10 : period - 10;\r\n\t\t\t\t\t\tif (!stop) {\r\n\t\t\t\t\t\t\ttimer = setTimeout(arguments_callee4, v || period);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}(500));\r\n\t\t\t\t\t\$([document.body, window]).on('mouseup.xdsoft', function arguments_callee5() {\r\n\t\t\t\t\t\tclearTimeout(timer);\r\n\t\t\t\t\t\tstop = true;\r\n\t\t\t\t\t\t\$([document.body, window])\r\n\t\t\t\t\t\t\t.off('mouseup.xdsoft', arguments_callee5);\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\r\n\t\t\txchangeTimer = 0;\r\n\t\t\t// base handler - generating a calendar and timepicker\r\n\t\t\tdatetimepicker\r\n\t\t\t\t.on('xchange.xdsoft', function (event) {\r\n\t\t\t\t\tclearTimeout(xchangeTimer);\r\n\t\t\t\t\txchangeTimer = setTimeout(function () {\r\n\t\t\t\t\t\tvar table =\t'',\r\n\t\t\t\t\t\t\tstart = new Date(_xdsoft_datetime.currentTime.getFullYear(), _xdsoft_datetime.currentTime.getMonth(), 1, 12, 0, 0),\r\n\t\t\t\t\t\t\ti = 0,\r\n\t\t\t\t\t\t\tj,\r\n\t\t\t\t\t\t\ttoday = _xdsoft_datetime.now(),\r\n\t\t\t\t\t\t\tmaxDate = false,\r\n\t\t\t\t\t\t\tminDate = false,\r\n\t\t\t\t\t\t\td,\r\n\t\t\t\t\t\t\ty,\r\n\t\t\t\t\t\t\tm,\r\n\t\t\t\t\t\t\tw,\r\n\t\t\t\t\t\t\tclasses = [],\r\n\t\t\t\t\t\t\tcustomDateSettings,\r\n\t\t\t\t\t\t\tnewRow = true,\r\n\t\t\t\t\t\t\ttime = '',\r\n\t\t\t\t\t\t\th = '',\r\n\t\t\t\t\t\t\tline_time;\r\n\r\n\t\t\t\t\t\twhile (start.getDay() !== options.dayOfWeekStart) {\r\n\t\t\t\t\t\t\tstart.setDate(start.getDate() - 1);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\ttable += '<table><thead><tr>';\r\n\r\n\t\t\t\t\t\tif (options.weeks) {\r\n\t\t\t\t\t\t\ttable += '<th></th>';\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tfor (j = 0; j < 7; j += 1) {\r\n\t\t\t\t\t\t\ttable += '<th>' + options.i18n[options.lang].dayOfWeek[(j + options.dayOfWeekStart) % 7] + '</th>';\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\ttable += '</tr></thead>';\r\n\t\t\t\t\t\ttable += '<tbody>';\r\n\r\n\t\t\t\t\t\tif (options.maxDate !== false) {\r\n\t\t\t\t\t\t\tmaxDate = _xdsoft_datetime.strToDate(options.maxDate);\r\n\t\t\t\t\t\t\tmaxDate = new Date(maxDate.getFullYear(), maxDate.getMonth(), maxDate.getDate(), 23, 59, 59, 999);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (options.minDate !== false) {\r\n\t\t\t\t\t\t\tminDate = _xdsoft_datetime.strToDate(options.minDate);\r\n\t\t\t\t\t\t\tminDate = new Date(minDate.getFullYear(), minDate.getMonth(), minDate.getDate());\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\twhile (i < _xdsoft_datetime.currentTime.countDaysInMonth() || start.getDay() !== options.dayOfWeekStart || _xdsoft_datetime.currentTime.getMonth() === start.getMonth()) {\r\n\t\t\t\t\t\t\tclasses = [];\r\n\t\t\t\t\t\t\ti += 1;\r\n\r\n\t\t\t\t\t\t\td = start.getDate();\r\n\t\t\t\t\t\t\ty = start.getFullYear();\r\n\t\t\t\t\t\t\tm = start.getMonth();\r\n\t\t\t\t\t\t\tw = _xdsoft_datetime.getWeekOfYear(start);\r\n\r\n\t\t\t\t\t\t\tclasses.push('xdsoft_date');\r\n\r\n\t\t\t\t\t\t\tif (options.beforeShowDay && \$.isFunction(options.beforeShowDay.call)) {\r\n\t\t\t\t\t\t\t\tcustomDateSettings = options.beforeShowDay.call(datetimepicker, start);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tcustomDateSettings = null;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif ((maxDate !== false && start > maxDate) || (minDate !== false && start < minDate) || (customDateSettings && customDateSettings[0] === false)) {\r\n\t\t\t\t\t\t\t\tclasses.push('xdsoft_disabled');\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif (customDateSettings && customDateSettings[1] !== \"\") {\r\n\t\t\t\t\t\t\t\tclasses.push(customDateSettings[1]);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif (_xdsoft_datetime.currentTime.getMonth() !== m) {\r\n\t\t\t\t\t\t\t\tclasses.push('xdsoft_other_month');\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif ((options.defaultSelect || datetimepicker.data('changed')) && _xdsoft_datetime.currentTime.dateFormat(options.formatDate) === start.dateFormat(options.formatDate)) {\r\n\t\t\t\t\t\t\t\tclasses.push('xdsoft_current');\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif (today.dateFormat(options.formatDate) === start.dateFormat(options.formatDate)) {\r\n\t\t\t\t\t\t\t\tclasses.push('xdsoft_today');\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif (start.getDay() === 0 || start.getDay() === 6 || options.weekends.indexOf(start.dateFormat(options.formatDate)) === -1) {\r\n\t\t\t\t\t\t\t\tclasses.push('xdsoft_weekend');\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif (options.beforeShowDay && \$.isFunction(options.beforeShowDay)) {\r\n\t\t\t\t\t\t\t\tclasses.push(options.beforeShowDay(start));\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif (newRow) {\r\n\t\t\t\t\t\t\t\ttable += '<tr>';\r\n\t\t\t\t\t\t\t\tnewRow = false;\r\n\t\t\t\t\t\t\t\tif (options.weeks) {\r\n\t\t\t\t\t\t\t\t\ttable += '<th>' + w + '</th>';\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\ttable += '<td data-date=\"' + d + '\" data-month=\"' + m + '\" data-year=\"' + y + '\"' + ' class=\"xdsoft_date xdsoft_day_of_week' + start.getDay() + ' ' + classes.join(' ') + '\">' +\r\n\t\t\t\t\t\t\t\t\t\t'<div>' + d + '</div>' +\r\n\t\t\t\t\t\t\t\t\t'</td>';\r\n\r\n\t\t\t\t\t\t\tif (start.getDay() === options.dayOfWeekStartPrev) {\r\n\t\t\t\t\t\t\t\ttable += '</tr>';\r\n\t\t\t\t\t\t\t\tnewRow = true;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tstart.setDate(d + 1);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\ttable += '</tbody></table>';\r\n\r\n\t\t\t\t\t\tcalendar.html(table);\r\n\r\n\t\t\t\t\t\tmounth_picker.find('.xdsoft_label span').eq(0).text(options.i18n[options.lang].months[_xdsoft_datetime.currentTime.getMonth()]);\r\n\t\t\t\t\t\tmounth_picker.find('.xdsoft_label span').eq(1).text(_xdsoft_datetime.currentTime.getFullYear());\r\n\r\n\t\t\t\t\t\t// generate timebox\r\n\t\t\t\t\t\ttime = '';\r\n\t\t\t\t\t\th = '';\r\n\t\t\t\t\t\tm = '';\r\n\t\t\t\t\t\tline_time = function line_time(h, m) {\r\n\t\t\t\t\t\t\tvar now = _xdsoft_datetime.now();\r\n\t\t\t\t\t\t\tnow.setHours(h);\r\n\t\t\t\t\t\t\th = parseInt(now.getHours(), 10);\r\n\t\t\t\t\t\t\tnow.setMinutes(m);\r\n\t\t\t\t\t\t\tm = parseInt(now.getMinutes(), 10);\r\n\r\n\t\t\t\t\t\t\tclasses = [];\r\n\t\t\t\t\t\t\tif ((options.maxTime !== false && _xdsoft_datetime.strtotime(options.maxTime).getTime() < now.getTime()) || (options.minTime !== false && _xdsoft_datetime.strtotime(options.minTime).getTime() > now.getTime())) {\r\n\t\t\t\t\t\t\t\tclasses.push('xdsoft_disabled');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif ((options.initTime || options.defaultSelect || datetimepicker.data('changed')) && parseInt(_xdsoft_datetime.currentTime.getHours(), 10) === parseInt(h, 10) && (options.step > 59 || Math[options.roundTime](_xdsoft_datetime.currentTime.getMinutes() / options.step) * options.step === parseInt(m, 10))) {\r\n\t\t\t\t\t\t\t\tif (options.defaultSelect || datetimepicker.data('changed')) {\r\n\t\t\t\t\t\t\t\t\tclasses.push('xdsoft_current');\r\n\t\t\t\t\t\t\t\t} else if (options.initTime) {\r\n\t\t\t\t\t\t\t\t\tclasses.push('xdsoft_init_time');\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (parseInt(today.getHours(), 10) === parseInt(h, 10) && parseInt(today.getMinutes(), 10) === parseInt(m, 10)) {\r\n\t\t\t\t\t\t\t\tclasses.push('xdsoft_today');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\ttime += '<div class=\"xdsoft_time ' + classes.join(' ') + '\" data-hour=\"' + h + '\" data-minute=\"' + m + '\">' + now.dateFormat(options.formatTime) + '</div>';\r\n\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\tif (!options.allowTimes || !\$.isArray(options.allowTimes) || !options.allowTimes.length) {\r\n\t\t\t\t\t\t\tfor (i = 0, j = 0; i < (options.hours12 ? 12 : 24); i += 1) {\r\n\t\t\t\t\t\t\t\tfor (j = 0; j < 60; j += options.step) {\r\n\t\t\t\t\t\t\t\t\th = (i < 10 ? '0' : '') + i;\r\n\t\t\t\t\t\t\t\t\tm = (j < 10 ? '0' : '') + j;\r\n\t\t\t\t\t\t\t\t\tline_time(h, m);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tfor (i = 0; i < options.allowTimes.length; i += 1) {\r\n\t\t\t\t\t\t\t\th = _xdsoft_datetime.strtotime(options.allowTimes[i]).getHours();\r\n\t\t\t\t\t\t\t\tm = _xdsoft_datetime.strtotime(options.allowTimes[i]).getMinutes();\r\n\t\t\t\t\t\t\t\tline_time(h, m);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\ttimebox.html(time);\r\n\r\n\t\t\t\t\t\topt = '';\r\n\t\t\t\t\t\ti = 0;\r\n\r\n\t\t\t\t\t\tfor (i = parseInt(options.yearStart, 10) + options.yearOffset; i <= parseInt(options.yearEnd, 10) + options.yearOffset; i += 1) {\r\n\t\t\t\t\t\t\topt += '<div class=\"xdsoft_option ' + (_xdsoft_datetime.currentTime.getFullYear() === i ? 'xdsoft_current' : '') + '\" data-value=\"' + i + '\">' + i + '</div>';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tyearselect.children().eq(0)\r\n\t\t\t\t\t\t\t\t\t\t\t\t.html(opt);\r\n\r\n\t\t\t\t\t\tfor (i = 0, opt = ''; i <= 11; i += 1) {\r\n\t\t\t\t\t\t\topt += '<div class=\"xdsoft_option ' + (_xdsoft_datetime.currentTime.getMonth() === i ? 'xdsoft_current' : '') + '\" data-value=\"' + i + '\">' + options.i18n[options.lang].months[i] + '</div>';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tmonthselect.children().eq(0).html(opt);\r\n\t\t\t\t\t\t\$(datetimepicker)\r\n\t\t\t\t\t\t\t.trigger('generate.xdsoft');\r\n\t\t\t\t\t}, 10);\r\n\t\t\t\t\tevent.stopPropagation();\r\n\t\t\t\t})\r\n\t\t\t\t.on('afterOpen.xdsoft', function () {\r\n\t\t\t\t\tif (options.timepicker) {\r\n\t\t\t\t\t\tvar classType, pheight, height, top;\r\n\t\t\t\t\t\tif (timebox.find('.xdsoft_current').length) {\r\n\t\t\t\t\t\t\tclassType = '.xdsoft_current';\r\n\t\t\t\t\t\t} else if (timebox.find('.xdsoft_init_time').length) {\r\n\t\t\t\t\t\t\tclassType = '.xdsoft_init_time';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (classType) {\r\n\t\t\t\t\t\t\tpheight = timeboxparent[0].clientHeight;\r\n\t\t\t\t\t\t\theight = timebox[0].offsetHeight;\r\n\t\t\t\t\t\t\ttop = timebox.find(classType).index() * options.timeHeightInTimePicker + 1;\r\n\t\t\t\t\t\t\tif ((height - pheight) < top) {\r\n\t\t\t\t\t\t\t\ttop = height - pheight;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\ttimeboxparent.trigger('scroll_element.xdsoft_scroller', [parseInt(top, 10) / (height - pheight)]);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\ttimeboxparent.trigger('scroll_element.xdsoft_scroller', [0]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\ttimerclick = 0;\r\n\t\t\tcalendar\r\n\t\t\t\t.on('click.xdsoft', 'td', function (xdevent) {\r\n\t\t\t\t\txdevent.stopPropagation();  // Prevents closing of Pop-ups, Modals and Flyouts in Bootstrap\r\n\t\t\t\t\ttimerclick += 1;\r\n\t\t\t\t\tvar \$this = \$(this),\r\n\t\t\t\t\t\tcurrentTime = _xdsoft_datetime.currentTime;\r\n\r\n\t\t\t\t\tif (currentTime === undefined || currentTime === null) {\r\n\t\t\t\t\t\t_xdsoft_datetime.currentTime = _xdsoft_datetime.now();\r\n\t\t\t\t\t\tcurrentTime = _xdsoft_datetime.currentTime;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (\$this.hasClass('xdsoft_disabled')) {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tcurrentTime.setDate(1);\r\n\t\t\t\t\tcurrentTime.setFullYear(\$this.data('year'));\r\n\t\t\t\t\tcurrentTime.setMonth(\$this.data('month'));\r\n\t\t\t\t\tcurrentTime.setDate(\$this.data('date'));\r\n\r\n\t\t\t\t\tdatetimepicker.trigger('select.xdsoft', [currentTime]);\r\n\r\n\t\t\t\t\tinput.val(_xdsoft_datetime.str());\r\n\t\t\t\t\tif ((timerclick > 1 || (options.closeOnDateSelect === true || (options.closeOnDateSelect === 0 && !options.timepicker))) && !options.inline) {\r\n\t\t\t\t\t\tdatetimepicker.trigger('close.xdsoft');\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (options.onSelectDate &&\t\$.isFunction(options.onSelectDate)) {\r\n\t\t\t\t\t\toptions.onSelectDate.call(datetimepicker, _xdsoft_datetime.currentTime, datetimepicker.data('input'), xdevent);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tdatetimepicker.data('changed', true);\r\n\t\t\t\t\tdatetimepicker.trigger('xchange.xdsoft');\r\n\t\t\t\t\tdatetimepicker.trigger('changedatetime.xdsoft');\r\n\t\t\t\t\tsetTimeout(function () {\r\n\t\t\t\t\t\ttimerclick = 0;\r\n\t\t\t\t\t}, 200);\r\n\t\t\t\t});\r\n\r\n\t\t\ttimebox\r\n\t\t\t\t.on('click.xdsoft', 'div', function (xdevent) {\r\n\t\t\t\t\txdevent.stopPropagation();\r\n\t\t\t\t\tvar \$this = \$(this),\r\n\t\t\t\t\t\tcurrentTime = _xdsoft_datetime.currentTime;\r\n\r\n\t\t\t\t\tif (currentTime === undefined || currentTime === null) {\r\n\t\t\t\t\t\t_xdsoft_datetime.currentTime = _xdsoft_datetime.now();\r\n\t\t\t\t\t\tcurrentTime = _xdsoft_datetime.currentTime;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (\$this.hasClass('xdsoft_disabled')) {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcurrentTime.setHours(\$this.data('hour'));\r\n\t\t\t\t\tcurrentTime.setMinutes(\$this.data('minute'));\r\n\t\t\t\t\tdatetimepicker.trigger('select.xdsoft', [currentTime]);\r\n\r\n\t\t\t\t\tdatetimepicker.data('input').val(_xdsoft_datetime.str());\r\n\t\t\t\t\tif (!options.inline) {\r\n\t\t\t\t\t\tdatetimepicker.trigger('close.xdsoft');\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (options.onSelectTime && \$.isFunction(options.onSelectTime)) {\r\n\t\t\t\t\t\toptions.onSelectTime.call(datetimepicker, _xdsoft_datetime.currentTime, datetimepicker.data('input'), xdevent);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdatetimepicker.data('changed', true);\r\n\t\t\t\t\tdatetimepicker.trigger('xchange.xdsoft');\r\n\t\t\t\t\tdatetimepicker.trigger('changedatetime.xdsoft');\r\n\t\t\t\t});\r\n\r\n\r\n\t\t\tdatepicker\r\n\t\t\t\t.on('mousewheel.xdsoft', function (event) {\r\n\t\t\t\t\tif (!options.scrollMonth) {\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (event.deltaY < 0) {\r\n\t\t\t\t\t\t_xdsoft_datetime.nextMonth();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t_xdsoft_datetime.prevMonth();\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t});\r\n\r\n\t\t\tinput\r\n\t\t\t\t.on('mousewheel.xdsoft', function (event) {\r\n\t\t\t\t\tif (!options.scrollInput) {\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!options.datepicker && options.timepicker) {\r\n\t\t\t\t\t\tcurrent_time_index = timebox.find('.xdsoft_current').length ? timebox.find('.xdsoft_current').eq(0).index() : 0;\r\n\t\t\t\t\t\tif (current_time_index + event.deltaY >= 0 && current_time_index + event.deltaY < timebox.children().length) {\r\n\t\t\t\t\t\t\tcurrent_time_index += event.deltaY;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (timebox.children().eq(current_time_index).length) {\r\n\t\t\t\t\t\t\ttimebox.children().eq(current_time_index).trigger('mousedown');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (options.datepicker && !options.timepicker) {\r\n\t\t\t\t\t\tdatepicker.trigger(event, [event.deltaY, event.deltaX, event.deltaY]);\r\n\t\t\t\t\t\tif (input.val) {\r\n\t\t\t\t\t\t\tinput.val(_xdsoft_datetime.str());\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tdatetimepicker.trigger('changedatetime.xdsoft');\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\tdatetimepicker\r\n\t\t\t\t.on('changedatetime.xdsoft', function (event) {\r\n\t\t\t\t\tif (options.onChangeDateTime && \$.isFunction(options.onChangeDateTime)) {\r\n\t\t\t\t\t\tvar \$input = datetimepicker.data('input');\r\n\t\t\t\t\t\toptions.onChangeDateTime.call(datetimepicker, _xdsoft_datetime.currentTime, \$input, event);\r\n\t\t\t\t\t\tdelete options.value;\r\n\t\t\t\t\t\t\$input.trigger('change');\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.on('generate.xdsoft', function () {\r\n\t\t\t\t\tif (options.onGenerate && \$.isFunction(options.onGenerate)) {\r\n\t\t\t\t\t\toptions.onGenerate.call(datetimepicker, _xdsoft_datetime.currentTime, datetimepicker.data('input'));\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (triggerAfterOpen) {\r\n\t\t\t\t\t\tdatetimepicker.trigger('afterOpen.xdsoft');\r\n\t\t\t\t\t\ttriggerAfterOpen = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.on('click.xdsoft', function (xdevent) {\r\n\t\t\t\t\txdevent.stopPropagation();\r\n\t\t\t\t});\r\n\r\n\t\t\tcurrent_time_index = 0;\r\n\r\n\t\t\tsetPos = function () {\r\n\t\t\t\tvar offset = datetimepicker.data('input').offset(), top = offset.top + datetimepicker.data('input')[0].offsetHeight - 1, left = offset.left, position = \"absolute\";\r\n\t\t\t\tif (options.fixed) {\r\n\t\t\t\t\ttop -= \$(window).scrollTop();\r\n\t\t\t\t\tleft -= \$(window).scrollLeft();\r\n\t\t\t\t\tposition = \"fixed\";\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (top + datetimepicker[0].offsetHeight > \$(window).height() + \$(window).scrollTop()) {\r\n\t\t\t\t\t\ttop = offset.top - datetimepicker[0].offsetHeight + 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (top < 0) {\r\n\t\t\t\t\t\ttop = 0;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (left + datetimepicker[0].offsetWidth > \$(window).width()) {\r\n\t\t\t\t\t\tleft = \$(window).width() - datetimepicker[0].offsetWidth;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tdatetimepicker.css({\r\n\t\t\t\t\tleft: left,\r\n\t\t\t\t\ttop: top,\r\n\t\t\t\t\tposition: position\r\n\t\t\t\t});\r\n\t\t\t};\r\n\t\t\tdatetimepicker\r\n\t\t\t\t.on('open.xdsoft', function (event) {\r\n\t\t\t\t\tvar onShow = true;\r\n\t\t\t\t\tif (options.onShow && \$.isFunction(options.onShow)) {\r\n\t\t\t\t\t\tonShow = options.onShow.call(datetimepicker, _xdsoft_datetime.currentTime, datetimepicker.data('input'), event);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (onShow !== false) {\r\n\t\t\t\t\t\tdatetimepicker.show();\r\n\t\t\t\t\t\tsetPos();\r\n\t\t\t\t\t\t\$(window)\r\n\t\t\t\t\t\t\t.off('resize.xdsoft', setPos)\r\n\t\t\t\t\t\t\t.on('resize.xdsoft', setPos);\r\n\r\n\t\t\t\t\t\tif (options.closeOnWithoutClick) {\r\n\t\t\t\t\t\t\t\$([document.body, window]).on('mousedown.xdsoft', function arguments_callee6() {\r\n\t\t\t\t\t\t\t\tdatetimepicker.trigger('close.xdsoft');\r\n\t\t\t\t\t\t\t\t\$([document.body, window]).off('mousedown.xdsoft', arguments_callee6);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.on('close.xdsoft', function (event) {\r\n\t\t\t\t\tvar onClose = true;\r\n\t\t\t\t\tmounth_picker\r\n\t\t\t\t\t\t.find('.xdsoft_month,.xdsoft_year')\r\n\t\t\t\t\t\t\t.find('.xdsoft_select')\r\n\t\t\t\t\t\t\t\t.hide();\r\n\t\t\t\t\tif (options.onClose && \$.isFunction(options.onClose)) {\r\n\t\t\t\t\t\tonClose = options.onClose.call(datetimepicker, _xdsoft_datetime.currentTime, datetimepicker.data('input'), event);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (onClose !== false && !options.opened && !options.inline) {\r\n\t\t\t\t\t\tdatetimepicker.hide();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tevent.stopPropagation();\r\n\t\t\t\t})\r\n\t\t\t\t.data('input', input);\r\n\r\n\t\t\ttimer = 0;\r\n\t\t\ttimer1 = 0;\r\n\r\n\t\t\tdatetimepicker.data('xdsoft_datetime', _xdsoft_datetime);\r\n\t\t\tdatetimepicker.setOptions(options);\r\n\r\n\t\t\tfunction getCurrentValue() {\r\n\r\n\t\t\t\tvar ct = false, time;\r\n\r\n\t\t\t\tif (options.startDate) {\r\n\t\t\t\t\tct = _xdsoft_datetime.strToDate(options.startDate);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tct = options.value || ((input && input.val && input.val()) ? input.val() : '');\r\n\t\t\t\t\tif (ct) {\r\n\t\t\t\t\t\tct = _xdsoft_datetime.strToDateTime(ct);\r\n\t\t\t\t\t} else if (options.defaultDate) {\r\n\t\t\t\t\t\tct = _xdsoft_datetime.strToDate(options.defaultDate);\r\n\t\t\t\t\t\tif (options.defaultTime) {\r\n\t\t\t\t\t\t\ttime = _xdsoft_datetime.strtotime(options.defaultTime);\r\n\t\t\t\t\t\t\tct.setHours(time.getHours());\r\n\t\t\t\t\t\t\tct.setMinutes(time.getMinutes());\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (ct && _xdsoft_datetime.isValidDate(ct)) {\r\n\t\t\t\t\tdatetimepicker.data('changed', true);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tct = '';\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn ct || 0;\r\n\t\t\t}\r\n\r\n\t\t\t_xdsoft_datetime.setCurrentTime(getCurrentValue());\r\n\r\n\t\t\tinput\r\n\t\t\t\t.data('xdsoft_datetimepicker', datetimepicker)\r\n\t\t\t\t.on('open.xdsoft focusin.xdsoft mousedown.xdsoft', function (event) {\r\n\t\t\t\t\tif (input.is(':disabled') || input.is(':hidden') || !input.is(':visible') || (input.data('xdsoft_datetimepicker').is(':visible') && options.closeOnInputClick)) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tclearTimeout(timer);\r\n\t\t\t\t\ttimer = setTimeout(function () {\r\n\t\t\t\t\t\tif (input.is(':disabled') || input.is(':hidden') || !input.is(':visible')) {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\ttriggerAfterOpen = true;\r\n\t\t\t\t\t\t_xdsoft_datetime.setCurrentTime(getCurrentValue());\r\n\r\n\t\t\t\t\t\tdatetimepicker.trigger('open.xdsoft');\r\n\t\t\t\t\t}, 100);\r\n\t\t\t\t})\r\n\t\t\t\t.on('keydown.xdsoft', function (event) {\r\n\t\t\t\t\tvar val = this.value, elementSelector,\r\n\t\t\t\t\t\tkey = event.which;\r\n\t\t\t\t\tif ([ENTER].indexOf(key) !== -1) {\r\n\t\t\t\t\t\telementSelector = \$(\"input:visible,textarea:visible\");\r\n\t\t\t\t\t\tdatetimepicker.trigger('close.xdsoft');\r\n\t\t\t\t\t\telementSelector.eq(elementSelector.index(this) + 1).focus();\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ([TAB].indexOf(key) !== -1) {\r\n\t\t\t\t\t\tdatetimepicker.trigger('close.xdsoft');\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t};\r\n\t\tdestroyDateTimePicker = function (input) {\r\n\t\t\tvar datetimepicker = input.data('xdsoft_datetimepicker');\r\n\t\t\tif (datetimepicker) {\r\n\t\t\t\tdatetimepicker.data('xdsoft_datetime', null);\r\n\t\t\t\tdatetimepicker.remove();\r\n\t\t\t\tinput\r\n\t\t\t\t\t.data('xdsoft_datetimepicker', null)\r\n\t\t\t\t\t.off('.xdsoft');\r\n\t\t\t\t\$(window).off('resize.xdsoft');\r\n\t\t\t\t\$([window, document.body]).off('mousedown.xdsoft');\r\n\t\t\t\tif (input.unmousewheel) {\r\n\t\t\t\t\tinput.unmousewheel();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t\t\$(document)\r\n\t\t\t.off('keydown.xdsoftctrl keyup.xdsoftctrl')\r\n\t\t\t.on('keydown.xdsoftctrl', function (e) {\r\n\t\t\t\tif (e.keyCode === CTRLKEY) {\r\n\t\t\t\t\tctrlDown = true;\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.on('keyup.xdsoftctrl', function (e) {\r\n\t\t\t\tif (e.keyCode === CTRLKEY) {\r\n\t\t\t\t\tctrlDown = false;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\treturn this.each(function () {\r\n\t\t\tvar datetimepicker = \$(this).data('xdsoft_datetimepicker');\r\n\t\t\tif (datetimepicker) {\r\n\t\t\t\tif (\$.type(opt) === 'string') {\r\n\t\t\t\t\tswitch (opt) {\r\n\t\t\t\t\tcase 'show':\r\n\t\t\t\t\t\t\$(this).select().focus();\r\n\t\t\t\t\t\tdatetimepicker.trigger('open.xdsoft');\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'hide':\r\n\t\t\t\t\t\tdatetimepicker.trigger('close.xdsoft');\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'destroy':\r\n\t\t\t\t\t\tdestroyDateTimePicker(\$(this));\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'reset':\r\n\t\t\t\t\t\tthis.value = this.defaultValue;\r\n\t\t\t\t\t\tif (!this.value || !datetimepicker.data('xdsoft_datetime').isValidDate(Date.parseDate(this.value, options.format))) {\r\n\t\t\t\t\t\t\tdatetimepicker.data('changed', false);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tdatetimepicker.data('xdsoft_datetime').setCurrentTime(this.value);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdatetimepicker\r\n\t\t\t\t\t\t.setOptions(opt);\r\n\t\t\t\t}\r\n\t\t\t\treturn 0;\r\n\t\t\t}\r\n\t\t\tif (\$.type(opt) !== 'string') {\r\n\t\t\t\tif (!options.lazyInit || options.open || options.inline) {\r\n\t\t\t\t\tcreateDateTimePicker(\$(this));\r\n\t\t\t\t} else {\r\n\t\t\t\t\tlazyInit(\$(this));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\t\$.fn.datetimepicker.defaults = default_options;\r\n}(jQuery));\r\n(function () {\r\n\r\n/*! Copyright (c) 2013 Brandon Aaron (http://brandon.aaron.sh)\r\n * Licensed under the MIT License (LICENSE.txt).\r\n *\r\n * Version: 3.1.12\r\n *\r\n * Requires: jQuery 1.2.2+\r\n */\r\n!function(a){\"function\"==typeof define&&define.amd?define([\"jquery\"],a):\"object\"==typeof exports?module.exports=a:a(jQuery)}(function(a){function b(b){var g=b||window.event,h=i.call(arguments,1),j=0,l=0,m=0,n=0,o=0,p=0;if(b=a.event.fix(g),b.type=\"mousewheel\",\"detail\"in g&&(m=-1*g.detail),\"wheelDelta\"in g&&(m=g.wheelDelta),\"wheelDeltaY\"in g&&(m=g.wheelDeltaY),\"wheelDeltaX\"in g&&(l=-1*g.wheelDeltaX),\"axis\"in g&&g.axis===g.HORIZONTAL_AXIS&&(l=-1*m,m=0),j=0===m?l:m,\"deltaY\"in g&&(m=-1*g.deltaY,j=m),\"deltaX\"in g&&(l=g.deltaX,0===m&&(j=-1*l)),0!==m||0!==l){if(1===g.deltaMode){var q=a.data(this,\"mousewheel-line-height\");j*=q,m*=q,l*=q}else if(2===g.deltaMode){var r=a.data(this,\"mousewheel-page-height\");j*=r,m*=r,l*=r}if(n=Math.max(Math.abs(m),Math.abs(l)),(!f||f>n)&&(f=n,d(g,n)&&(f/=40)),d(g,n)&&(j/=40,l/=40,m/=40),j=Math[j>=1?\"floor\":\"ceil\"](j/f),l=Math[l>=1?\"floor\":\"ceil\"](l/f),m=Math[m>=1?\"floor\":\"ceil\"](m/f),k.settings.normalizeOffset&&this.getBoundingClientRect){var s=this.getBoundingClientRect();o=b.clientX-s.left,p=b.clientY-s.top}return b.deltaX=l,b.deltaY=m,b.deltaFactor=f,b.offsetX=o,b.offsetY=p,b.deltaMode=0,h.unshift(b,j,l,m),e&&clearTimeout(e),e=setTimeout(c,200),(a.event.dispatch||a.event.handle).apply(this,h)}}function c(){f=null}function d(a,b){return k.settings.adjustOldDeltas&&\"mousewheel\"===a.type&&b%120===0}var e,f,g=[\"wheel\",\"mousewheel\",\"DOMMouseScroll\",\"MozMousePixelScroll\"],h=\"onwheel\"in document||document.documentMode>=9?[\"wheel\"]:[\"mousewheel\",\"DomMouseScroll\",\"MozMousePixelScroll\"],i=Array.prototype.slice;if(a.event.fixHooks)for(var j=g.length;j;)a.event.fixHooks[g[--j]]=a.event.mouseHooks;var k=a.event.special.mousewheel={version:\"3.1.12\",setup:function(){if(this.addEventListener)for(var c=h.length;c;)this.addEventListener(h[--c],b,!1);else this.onmousewheel=b;a.data(this,\"mousewheel-line-height\",k.getLineHeight(this)),a.data(this,\"mousewheel-page-height\",k.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var c=h.length;c;)this.removeEventListener(h[--c],b,!1);else this.onmousewheel=null;a.removeData(this,\"mousewheel-line-height\"),a.removeData(this,\"mousewheel-page-height\")},getLineHeight:function(b){var c=a(b),d=c[\"offsetParent\"in a.fn?\"offsetParent\":\"parent\"]();return d.length||(d=a(\"body\")),parseInt(d.css(\"fontSize\"),10)||parseInt(c.css(\"fontSize\"),10)||16},getPageHeight:function(b){return a(b).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};a.fn.extend({mousewheel:function(a){return a?this.bind(\"mousewheel\",a):this.trigger(\"mousewheel\")},unmousewheel:function(a){return this.unbind(\"mousewheel\",a)}})});\r\n\r\n// Parse and Format Library\r\n//http://www.xaprb.com/blog/2005/12/12/javascript-closures-for-runtime-efficiency/\r\n/*\r\n * Copyright (C) 2004 Baron Schwartz <baron at sequent dot org>\r\n *\r\n * This program is free software; you can redistribute it and/or modify it\r\n * under the terms of the GNU Lesser General Public License as published by the\r\n * Free Software Foundation, version 2.1.\r\n *\r\n * This program is distributed in the hope that it will be useful, but WITHOUT\r\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS\r\n * FOR A PARTICULAR PURPOSE.  See the GNU Lesser General Public License for more\r\n * details.\r\n */\r\nDate.parseFunctions={count:0};Date.parseRegexes=[];Date.formatFunctions={count:0};Date.prototype.dateFormat=function(b){if(b==\"unixtime\"){return parseInt(this.getTime()/1000);}if(Date.formatFunctions[b]==null){Date.createNewFormat(b);}var a=Date.formatFunctions[b];return this[a]();};Date.createNewFormat=function(format){var funcName=\"format\"+Date.formatFunctions.count++;Date.formatFunctions[format]=funcName;var code=\"Date.prototype.\"+funcName+\" = function() {return \";var special=false;var ch=\"\";for(var i=0;i<format.length;++i){ch=format.charAt(i);if(!special&&ch==\"\\\\\"){special=true;}else{if(special){special=false;code+=\"'\"+String.escape(ch)+\"' + \";}else{code+=Date.getFormatCode(ch);}}}eval(code.substring(0,code.length-3)+\";}\");};Date.getFormatCode=function(a){switch(a){case\"d\":return\"String.leftPad(this.getDate(), 2, '0') + \";case\"D\":return\"Date.dayNames[this.getDay()].substring(0, 3) + \";case\"j\":return\"this.getDate() + \";case\"l\":return\"Date.dayNames[this.getDay()] + \";case\"S\":return\"this.getSuffix() + \";case\"w\":return\"this.getDay() + \";case\"z\":return\"this.getDayOfYear() + \";case\"W\":return\"this.getWeekOfYear() + \";case\"F\":return\"Date.monthNames[this.getMonth()] + \";case\"m\":return\"String.leftPad(this.getMonth() + 1, 2, '0') + \";case\"M\":return\"Date.monthNames[this.getMonth()].substring(0, 3) + \";case\"n\":return\"(this.getMonth() + 1) + \";case\"t\":return\"this.getDaysInMonth() + \";case\"L\":return\"(this.isLeapYear() ? 1 : 0) + \";case\"Y\":return\"this.getFullYear() + \";case\"y\":return\"('' + this.getFullYear()).substring(2, 4) + \";case\"a\":return\"(this.getHours() < 12 ? 'am' : 'pm') + \";case\"A\":return\"(this.getHours() < 12 ? 'AM' : 'PM') + \";case\"g\":return\"((this.getHours() %12) ? this.getHours() % 12 : 12) + \";case\"G\":return\"this.getHours() + \";case\"h\":return\"String.leftPad((this.getHours() %12) ? this.getHours() % 12 : 12, 2, '0') + \";case\"H\":return\"String.leftPad(this.getHours(), 2, '0') + \";case\"i\":return\"String.leftPad(this.getMinutes(), 2, '0') + \";case\"s\":return\"String.leftPad(this.getSeconds(), 2, '0') + \";case\"O\":return\"this.getGMTOffset() + \";case\"T\":return\"this.getTimezone() + \";case\"Z\":return\"(this.getTimezoneOffset() * -60) + \";default:return\"'\"+String.escape(a)+\"' + \";}};Date.parseDate=function(a,c){if(c==\"unixtime\"){return new Date(!isNaN(parseInt(a))?parseInt(a)*1000:0);}if(Date.parseFunctions[c]==null){Date.createParser(c);}var b=Date.parseFunctions[c];return Date[b](a);};Date.createParser=function(format){var funcName=\"parse\"+Date.parseFunctions.count++;var regexNum=Date.parseRegexes.length;var currentGroup=1;Date.parseFunctions[format]=funcName;var code=\"Date.\"+funcName+\" = function(input) {\\nvar y = -1, m = -1, d = -1, h = -1, i = -1, s = -1, z = -1;\\nvar d = new Date();\\ny = d.getFullYear();\\nm = d.getMonth();\\nd = d.getDate();\\nvar results = input.match(Date.parseRegexes[\"+regexNum+\"]);\\nif (results && results.length > 0) {\";var regex=\"\";var special=false;var ch=\"\";for(var i=0;i<format.length;++i){ch=format.charAt(i);if(!special&&ch==\"\\\\\"){special=true;}else{if(special){special=false;regex+=String.escape(ch);}else{obj=Date.formatCodeToRegex(ch,currentGroup);currentGroup+=obj.g;regex+=obj.s;if(obj.g&&obj.c){code+=obj.c;}}}}code+=\"if (y > 0 && z > 0){\\nvar doyDate = new Date(y,0);\\ndoyDate.setDate(z);\\nm = doyDate.getMonth();\\nd = doyDate.getDate();\\n}\";code+=\"if (y > 0 && m >= 0 && d > 0 && h >= 0 && i >= 0 && s >= 0)\\n{return new Date(y, m, d, h, i, s);}\\nelse if (y > 0 && m >= 0 && d > 0 && h >= 0 && i >= 0)\\n{return new Date(y, m, d, h, i);}\\nelse if (y > 0 && m >= 0 && d > 0 && h >= 0)\\n{return new Date(y, m, d, h);}\\nelse if (y > 0 && m >= 0 && d > 0)\\n{return new Date(y, m, d);}\\nelse if (y > 0 && m >= 0)\\n{return new Date(y, m);}\\nelse if (y > 0)\\n{return new Date(y);}\\n}return null;}\";Date.parseRegexes[regexNum]=new RegExp(\"^\"+regex+\"\$\");eval(code);};Date.formatCodeToRegex=function(b,a){switch(b){case\"D\":return{g:0,c:null,s:\"(?:Sun|Mon|Tue|Wed|Thu|Fri|Sat)\"};case\"j\":case\"d\":return{g:1,c:\"d = parseInt(results[\"+a+\"], 10);\\n\",s:\"(\\\\d{1,2})\"};case\"l\":return{g:0,c:null,s:\"(?:\"+Date.dayNames.join(\"|\")+\")\"};case\"S\":return{g:0,c:null,s:\"(?:st|nd|rd|th)\"};case\"w\":return{g:0,c:null,s:\"\\\\d\"};case\"z\":return{g:1,c:\"z = parseInt(results[\"+a+\"], 10);\\n\",s:\"(\\\\d{1,3})\"};case\"W\":return{g:0,c:null,s:\"(?:\\\\d{2})\"};case\"F\":return{g:1,c:\"m = parseInt(Date.monthNumbers[results[\"+a+\"].substring(0, 3)], 10);\\n\",s:\"(\"+Date.monthNames.join(\"|\")+\")\"};case\"M\":return{g:1,c:\"m = parseInt(Date.monthNumbers[results[\"+a+\"]], 10);\\n\",s:\"(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\"};case\"n\":case\"m\":return{g:1,c:\"m = parseInt(results[\"+a+\"], 10) - 1;\\n\",s:\"(\\\\d{1,2})\"};case\"t\":return{g:0,c:null,s:\"\\\\d{1,2}\"};case\"L\":return{g:0,c:null,s:\"(?:1|0)\"};case\"Y\":return{g:1,c:\"y = parseInt(results[\"+a+\"], 10);\\n\",s:\"(\\\\d{4})\"};case\"y\":return{g:1,c:\"var ty = parseInt(results[\"+a+\"], 10);\\ny = ty > Date.y2kYear ? 1900 + ty : 2000 + ty;\\n\",s:\"(\\\\d{1,2})\"};case\"a\":return{g:1,c:\"if (results[\"+a+\"] == 'am') {\\nif (h == 12) { h = 0; }\\n} else { if (h < 12) { h += 12; }}\",s:\"(am|pm)\"};case\"A\":return{g:1,c:\"if (results[\"+a+\"] == 'AM') {\\nif (h == 12) { h = 0; }\\n} else { if (h < 12) { h += 12; }}\",s:\"(AM|PM)\"};case\"g\":case\"G\":case\"h\":case\"H\":return{g:1,c:\"h = parseInt(results[\"+a+\"], 10);\\n\",s:\"(\\\\d{1,2})\"};case\"i\":return{g:1,c:\"i = parseInt(results[\"+a+\"], 10);\\n\",s:\"(\\\\d{2})\"};case\"s\":return{g:1,c:\"s = parseInt(results[\"+a+\"], 10);\\n\",s:\"(\\\\d{2})\"};case\"O\":return{g:0,c:null,s:\"[+-]\\\\d{4}\"};case\"T\":return{g:0,c:null,s:\"[A-Z]{3}\"};case\"Z\":return{g:0,c:null,s:\"[+-]\\\\d{1,5}\"};default:return{g:0,c:null,s:String.escape(b)};}};Date.prototype.getTimezone=function(){return this.toString().replace(/^.*? ([A-Z]{3}) [0-9]{4}.*\$/,\"\$1\").replace(/^.*?\\(([A-Z])[a-z]+ ([A-Z])[a-z]+ ([A-Z])[a-z]+\\)\$/,\"\$1\$2\$3\");};Date.prototype.getGMTOffset=function(){return(this.getTimezoneOffset()>0?\"-\":\"+\")+String.leftPad(Math.floor(Math.abs(this.getTimezoneOffset())/60),2,\"0\")+String.leftPad(Math.abs(this.getTimezoneOffset())%60,2,\"0\");};Date.prototype.getDayOfYear=function(){var a=0;Date.daysInMonth[1]=this.isLeapYear()?29:28;for(var b=0;b<this.getMonth();++b){a+=Date.daysInMonth[b];}return a+this.getDate();};Date.prototype.getWeekOfYear=function(){var b=this.getDayOfYear()+(4-this.getDay());var a=new Date(this.getFullYear(),0,1);var c=(7-a.getDay()+4);return String.leftPad(Math.ceil((b-c)/7)+1,2,\"0\");};Date.prototype.isLeapYear=function(){var a=this.getFullYear();return((a&3)==0&&(a%100||(a%400==0&&a)));};Date.prototype.getFirstDayOfMonth=function(){var a=(this.getDay()-(this.getDate()-1))%7;return(a<0)?(a+7):a;};Date.prototype.getLastDayOfMonth=function(){var a=(this.getDay()+(Date.daysInMonth[this.getMonth()]-this.getDate()))%7;return(a<0)?(a+7):a;};Date.prototype.getDaysInMonth=function(){Date.daysInMonth[1]=this.isLeapYear()?29:28;return Date.daysInMonth[this.getMonth()];};Date.prototype.getSuffix=function(){switch(this.getDate()){case 1:case 21:case 31:return\"st\";case 2:case 22:return\"nd\";case 3:case 23:return\"rd\";default:return\"th\";}};String.escape=function(a){return a.replace(/('|\\\\)/g,\"\\\\\\$1\");};String.leftPad=function(d,b,c){var a=new String(d);if(c==null){c=\" \";}while(a.length<b){a=c+a;}return a;};Date.daysInMonth=[31,28,31,30,31,30,31,31,30,31,30,31];Date.monthNames=[\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"];Date.dayNames=[\"Sunday\",\"Monday\",\"Tuesday\",\"Wednesday\",\"Thursday\",\"Friday\",\"Saturday\"];Date.y2kYear=50;Date.monthNumbers={Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11};Date.patterns={ISO8601LongPattern:\"Y-m-d H:i:s\",ISO8601ShortPattern:\"Y-m-d\",ShortDatePattern:\"n/j/Y\",LongDatePattern:\"l, F d, Y\",FullDateTimePattern:\"l, F d, Y g:i:s A\",MonthDayPattern:\"F d\",ShortTimePattern:\"g:i A\",LongTimePattern:\"g:i:s A\",SortableDateTimePattern:\"Y-m-d\\\\TH:i:s\",UniversalSortableDateTimePattern:\"Y-m-d H:i:sO\",YearMonthPattern:\"F, Y\"};\r\n}());\r\n      
";
    
    file_put_contents("jquery.datetimepicker.js", $DATETIME_JS);
    unset($DATETIME_JS);

    $CLEANUP_PHP = "<?php " . PHP_EOL . "echo \"Attempting to remove files '__generator.php', 'list.php', '__layout.php'.\";" . PHP_EOL . "unlink('__generator.php');" . PHP_EOL . "unlink('list.php');" . PHP_EOL . "unlink('__layout.php');" . PHP_EOL . "echo \"<br>Done. Self-destructing.\";" . PHP_EOL . "unlink('cleanup.php');?>";
    
    file_put_contents("cleanup.php", $CLEANUP_PHP);
    unset($CLEANUP_PHP);
    
    // __globals.php
    $GLOBALS_PHP = "<?php " . PHP_EOL . "function loadScripts() {" . PHP_EOL . "    \$scripts = \"    <link rel='stylesheet' type='text/css' href='https://cdn.datatables.net/tabletools/2.2.4/css/dataTables.tableTools.min.css'>\"" . PHP_EOL . "    . PHP_EOL . \"    <link rel='stylesheet' type='text/css' href='https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css'>\"" . PHP_EOL . "    . PHP_EOL . \"    <link rel='stylesheet' type='text/css' href='https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.11.4/jquery-ui.min.css'>\"" . PHP_EOL . "    . PHP_EOL . \"    <link rel='stylesheet' type='text/css' href='https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.11.4/jquery-ui.structure.min.css'>\"" . PHP_EOL . "    . PHP_EOL . \"    <link rel='stylesheet' type='text/css' href='https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.11.4/jquery-ui.theme.min.css'>\"" . PHP_EOL . "    . PHP_EOL . \"    <link rel='stylesheet' type='text/css' href='//cdn.datatables.net/plug-ins/1.10.7/integration/bootstrap/3/dataTables.bootstrap.css'>\"" . PHP_EOL . "    . PHP_EOL . \"    <link rel='stylesheet' type='text/css' href='jquery.datetimepicker.css'>\"" . PHP_EOL . "    . PHP_EOL . \"    <link rel='stylesheet' type='text/css' href='//cdn.datatables.net/responsive/1.0.6/css/dataTables.responsive.css'>\"" . PHP_EOL . "    . PHP_EOL . \"    <script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.js' type='text/javascript'></script> <!-- JQuery -->\"" . PHP_EOL . "    . PHP_EOL . \"    <script src='//cdnjs.cloudflare.com/ajax/libs/datatables/1.10.7/js/jquery.dataTables.min.js' type='text/javascript'></script> <!-- Datatables -->\"" . PHP_EOL . "    . PHP_EOL . \"    <script src='//cdnjs.cloudflare.com/ajax/libs/jeditable.js/1.7.3/jeditable.min.js' type='text/javascript'></script> <!-- JEditable -->\"" . PHP_EOL . "    . PHP_EOL . \"    <script src='//cdnjs.cloudflare.com/ajax/libs/jqueryui/1.11.4/jquery-ui.min.js' type='text/javascript'></script> <!-- JQuery UI -->\"" . PHP_EOL . "    . PHP_EOL . \"    <script src='//cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.14.0/jquery.validate.min.js' type='text/javascript'></script> <!-- JQuery Validate -->\"" . PHP_EOL . "    . PHP_EOL . \"    <script src='//cdnjs.cloudflare.com/ajax/libs/datatables-tabletools/2.1.5/js/TableTools.min.js' type='text/javascript'></script> <!-- TableTools -->\"" . PHP_EOL . "    . PHP_EOL . \"    <script src='//cdnjs.cloudflare.com/ajax/libs/moment.js/2.10.3/moment.min.js' type='text/javascript'></script> <!-- Moment -->\"" . PHP_EOL . "    . PHP_EOL . \"    <script src='jquery.datatables.editable.js' type='text/javascript'></script> <!-- Datatables.Editable -->\"" . PHP_EOL . "    . PHP_EOL . \"    <script src='jquery.datetimepicker.js' type='text/javascript'></script> <!-- datetimepicker -->\"" . PHP_EOL . "    . PHP_EOL . \"    <script src='https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js' type='text/javascript'></script> <!-- Global Bootstrap -->\"" . PHP_EOL . "    . PHP_EOL . \"    <script src='//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.5/js/bootstrap.min.js' type='text/javascript'></script> <!-- Twitter Bootstrap -->\"" . PHP_EOL . "    . PHP_EOL . \"    <script src='//cdn.datatables.net/plug-ins/1.10.7/integration/bootstrap/3/dataTables.bootstrap.js' type='text/javascript'></script> <!-- Datatables Bootstrap -->\"" . PHP_EOL . "    . PHP_EOL . \"    <script src='//cdn.datatables.net/responsive/1.0.6/js/dataTables.responsive.js' type='text/javascript'></script> <!-- Datatables Responsive -->\"" . PHP_EOL . "    . PHP_EOL . \"    <style>form input { width:100% !important; }</style> <!-- Override bad styles from JEditable -->\" . PHP_EOL;" . PHP_EOL . "    return \$scripts;" . PHP_EOL . "}" . PHP_EOL . "\$dbname = '" . $dbname . "';" . PHP_EOL . "\$uname = '" . $uname . "';" . PHP_EOL . "\$upass = '" . $upass . "';" . PHP_EOL . "\$tableName = '" . $tableName . "';" . PHP_EOL . PHP_EOL . "\$conn = mysqli_connect(\$dbname, \$uname, \$upass, \$tableName);" . PHP_EOL . "if (mysqli_connect_errno()) {" . PHP_EOL . "    echo \"DBName: \" . \$dbname . \"<br>\";" . PHP_EOL . "    echo \"Failed to connect to MySQL: \" . mysqli_connect_error();" . PHP_EOL . "}" . PHP_EOL . PHP_EOL . "\$page = \"\";" . PHP_EOL . "if (isset(\$_GET[\"page\"]) && strlen(\$_GET[\"page\"]) > 0) {" . PHP_EOL . "    \$page = htmlspecialchars(\$_GET[\"page\"]); " . PHP_EOL . "} else {" . PHP_EOL . "    \$page = \"Home\";" . PHP_EOL . "}";
    
    file_put_contents("__globals.php", $GLOBALS_PHP);
    unset($GLOBALS_PHP);
    
    // __generator.php and __list.php, with adds, deletes and updates for everything
    $GENERATOR_PHP = "<?php" . PHP_EOL . "	//" . PHP_EOL . "	//	C.R.U.D. Generator" . PHP_EOL . "	//	Create, Read, Update, Delete." . PHP_EOL . "	//	" . PHP_EOL . "	//	Andrew Tunnecliffe, 2015." . PHP_EOL . "  //    http://atunnecliffe.com/" . PHP_EOL . "  //    " . PHP_EOL . "  //    Requirements" . PHP_EOL . "  //    Database must be MySQL with a compliant information_schema" . PHP_EOL . "  //    Each table must have a primary key called \"id\". " . PHP_EOL . "	//" . PHP_EOL . "	" . PHP_EOL . "	include '__globals.php';" . PHP_EOL . "" . PHP_EOL . "    // Task 0: Load data from information_schema" . PHP_EOL . "" . PHP_EOL . "	\$sql = \"select TABLE_NAME from information_schema.tables where table_schema='\" . \$tableName . \"'\";" . PHP_EOL . "	\$result = mysqli_query(\$conn, \$sql);" . PHP_EOL . "	" . PHP_EOL . "	\$inputs = [];" . PHP_EOL . "	" . PHP_EOL . "	if (mysqli_num_rows(\$result) > 0) {" . PHP_EOL . "	    while(\$row = mysqli_fetch_assoc(\$result)) {" . PHP_EOL . "			foreach(\$row as \$key => \$val) {" . PHP_EOL . "				\$cols = [];" . PHP_EOL . "				\$sql = \"SELECT COLUMN_NAME, IS_NULLABLE, COLUMN_TYPE, CHARACTER_MAXIMUM_LENGTH, NUMERIC_PRECISION, NUMERIC_SCALE FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_SCHEMA = '\" . \$tableName . \"' AND TABLE_NAME = '\" . \$val . \"';\";" . PHP_EOL . "				\$resultb = mysqli_query(\$conn, \$sql);" . PHP_EOL . "				while(\$rowb = mysqli_fetch_assoc(\$resultb)) {" . PHP_EOL . "					array_push(\$cols, \$rowb);" . PHP_EOL . "				}" . PHP_EOL . "				array_push(\$inputs, array(\"TABLE_NAME\"=>\$val, \"TABLE_COLUMNS\"=>\$cols));" . PHP_EOL . "			}" . PHP_EOL . "		}" . PHP_EOL . "	}" . PHP_EOL . " echo \"<style>.toggle-box {display:none;}\"" . PHP_EOL . " . PHP_EOL . \".toggle-box + label { display:block; cursor:pointer; font-weight:bold; line-height:30px;}\"" . PHP_EOL . " . PHP_EOL . \".toggle-box + label + pre { display:none; margin-bottom:10px; }\"" . PHP_EOL . " . PHP_EOL . \".toggle-box:checked + label + pre {display: block; }\"" . PHP_EOL . " . PHP_EOL . \"</style>\";" . PHP_EOL . "  echo \"Successfully loaded \" . count(\$inputs) . \" tables. <input id='toggle' class='toggle-box' type='checkbox'><label for='toggle'>Click here to toggle details.</label>\";" . PHP_EOL . "  echo \"<pre>\";" . PHP_EOL . "  echo \"What you see here is the PRINT_R of the information that will be used to create your interfaces.<br>\";" . PHP_EOL . "	print_r(\$inputs);" . PHP_EOL . "	echo \"</pre>\";" . PHP_EOL . "" . PHP_EOL . "" . PHP_EOL . "    // Task 1: Generate HTML files for on screen display for each table. [done]" . PHP_EOL . "    // Task 1.1: Implement basic validation based on database constraints [done]" . PHP_EOL . "    // Task 1.2: Responsive design, styling" . PHP_EOL . "" . PHP_EOL . "    \$nav = PHP_EOL . '<div class=\'nav\'>' . PHP_EOL . '    <h1>Admin Interface</h1>' . PHP_EOL;" . PHP_EOL . "    \$initial = \"<div class='nav'>\" . PHP_EOL;" . PHP_EOL . "    foreach(\$inputs as \$table) {" . PHP_EOL . "        \$nav = \$nav. \"    <a href='\" . \$table[\"TABLE_NAME\"] . \".php'><div>\" . \$table[\"TABLE_NAME\"] . \"</div></a>\" . PHP_EOL;" . PHP_EOL . "        \$initial = \$initial. \"    <a href='\" . \$table[\"TABLE_NAME\"] . \".php'><div>\" . \$table[\"TABLE_NAME\"] . \"</div></a>\" . PHP_EOL;" . PHP_EOL . "    }" . PHP_EOL . "    \$nav = \$nav . \"</div>\";" . PHP_EOL . "    \$initial = \$initial . \"</div>\";" . PHP_EOL . "    file_put_contents(\"list.php\", \$initial);" . PHP_EOL . "" . PHP_EOL . "    foreach(\$inputs as \$table) {" . PHP_EOL . "        \$page = \$table[\"TABLE_NAME\"];" . PHP_EOL . "        \$body = \$table[\"TABLE_COLUMNS\"];" . PHP_EOL . "        " . PHP_EOL . "        ob_start();" . PHP_EOL . "        require('__layout.php');" . PHP_EOL . "        \$html = ob_get_contents();" . PHP_EOL . "        ob_end_clean();" . PHP_EOL . "                " . PHP_EOL . "        // Display data from DB in table" . PHP_EOL . "        // Yo dawg" . PHP_EOL . "        //echo \"Page: \" . \$page" . PHP_EOL . "        \$target = strpos(\$html, \"<tbody>\") + 7;" . PHP_EOL . "        \$toInsert = PHP_EOL . \"<?php \" . PHP_EOL . \"    include '__globals.php';\" . PHP_EOL" . PHP_EOL . "            . \"    \\\$sql = \\\"select * from `\$page`\\\";\" . PHP_EOL" . PHP_EOL . "            . \"    \\\$result = mysqli_query(\\\$conn, \\\$sql);\" . PHP_EOL" . PHP_EOL . "            . \"    \\\$tab = \\\"                \\\";\" . PHP_EOL" . PHP_EOL . "            . \"    while(\\\$row = mysqli_fetch_assoc(\\\$result)) {\" . PHP_EOL" . PHP_EOL . "            . \"        echo \\\$tab . '<tr id=\\\"' . \\\$row[\\\"id\\\"] . '\\\">' . PHP_EOL;\" . PHP_EOL" . PHP_EOL . "            . \"        foreach(\\\$row as \\\$item) { \" . PHP_EOL" . PHP_EOL . "            . \"            echo \\\$tab . \\\"    <td>\\\" . \\\$item . \\\"</td>\\\" . PHP_EOL;\" . PHP_EOL" . PHP_EOL . "            . \"        }\" . PHP_EOL" . PHP_EOL . "            . \"        echo \\\$tab . \\\"</tr>\\\" . PHP_EOL;\" . PHP_EOL" . PHP_EOL . "            . \"    }\" . PHP_EOL" . PHP_EOL . "            . \"?>\" . PHP_EOL;" . PHP_EOL . "        " . PHP_EOL . "        \$html = substr_replace(\$html, \$toInsert, \$target, 0);" . PHP_EOL . "        \$target = strpos(\$html, \"<body>\") + 6;" . PHP_EOL . "        \$html = substr_replace(\$html, \$nav, \$target, 0);" . PHP_EOL . "        " . PHP_EOL . "        file_put_contents(\$page . \".php\", \$html);" . PHP_EOL . "        " . PHP_EOL . "        // Task 2: Generate EDIT scripts for each item [done]" . PHP_EOL . "        // Task 2.1: Implement server-side validation with usable error messages" . PHP_EOL . "        \$tab = \"    \";" . PHP_EOL . "        \$update = \"<?php \" . PHP_EOL " . PHP_EOL . "        . \$tab . \"include '__globals.php';\" . PHP_EOL" . PHP_EOL . "        . \$tab . \"\\\$tblName = \\\"\" . \$page . \"\\\";\" . PHP_EOL" . PHP_EOL . "        . \$tab . \"\\\$q = \\\"UPDATE `\\\" . \\\$tblName . \\\"` SET `\\\" . \\\$_POST['columnName'] . \\\"`=? WHERE id=?\\\";\" . PHP_EOL" . PHP_EOL . "        . \$tab . \"\\\$stmt = mysqli_prepare(\\\$conn, \\\$q);\" . PHP_EOL" . PHP_EOL . "        . \$tab . \"mysqli_stmt_bind_param(\\\$stmt, 'ss', \\\$_POST['value'], \\\$_POST['id']);\" . PHP_EOL" . PHP_EOL . "        . \$tab . \"mysqli_stmt_execute(\\\$stmt);\" . PHP_EOL" . PHP_EOL . "        . \$tab . \"mysqli_stmt_close(\\\$stmt);\" . PHP_EOL . PHP_EOL" . PHP_EOL . "        . \$tab . \"echo \\\$_POST['value'];\" . PHP_EOL" . PHP_EOL . "        . \"?>\";" . PHP_EOL . "        " . PHP_EOL . "        file_put_contents(\"update-\" . \$page . \".php\" , \$update);" . PHP_EOL . "        " . PHP_EOL . "        // Task 3: Generate ADD scripts for each item [done]" . PHP_EOL . "        // Task 3.1: Implement server-side validation with usable error messages" . PHP_EOL . "	\$q = \"INSERT INTO \" . \$table[\"TABLE_NAME\"] . \" SET \";" . PHP_EOL . "	\$s = \"\";" . PHP_EOL . "	" . PHP_EOL . "	foreach(\$table[\"TABLE_COLUMNS\"] as \$table) {" . PHP_EOL . "		if (strpos(\$table[\"COLUMN_NAME\"], \"id\") > -1 && strlen(\$table[\"COLUMN_NAME\"]) < 4) {" . PHP_EOL . "			\$q .= \"id=null, \";" . PHP_EOL . "		} else {" . PHP_EOL . "			\$q .= \$table[\"COLUMN_NAME\"] . \"=?, \";" . PHP_EOL . "			if (strpos(\$table[\"COLUMN_TYPE\"], \"int\") > -1 || strpos(\$table[\"COLUMN_TYPE\"], \"numeric\") > -1) {" . PHP_EOL . "				\$s .= \"i\";" . PHP_EOL . "			} else if(strpos(\$table[\"COLUMN_TYPE\"], \"decimal\") > -1 || strpos(\$table[\"COLUMN_TYPE\"], \"float\") > -1 || strpos(\$table[\"COLUMN_TYPE\"], \"double\") > -1) {" . PHP_EOL . "				\$s .= \"d\";" . PHP_EOL . "			} else {" . PHP_EOL . "				\$s .= \"s\";" . PHP_EOL . "			}" . PHP_EOL . "		}" . PHP_EOL . "	}" . PHP_EOL . "	" . PHP_EOL . "	// Get rid of trailing comma" . PHP_EOL . "	\$q = substr(\$q, 0, strlen(\$q) - 2);" . PHP_EOL . "	\$bind = \"'\" . \$s . \"'\";" . PHP_EOL . "	" . PHP_EOL . "	// Write file" . PHP_EOL . "	" . PHP_EOL . "			" . PHP_EOL . "	\$ADD_PHP = \"<?php\"" . PHP_EOL . "	. PHP_EOL . \"include '__globals.php';\"" . PHP_EOL . "	. PHP_EOL . \"\\\$bind = \" . \$bind . \";\"" . PHP_EOL . "	. PHP_EOL . \"\\\$keys = array_keys(\\\$_POST);\"" . PHP_EOL . "	. PHP_EOL . \"\\\$stmt = mysqli_prepare(\\\$conn, '\" . \$q . \"');\"" . PHP_EOL . "	. PHP_EOL . \"//How this should have been done: In the generate stage infer how many variables will be provided for each table.\" " . PHP_EOL . "	. PHP_EOL . \"switch(sizeof(\\\$keys)) {\" " . PHP_EOL . "	. PHP_EOL . \"	case 1:\" " . PHP_EOL . "	. PHP_EOL . \"		break;\" " . PHP_EOL . "	. PHP_EOL . \"	case 2:\" " . PHP_EOL . "	. PHP_EOL . \"		mysqli_stmt_bind_param(\\\$stmt, \$bind, \\\$_POST[\\\$keys[1]]);\" " . PHP_EOL . "	. PHP_EOL . \"		break;\" " . PHP_EOL . "	. PHP_EOL . \"	case 3:\" " . PHP_EOL . "	. PHP_EOL . \"		mysqli_stmt_bind_param(\\\$stmt, \$bind, \\\$_POST[\\\$keys[1]], \\\$_POST[\\\$keys[2]]);\" " . PHP_EOL . "	. PHP_EOL . \"		break;\" " . PHP_EOL . "	. PHP_EOL . \"	case 4:\" " . PHP_EOL . "	. PHP_EOL . \"		mysqli_stmt_bind_param(\\\$stmt, \$bind, \\\$_POST[\\\$keys[1]], \\\$_POST[\\\$keys[2]], \\\$_POST[\\\$keys[3]]);\" " . PHP_EOL . "	. PHP_EOL . \"		break;\" " . PHP_EOL . "	. PHP_EOL . \"	case 5:\" " . PHP_EOL . "	. PHP_EOL . \"		mysqli_stmt_bind_param(\\\$stmt, \$bind, \\\$_POST[\\\$keys[1]], \\\$_POST[\\\$keys[2]], \\\$_POST[\\\$keys[3]], \\\$_POST[\\\$keys[4]]);\" " . PHP_EOL . "	. PHP_EOL . \"		break;\" " . PHP_EOL . "	. PHP_EOL . \"	case 6:\" " . PHP_EOL . "	. PHP_EOL . \"		mysqli_stmt_bind_param(\\\$stmt, \$bind, \\\$_POST[\\\$keys[1]], \\\$_POST[\\\$keys[2]], \\\$_POST[\\\$keys[3]], \\\$_POST[\\\$keys[4]], \\\$_POST[\\\$keys[5]]);\" " . PHP_EOL . "	. PHP_EOL . \"		break;\" " . PHP_EOL . "	. PHP_EOL . \"	case 7:\" " . PHP_EOL . "	. PHP_EOL . \"		mysqli_stmt_bind_param(\\\$stmt, \$bind, \\\$_POST[\\\$keys[1]], \\\$_POST[\\\$keys[2]], \\\$_POST[\\\$keys[3]], \\\$_POST[\\\$keys[4]], \\\$_POST[\\\$keys[5]], \\\$_POST[\\\$keys[6]]);\" " . PHP_EOL . "	. PHP_EOL . \"		break;\" " . PHP_EOL . "	. PHP_EOL . \"	case 8:\" " . PHP_EOL . "	. PHP_EOL . \"		mysqli_stmt_bind_param(\\\$stmt, \$bind, \\\$_POST[\\\$keys[1]], \\\$_POST[\\\$keys[2]], \\\$_POST[\\\$keys[3]], \\\$_POST[\\\$keys[4]], \\\$_POST[\\\$keys[5]], \\\$_POST[\\\$keys[6]], \\\$_POST[\\\$keys[7]]);\" " . PHP_EOL . "	. PHP_EOL . \"		break;\" " . PHP_EOL . "	. PHP_EOL . \"	case 9:\" " . PHP_EOL . "	. PHP_EOL . \"		mysqli_stmt_bind_param(\\\$stmt, \$bind, \\\$_POST[\\\$keys[1]], \\\$_POST[\\\$keys[2]], \\\$_POST[\\\$keys[3]], \\\$_POST[\\\$keys[4]], \\\$_POST[\\\$keys[5]], \\\$_POST[\\\$keys[6]], \\\$_POST[\\\$keys[7]], \\\$_POST[\\\$keys[8]]);\" " . PHP_EOL . "	. PHP_EOL . \"		break;\" " . PHP_EOL . "	. PHP_EOL . \"	case 10:\" " . PHP_EOL . "	. PHP_EOL . \"		mysqli_stmt_bind_param(\\\$stmt, \$bind, \\\$_POST[\\\$keys[1]], \\\$_POST[\\\$keys[2]], \\\$_POST[\\\$keys[3]], \\\$_POST[\\\$keys[4]], \\\$_POST[\\\$keys[5]], \\\$_POST[\\\$keys[6]], \\\$_POST[\\\$keys[7]], \\\$_POST[\\\$keys[8]], \\\$_POST[\\\$keys[9]]);\" " . PHP_EOL . "	. PHP_EOL . \"		break;\" " . PHP_EOL . "	. PHP_EOL . \"	case 11:\" " . PHP_EOL . "	. PHP_EOL . \"		mysqli_stmt_bind_param(\\\$stmt, \$bind, \\\$_POST[\\\$keys[1]], \\\$_POST[\\\$keys[2]], \\\$_POST[\\\$keys[3]], \\\$_POST[\\\$keys[4]], \\\$_POST[\\\$keys[5]], \\\$_POST[\\\$keys[6]], \\\$_POST[\\\$keys[7]], \\\$_POST[\\\$keys[8]], \\\$_POST[\\\$keys[9]], \\\$_POST[\\\$keys[10]]);\" " . PHP_EOL . "	. PHP_EOL . \"		break;\" " . PHP_EOL . "	. PHP_EOL . \"	case 12:\" " . PHP_EOL . "	. PHP_EOL . \"		mysqli_stmt_bind_param(\\\$stmt, \$bind, \\\$_POST[\\\$keys[1]], \\\$_POST[\\\$keys[2]], \\\$_POST[\\\$keys[3]], \\\$_POST[\\\$keys[4]], \\\$_POST[\\\$keys[5]], \\\$_POST[\\\$keys[6]], \\\$_POST[\\\$keys[7]], \\\$_POST[\\\$keys[8]], \\\$_POST[\\\$keys[9]], \\\$_POST[\\\$keys[10]], \\\$_POST[\\\$keys[11]]);\" " . PHP_EOL . "	. PHP_EOL . \"		break;\" " . PHP_EOL . "	. PHP_EOL . \"	case 13:\" " . PHP_EOL . "	. PHP_EOL . \"		mysqli_stmt_bind_param(\\\$stmt, \$bind, \\\$_POST[\\\$keys[1]], \\\$_POST[\\\$keys[2]], \\\$_POST[\\\$keys[3]], \\\$_POST[\\\$keys[4]], \\\$_POST[\\\$keys[5]], \\\$_POST[\\\$keys[6]], \\\$_POST[\\\$keys[7]], \\\$_POST[\\\$keys[8]], \\\$_POST[\\\$keys[9]], \\\$_POST[\\\$keys[10]], \\\$_POST[\\\$keys[11]], \\\$_POST[\\\$keys[12]]);\" " . PHP_EOL . "	. PHP_EOL . \"		break;\" " . PHP_EOL . "	. PHP_EOL . \"	case 14:\" " . PHP_EOL . "	. PHP_EOL . \"		mysqli_stmt_bind_param(\\\$stmt, \$bind, \\\$_POST[\\\$keys[1]], \\\$_POST[\\\$keys[2]], \\\$_POST[\\\$keys[3]], \\\$_POST[\\\$keys[4]], \\\$_POST[\\\$keys[5]], \\\$_POST[\\\$keys[6]], \\\$_POST[\\\$keys[7]], \\\$_POST[\\\$keys[8]], \\\$_POST[\\\$keys[9]], \\\$_POST[\\\$keys[10]], \\\$_POST[\\\$keys[11]], \\\$_POST[\\\$keys[12]], \\\$_POST[\\\$keys[13]]);\" " . PHP_EOL . "	. PHP_EOL . \"		break;\" " . PHP_EOL . "	. PHP_EOL . \"	case 15:\" " . PHP_EOL . "	. PHP_EOL . \"		mysqli_stmt_bind_param(\\\$stmt, \$bind, \\\$_POST[\\\$keys[1]], \\\$_POST[\\\$keys[2]], \\\$_POST[\\\$keys[3]], \\\$_POST[\\\$keys[4]], \\\$_POST[\\\$keys[5]], \\\$_POST[\\\$keys[6]], \\\$_POST[\\\$keys[7]], \\\$_POST[\\\$keys[8]], \\\$_POST[\\\$keys[9]], \\\$_POST[\\\$keys[10]], \\\$_POST[\\\$keys[11]], \\\$_POST[\\\$keys[12]], \\\$_POST[\\\$keys[13]], \\\$_POST[\\\$keys[14]]);\" " . PHP_EOL . "	. PHP_EOL . \"		break;\" " . PHP_EOL . "	. PHP_EOL . \"	case 16:\" " . PHP_EOL . "	. PHP_EOL . \"		mysqli_stmt_bind_param(\\\$stmt, \$bind, \\\$_POST[\\\$keys[1]], \\\$_POST[\\\$keys[2]], \\\$_POST[\\\$keys[3]], \\\$_POST[\\\$keys[4]], \\\$_POST[\\\$keys[5]], \\\$_POST[\\\$keys[6]], \\\$_POST[\\\$keys[7]], \\\$_POST[\\\$keys[8]], \\\$_POST[\\\$keys[9]], \\\$_POST[\\\$keys[10]], \\\$_POST[\\\$keys[11]], \\\$_POST[\\\$keys[12]], \\\$_POST[\\\$keys[13]], \\\$_POST[\\\$keys[14]], \\\$_POST[\\\$keys[15]]);\" " . PHP_EOL . "	. PHP_EOL . \"		break;\" " . PHP_EOL . "	. PHP_EOL . \"	case 17:\" " . PHP_EOL . "	. PHP_EOL . \"		mysqli_stmt_bind_param(\\\$stmt, \$bind, \\\$_POST[\\\$keys[1]], \\\$_POST[\\\$keys[2]], \\\$_POST[\\\$keys[3]], \\\$_POST[\\\$keys[4]], \\\$_POST[\\\$keys[5]], \\\$_POST[\\\$keys[6]], \\\$_POST[\\\$keys[7]], \\\$_POST[\\\$keys[8]], \\\$_POST[\\\$keys[9]], \\\$_POST[\\\$keys[10]], \\\$_POST[\\\$keys[11]], \\\$_POST[\\\$keys[12]], \\\$_POST[\\\$keys[13]], \\\$_POST[\\\$keys[14]], \\\$_POST[\\\$keys[15]], \\\$_POST[\\\$keys[16]]);\" " . PHP_EOL . "	. PHP_EOL . \"		break;\" " . PHP_EOL . "	. PHP_EOL . \"	case 18:\" " . PHP_EOL . "	. PHP_EOL . \"		mysqli_stmt_bind_param(\\\$stmt, \$bind, \\\$_POST[\\\$keys[1]], \\\$_POST[\\\$keys[2]], \\\$_POST[\\\$keys[3]], \\\$_POST[\\\$keys[4]], \\\$_POST[\\\$keys[5]], \\\$_POST[\\\$keys[6]], \\\$_POST[\\\$keys[7]], \\\$_POST[\\\$keys[8]], \\\$_POST[\\\$keys[9]], \\\$_POST[\\\$keys[10]], \\\$_POST[\\\$keys[11]], \\\$_POST[\\\$keys[12]], \\\$_POST[\\\$keys[13]], \\\$_POST[\\\$keys[14]], \\\$_POST[\\\$keys[15]], \\\$_POST[\\\$keys[16]], \\\$_POST[\\\$keys[17]]);\" " . PHP_EOL . "	. PHP_EOL . \"		break;\" " . PHP_EOL . "	. PHP_EOL . \"	case 19:\" " . PHP_EOL . "	. PHP_EOL . \"		mysqli_stmt_bind_param(\\\$stmt, \$bind, \\\$_POST[\\\$keys[1]], \\\$_POST[\\\$keys[2]], \\\$_POST[\\\$keys[3]], \\\$_POST[\\\$keys[4]], \\\$_POST[\\\$keys[5]], \\\$_POST[\\\$keys[6]], \\\$_POST[\\\$keys[7]], \\\$_POST[\\\$keys[8]], \\\$_POST[\\\$keys[9]], \\\$_POST[\\\$keys[10]], \\\$_POST[\\\$keys[11]], \\\$_POST[\\\$keys[12]], \\\$_POST[\\\$keys[13]], \\\$_POST[\\\$keys[14]], \\\$_POST[\\\$keys[15]], \\\$_POST[\\\$keys[16]], \\\$_POST[\\\$keys[17]], \\\$_POST[\\\$keys[18]]);\" " . PHP_EOL . "	. PHP_EOL . \"		break;\" " . PHP_EOL . "	. PHP_EOL . \"	case 20:\" " . PHP_EOL . "	. PHP_EOL . \"		mysqli_stmt_bind_param(\\\$stmt, \$bind, \\\$_POST[\\\$keys[1]], \\\$_POST[\\\$keys[2]], \\\$_POST[\\\$keys[3]], \\\$_POST[\\\$keys[4]], \\\$_POST[\\\$keys[5]], \\\$_POST[\\\$keys[6]], \\\$_POST[\\\$keys[7]], \\\$_POST[\\\$keys[8]], \\\$_POST[\\\$keys[9]], \\\$_POST[\\\$keys[10]], \\\$_POST[\\\$keys[11]], \\\$_POST[\\\$keys[12]], \\\$_POST[\\\$keys[13]], \\\$_POST[\\\$keys[14]], \\\$_POST[\\\$keys[15]], \\\$_POST[\\\$keys[16]], \\\$_POST[\\\$keys[17]], \\\$_POST[\\\$keys[18]], \\\$_POST[\\\$keys[19]]);	\" " . PHP_EOL . "	. PHP_EOL . \"		break;\" " . PHP_EOL . "	. PHP_EOL . \"}	\"" . PHP_EOL . "	. PHP_EOL . \"mysqli_stmt_execute(\\\$stmt);\"" . PHP_EOL . "	. PHP_EOL . \"printf(\\\"%d Row inserted.\\\", mysqli_stmt_affected_rows(\\\$stmt));\"" . PHP_EOL . "	. PHP_EOL . \"mysqli_stmt_close(\\\$stmt);\"" . PHP_EOL . "	. PHP_EOL . \"?>\";" . PHP_EOL . "	file_put_contents(\"add-\" . \$page . \".php\" , \$ADD_PHP);" . PHP_EOL . "" . PHP_EOL . "" . PHP_EOL . "        \$DELETE_PHP = \"<?php \" . PHP_EOL " . PHP_EOL . "        . \$tab . \"include '__globals.php';\" . PHP_EOL" . PHP_EOL . "        . \$tab . \"\\\$tblName = \\\"\" . \$page . \"\\\";\" . PHP_EOL" . PHP_EOL . "        . \$tab . \"\\\$sql = \\\"DELETE FROM \\\" . \\\$tblName . \\\" WHERE id=\\\" . \\\$_POST[\\\"id\\\"];\" . PHP_EOL" . PHP_EOL . "        . \"if (mysqli_query(\\\$conn, \\\$sql)) {\" . PHP_EOL" . PHP_EOL . "        . \"} else {\" . PHP_EOL" . PHP_EOL . "        . \"}\" . PHP_EOL" . PHP_EOL . "        . \"?>\";" . PHP_EOL . "        " . PHP_EOL . "        file_put_contents(\"delete-\" . \$page . \".php\" , \$DELETE_PHP);" . PHP_EOL . "}" . PHP_EOL . "" . PHP_EOL . "\$DATETIMEPICKER_CSS = \".xdsoft_datetimepicker{box-shadow:0 5px 15px -5px rgba(0,0,0,.506);background:#fff;border-bottom:1px solid #bbb;border-left:1px solid #ccc;border-right:1px solid #ccc;border-top:1px solid #ccc;color:#333;font-family:\\\"Helvetica Neue\\\",Helvetica,Arial,sans-serif;padding:2px 8px 8px 0;position:absolute;z-index:9999;-moz-box-sizing:border-box;box-sizing:border-box;display:none}.xdsoft_datetimepicker iframe{position:absolute;left:0;top:0;width:75px;height:210px;background:0 0;border:none}.xdsoft_datetimepicker button{border:none!important}.xdsoft_noselect{-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none}.xdsoft_noselect::selection{background:0 0}.xdsoft_noselect::-moz-selection{background:0 0}.xdsoft_datetimepicker.xdsoft_inline{display:inline-block;position:static;box-shadow:none}.xdsoft_datetimepicker *{-moz-box-sizing:border-box;box-sizing:border-box;padding:0;margin:0}.xdsoft_datetimepicker .xdsoft_datepicker,.xdsoft_datetimepicker .xdsoft_timepicker{display:none}.xdsoft_datetimepicker .xdsoft_datepicker.active,.xdsoft_datetimepicker .xdsoft_timepicker.active{display:block}.xdsoft_datetimepicker .xdsoft_datepicker{width:224px;float:left;margin-left:8px}.xdsoft_datetimepicker.xdsoft_showweeks .xdsoft_datepicker{width:256px}.xdsoft_datetimepicker .xdsoft_timepicker{width:58px;float:left;text-align:center;margin-left:8px;margin-top:0}.xdsoft_datetimepicker .xdsoft_datepicker.active+.xdsoft_timepicker{margin-top:8px;margin-bottom:3px}.xdsoft_datetimepicker .xdsoft_mounthpicker{position:relative;text-align:center}.xdsoft_datetimepicker .xdsoft_label i,.xdsoft_datetimepicker .xdsoft_next,.xdsoft_datetimepicker .xdsoft_prev,.xdsoft_datetimepicker .xdsoft_today_button{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAeCAYAAADaW7vzAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6Q0NBRjI1NjM0M0UwMTFFNDk4NkFGMzJFQkQzQjEwRUIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6Q0NBRjI1NjQ0M0UwMTFFNDk4NkFGMzJFQkQzQjEwRUIiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpDQ0FGMjU2MTQzRTAxMUU0OTg2QUYzMkVCRDNCMTBFQiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpDQ0FGMjU2MjQzRTAxMUU0OTg2QUYzMkVCRDNCMTBFQiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PoNEP54AAAIOSURBVHja7Jq9TsMwEMcxrZD4WpBYeKUCe+kTMCACHZh4BFfHO/AAIHZGFhYkBBsSEqxsLCAgXKhbXYOTxh9pfJVP+qutnZ5s/5Lz2Y5I03QhWji2GIcgAokWgfCxNvcOCCGKqiSqhUp0laHOne05vdEyGMfkdxJDVjgwDlEQgYQBgx+ULJaWSXXS6r/ER5FBVR8VfGftTKcITNs+a1XpcFoExREIDF14AVIFxgQUS+h520cdud6wNkC0UBw6BCO/HoCYwBhD8QCkQ/x1mwDyD4plh4D6DDV0TAGyo4HcawLIBBSLDkHeH0Mg2yVP3l4TQMZQDDsEOl/MgHQqhMNuE0D+oBh0CIr8MAKyazBH9WyBuKxDWgbXfjNf32TZ1KWm/Ap1oSk/R53UtQ5xTh3LUlMmT8gt6g51Q9p+SobxgJQ/qmsfZhWywGFSl0yBjCLJCMgXail3b7+rumdVJ2YRss4cN+r6qAHDkPWjPjdJCF4n9RmAD/V9A/Wp4NQassDjwlB6XBiCxcJQWmZZb8THFilfy/lfrTvLghq2TqTHrRMTKNJ0sIhdo15RT+RpyWwFdY96UZ/LdQKBGjcXpcc1AlSFEfLmouD+1knuxBDUVrvOBmoOC/rEcN7OQxKVeJTCiAdUzUJhA2Oez9QTkp72OTVcxDcXY8iKNkxGAJXmJCOQwOa6dhyXsOa6XwEGAKdeb5ET3rQdAAAAAElFTkSuQmCC)}.xdsoft_datetimepicker .xdsoft_label i{opacity:.5;background-position:-92px -19px;display:inline-block;width:9px;height:20px;vertical-align:middle}.xdsoft_datetimepicker .xdsoft_prev{float:left;background-position:-20px 0}.xdsoft_datetimepicker .xdsoft_today_button{float:left;background-position:-70px 0;margin-left:5px}.xdsoft_datetimepicker .xdsoft_next{float:right;background-position:0 0}.xdsoft_datetimepicker .xdsoft_next,.xdsoft_datetimepicker .xdsoft_prev,.xdsoft_datetimepicker .xdsoft_today_button{background-color:transparent;background-repeat:no-repeat;border:0;cursor:pointer;display:block;height:30px;opacity:.5;-ms-filter:\\\"progid:DXImageTransform.Microsoft.Alpha(Opacity=50)\\\";outline:0;overflow:hidden;padding:0;position:relative;text-indent:100%;white-space:nowrap;width:20px;min-width:0}.xdsoft_datetimepicker .xdsoft_timepicker .xdsoft_next,.xdsoft_datetimepicker .xdsoft_timepicker .xdsoft_prev{float:none;background-position:-40px -15px;height:15px;width:30px;display:block;margin-left:14px;margin-top:7px}.xdsoft_datetimepicker .xdsoft_timepicker .xdsoft_prev{background-position:-40px 0;margin-bottom:7px;margin-top:0}.xdsoft_datetimepicker .xdsoft_timepicker .xdsoft_time_box{height:151px;overflow:hidden;border-bottom:1px solid #ddd}.xdsoft_datetimepicker .xdsoft_timepicker .xdsoft_time_box>div>div{background:#f5f5f5;border-top:1px solid #ddd;color:#666;font-size:12px;text-align:center;border-collapse:collapse;cursor:pointer;border-bottom-width:0;height:25px;line-height:25px}.xdsoft_datetimepicker .xdsoft_timepicker .xdsoft_time_box>div>div:first-child{border-top-width:0}.xdsoft_datetimepicker .xdsoft_next:hover,.xdsoft_datetimepicker .xdsoft_prev:hover,.xdsoft_datetimepicker .xdsoft_today_button:hover{opacity:1;-ms-filter:\\\"progid:DXImageTransform.Microsoft.Alpha(Opacity=100)\\\"}.xdsoft_datetimepicker .xdsoft_label{display:inline;position:relative;z-index:9999;margin:0;padding:5px 3px;font-size:14px;line-height:20px;font-weight:700;background-color:#fff;float:left;width:182px;text-align:center;cursor:pointer}.xdsoft_datetimepicker .xdsoft_label:hover>span{text-decoration:underline}.xdsoft_datetimepicker .xdsoft_label:hover i{opacity:1}.xdsoft_datetimepicker .xdsoft_label>.xdsoft_select{border:1px solid #ccc;position:absolute;right:0;top:30px;z-index:101;display:none;background:#fff;max-height:160px;overflow-y:hidden}.xdsoft_datetimepicker .xdsoft_label>.xdsoft_select.xdsoft_monthselect{right:-7px}.xdsoft_datetimepicker .xdsoft_label>.xdsoft_select.xdsoft_yearselect{right:2px}.xdsoft_datetimepicker .xdsoft_label>.xdsoft_select>div>.xdsoft_option:hover{color:#fff;background:#ff8000}.xdsoft_datetimepicker .xdsoft_label>.xdsoft_select>div>.xdsoft_option{padding:2px 10px 2px 5px;text-decoration:none!important}.xdsoft_datetimepicker .xdsoft_label>.xdsoft_select>div>.xdsoft_option.xdsoft_current{background:#3af;box-shadow:#178fe5 0 1px 3px 0 inset;color:#fff;font-weight:700}.xdsoft_datetimepicker .xdsoft_month{width:100px;text-align:right}.xdsoft_datetimepicker .xdsoft_calendar{clear:both}.xdsoft_datetimepicker .xdsoft_year{width:48px;margin-left:5px}.xdsoft_datetimepicker .xdsoft_calendar table{border-collapse:collapse;width:100%}.xdsoft_datetimepicker .xdsoft_calendar td>div{padding-right:5px}.xdsoft_datetimepicker .xdsoft_calendar td,.xdsoft_datetimepicker .xdsoft_calendar th{width:14.2857142%;background:#f5f5f5;border:1px solid #ddd;color:#666;font-size:12px;text-align:right;vertical-align:middle;padding:0;border-collapse:collapse;cursor:pointer;height:25px}.xdsoft_datetimepicker.xdsoft_showweeks .xdsoft_calendar td,.xdsoft_datetimepicker.xdsoft_showweeks .xdsoft_calendar th{width:12.5%}.xdsoft_datetimepicker .xdsoft_calendar th{background:#f1f1f1}.xdsoft_datetimepicker .xdsoft_calendar td.xdsoft_today{color:#3af}.xdsoft_datetimepicker .xdsoft_calendar td.xdsoft_highlighted_default{background:#ffe9d2;box-shadow:#ffb871 0 1px 4px 0 inset;color:#000}.xdsoft_datetimepicker .xdsoft_calendar td.xdsoft_highlighted_mint{background:#c1ffc9;box-shadow:#00dd1c 0 1px 4px 0 inset;color:#000}.xdsoft_datetimepicker .xdsoft_calendar td.xdsoft_current,.xdsoft_datetimepicker .xdsoft_calendar td.xdsoft_default,.xdsoft_datetimepicker .xdsoft_timepicker .xdsoft_time_box>div>div.xdsoft_current{background:#3af;box-shadow:#178fe5 0 1px 3px 0 inset;color:#fff;font-weight:700}.xdsoft_datetimepicker .xdsoft_calendar td.xdsoft_disabled,.xdsoft_datetimepicker .xdsoft_calendar td.xdsoft_other_month,.xdsoft_datetimepicker .xdsoft_time_box>div>div.xdsoft_disabled{opacity:.5;-ms-filter:\\\"progid:DXImageTransform.Microsoft.Alpha(Opacity=50)\\\";cursor:default}.xdsoft_datetimepicker .xdsoft_calendar td.xdsoft_other_month.xdsoft_disabled{opacity:.2;-ms-filter:\\\"progid:DXImageTransform.Microsoft.Alpha(Opacity=20)\\\"}.xdsoft_datetimepicker .xdsoft_calendar td:hover,.xdsoft_datetimepicker .xdsoft_timepicker .xdsoft_time_box>div>div:hover{color:#fff!important;background:#ff8000!important;box-shadow:none!important}.xdsoft_datetimepicker .xdsoft_calendar td.xdsoft_current.xdsoft_disabled:hover,.xdsoft_datetimepicker .xdsoft_timepicker .xdsoft_time_box>div>div.xdsoft_current.xdsoft_disabled:hover{background:#3af!important;box-shadow:#178fe5 0 1px 3px 0 inset!important;color:#fff!important}.xdsoft_datetimepicker .xdsoft_calendar td.xdsoft_disabled:hover,.xdsoft_datetimepicker .xdsoft_timepicker .xdsoft_time_box>div>div.xdsoft_disabled:hover{color:inherit!important;background:inherit!important;box-shadow:inherit!important}.xdsoft_datetimepicker .xdsoft_calendar th{font-weight:700;text-align:center;color:#999;cursor:default}.xdsoft_datetimepicker .xdsoft_copyright{color:#ccc!important;font-size:10px;clear:both;float:none;margin-left:8px}.xdsoft_datetimepicker .xdsoft_copyright a{color:#eee!important}.xdsoft_datetimepicker .xdsoft_copyright a:hover{color:#aaa!important}.xdsoft_time_box{position:relative;border:1px solid #ccc}.xdsoft_scrollbar>.xdsoft_scroller{background:#ccc!important;height:20px;border-radius:3px}.xdsoft_scrollbar{position:absolute;width:7px;right:0;top:0;bottom:0;cursor:pointer}.xdsoft_scroller_box{position:relative}.xdsoft_datetimepicker.xdsoft_dark{box-shadow:0 5px 15px -5px rgba(255,255,255,.506);background:#000;border-bottom:1px solid #444;border-left:1px solid #333;border-right:1px solid #333;border-top:1px solid #333;color:#ccc}.xdsoft_datetimepicker.xdsoft_dark .xdsoft_timepicker .xdsoft_time_box{border-bottom:1px solid #222}.xdsoft_datetimepicker.xdsoft_dark .xdsoft_timepicker .xdsoft_time_box>div>div{background:#0a0a0a;border-top:1px solid #222;color:#999}.xdsoft_datetimepicker.xdsoft_dark .xdsoft_label{background-color:#000}.xdsoft_datetimepicker.xdsoft_dark .xdsoft_label>.xdsoft_select{border:1px solid #333;background:#000}.xdsoft_datetimepicker.xdsoft_dark .xdsoft_label>.xdsoft_select>div>.xdsoft_option:hover{color:#000;background:#007fff}.xdsoft_datetimepicker.xdsoft_dark .xdsoft_label>.xdsoft_select>div>.xdsoft_option.xdsoft_current{background:#c50;box-shadow:#b03e00 0 1px 3px 0 inset;color:#000}.xdsoft_datetimepicker.xdsoft_dark .xdsoft_label i,.xdsoft_datetimepicker.xdsoft_dark .xdsoft_next,.xdsoft_datetimepicker.xdsoft_dark .xdsoft_prev,.xdsoft_datetimepicker.xdsoft_dark .xdsoft_today_button{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAeCAYAAADaW7vzAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QUExQUUzOTA0M0UyMTFFNDlBM0FFQTJENTExRDVBODYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QUExQUUzOTE0M0UyMTFFNDlBM0FFQTJENTExRDVBODYiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpBQTFBRTM4RTQzRTIxMUU0OUEzQUVBMkQ1MTFENUE4NiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpBQTFBRTM4RjQzRTIxMUU0OUEzQUVBMkQ1MTFENUE4NiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pp0VxGEAAAIASURBVHja7JrNSgMxEMebtgh+3MSLr1T1Xn2CHoSKB08+QmR8Bx9A8e7RixdB9CKCoNdexIugxFlJa7rNZneTbLIpM/CnNLsdMvNjM8l0mRCiQ9Ye61IKCAgZAUnH+mU3MMZaHYChBnJUDzWOFZdVfc5+ZFLbrWDeXPwbxIqrLLfaeS0hEBVGIRQCEiZoHQwtlGSByCCdYBl8g8egTTAWoKQMRBRBcZxYlhzhKegqMOageErsCHVkk3hXIFooDgHB1KkHIHVgzKB4ADJQ/A1jAFmAYhkQqA5TOBtocrKrgXwQA8gcFIuAIO8sQSA7hidvPwaQGZSaAYHOUWJABhWWw2EMIH9QagQERU4SArJXo0ZZL18uvaxejXt/Em8xjVBXmvFr1KVm/AJ10tRe2XnraNqaJvKE3KHuUbfK1E+VHB0q40/y3sdQSxY4FHWeKJCunP8UyDdqJZenT3ntVV5jIYCAh20vT7ioP8tpf6E2lfEMwERe+whV1MHjwZB7PBiCxcGQWwKZKD62lfGNnP/1poFAA60T7rF1UgcKd2id3KDeUS+oLWV8DfWAepOfq00CgQabi9zjcgJVYVD7PVzQUAUGAQkbNJTBICDhgwYTjDYD6XeW08ZKh+A4pYkzenOxXUbvZcWz7E8ykRMnIHGX1XPl+1m2vPYpL+2qdb8CDAARlKFEz/ZVkAAAAABJRU5ErkJggg==)}.xdsoft_datetimepicker.xdsoft_dark .xdsoft_calendar td,.xdsoft_datetimepicker.xdsoft_dark .xdsoft_calendar th{background:#0a0a0a;border:1px solid #222;color:#999}.xdsoft_datetimepicker.xdsoft_dark .xdsoft_calendar th{background:#0e0e0e}.xdsoft_datetimepicker.xdsoft_dark .xdsoft_calendar td.xdsoft_today{color:#c50}.xdsoft_datetimepicker.xdsoft_dark .xdsoft_calendar td.xdsoft_highlighted_default{background:#ffe9d2;box-shadow:#ffb871 0 1px 4px 0 inset;color:#000}.xdsoft_datetimepicker.xdsoft_dark .xdsoft_calendar td.xdsoft_highlighted_mint{background:#c1ffc9;box-shadow:#00dd1c 0 1px 4px 0 inset;color:#000}.xdsoft_datetimepicker.xdsoft_dark .xdsoft_calendar td.xdsoft_current,.xdsoft_datetimepicker.xdsoft_dark .xdsoft_calendar td.xdsoft_default,.xdsoft_datetimepicker.xdsoft_dark .xdsoft_timepicker .xdsoft_time_box>div>div.xdsoft_current{background:#c50;box-shadow:#b03e00 0 1px 3px 0 inset;color:#000}.xdsoft_datetimepicker.xdsoft_dark .xdsoft_calendar td:hover,.xdsoft_datetimepicker.xdsoft_dark .xdsoft_timepicker .xdsoft_time_box>div>div:hover{color:#000!important;background:#007fff!important}.xdsoft_datetimepicker.xdsoft_dark .xdsoft_calendar th{color:#666}.xdsoft_datetimepicker.xdsoft_dark .xdsoft_copyright{color:#333!important}.xdsoft_datetimepicker.xdsoft_dark .xdsoft_copyright a{color:#111!important}.xdsoft_datetimepicker.xdsoft_dark .xdsoft_copyright a:hover{color:#555!important}.xdsoft_dark .xdsoft_time_box{border:1px solid #333}.xdsoft_dark .xdsoft_scrollbar>.xdsoft_scroller{background:#333!important}.xdsoft_datetimepicker .xdsoft_save_selected{display:block;border:1px solid #ddd!important;margin-top:5px;width:100%;color:#454551;font-size:13px}.xdsoft_datetimepicker .blue-gradient-button{font-family:museo-sans,\\\"Book Antiqua\\\",sans-serif;font-size:12px;font-weight:300;color:#82878c;height:28px;position:relative;padding:4px 17px 4px 33px;border:1px solid #d7d8da;background:-moz-linear-gradient(top,#fff 0,#f4f8fa 73%);background:-webkit-gradient(linear,left top,left bottom,color-stop(0,#fff),color-stop(73%,#f4f8fa));background:-webkit-linear-gradient(top,#fff 0,#f4f8fa 73%);background:-o-linear-gradient(top,#fff 0,#f4f8fa 73%);background:-ms-linear-gradient(top,#fff 0,#f4f8fa 73%);background:linear-gradient(to bottom,#fff 0,#f4f8fa 73%);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#fff', endColorstr='#f4f8fa', GradientType=0)}.xdsoft_datetimepicker .blue-gradient-button:focus,.xdsoft_datetimepicker .blue-gradient-button:focus span,.xdsoft_datetimepicker .blue-gradient-button:hover,.xdsoft_datetimepicker .blue-gradient-button:hover span{color:#454551;background:-moz-linear-gradient(top,#f4f8fa 0,#FFF 73%);background:-webkit-gradient(linear,left top,left bottom,color-stop(0,#f4f8fa),color-stop(73%,#FFF));background:-webkit-linear-gradient(top,#f4f8fa 0,#FFF 73%);background:-o-linear-gradient(top,#f4f8fa 0,#FFF 73%);background:-ms-linear-gradient(top,#f4f8fa 0,#FFF 73%);background:linear-gradient(to bottom,#f4f8fa 0,#FFF 73%);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#f4f8fa', endColorstr='#FFF', GradientType=0)}\";" . PHP_EOL . "file_put_contents(\"jquery.datetimepicker.css\" , \$DATETIMEPICKER_CSS);" . PHP_EOL . "\$DATATABLESEDITABLE_JS = \"!function(e){e.fn.makeEditable=function(t){function o(t){return G.fnGetRowID(e(t.parentNode))}function n(e,t,o){o?e.attr(\\\"id\\\",t):(null==e.attr(\\\"id\\\")||\\\"\\\"==e.attr(\\\"id\\\"))&&e.attr(\\\"id\\\",t)}function a(e){return e.attr(\\\"id\\\")}function s(e){alert(e)}function l(){U.fnSettings().oFeatures.bProcessing&&e(\\\".dataTables_processing\\\").css(\\\"visibility\\\",\\\"visible\\\")}function d(){U.fnSettings().oFeatures.bProcessing&&e(\\\".dataTables_processing\\\").css(\\\"visibility\\\",\\\"hidden\\\")}function r(t){if(!G.bDisableEditing){var n={event:\\\"dblclick\\\",onsubmit:function(t,n){if(V=n.revert,K=null,sNewCellDisplayValue=null,q=S(),\\\"text\\\"==t.type||\\\"select\\\"==t.type||\\\"textarea\\\"==t.type){var a=e(\\\"input,select,textarea\\\",this);if(K=e(\\\"input,select,textarea\\\",e(this)).val(),1==a.length){var s=a[0];sNewCellDisplayValue=\\\"select\\\"==s.nodeName.toLowerCase()||\\\"select\\\"==s.tagName.toLowerCase()?e(\\\"option:selected\\\",s).text():K}if(!G.fnOnEditing(a,t,n.revert,o(n)))return!1;return null!=t.oValidationOptions&&a.parents(\\\"form\\\").validate(t.oValidationOptions),null!=t.cssclass&&a.addClass(t.cssclass),null==t.cssclass&&null==t.oValidationOptions?!0:a.valid()&&0!=a.valid()?!0:!1}G.fnStartProcessingMode()},submitdata:function(){var t=o(this),n=U.fnGetPosition(this)[0],a=U.fnGetPosition(this)[1],s=U.fnGetPosition(this)[2],l=U.fnSettings().aoColumns[s].sName;(null==l||\\\"\\\"==l)&&(l=U.fnSettings().aoColumns[s].sTitle);var i=null;return i=null==G.aoColumns||null==G.aoColumns[s]?e.extend({},G.oUpdateParameters,{id:t,rowId:n,columnPosition:a,columnId:s,columnName:l}):e.extend({},G.oUpdateParameters,G.aoColumns[s].oUpdateParameters,{id:t,rowId:n,columnPosition:a,columnId:s,columnName:l})},callback:function(t,o){G.fnEndProcessingMode();var n=\\\"\\\",a=U.fnGetPosition(this),s=!z.oFeatures.bServerSide;if(e(\\\"td.last-updated-cell\\\",U.fnGetNodes()).removeClass(\\\"last-updated-cell\\\"),t.indexOf(G.sFailureResponsePrefix)>-1?(U.fnUpdate(V,a[0],a[2],s),e(\\\"td.last-updated-cell\\\",U).removeClass(\\\"last-updated-cell\\\"),e(this).addClass(\\\"last-updated-cell\\\"),G.fnShowError(t.replace(G.sFailureResponsePrefix,\\\"\\\").trim(),\\\"update\\\"),n=\\\"failure\\\"):\\\"IGNORE\\\"==G.sSuccessResponse||null!=G.aoColumns&&null!=G.aoColumns[a[2]]&&\\\"IGNORE\\\"==G.aoColumns[a[2]].sSuccessResponse||null==K||K==t||G.sSuccessResponse==t?(null==sNewCellDisplayValue?U.fnUpdate(t,a[0],a[2],s):U.fnUpdate(sNewCellDisplayValue,a[0],a[2],s),e(\\\"td.last-updated-cell\\\",U).removeClass(\\\"last-updated-cell\\\"),e(this).addClass(\\\"last-updated-cell\\\"),n=\\\"success\\\"):(U.fnUpdate(V,a[0],a[2],s),G.fnShowError(t,\\\"update\\\"),n=\\\"failure\\\"),G.fnOnEdited(n,V,sNewCellDisplayValue,a[0],a[1],a[2]),null!=o.fnOnCellUpdated&&o.fnOnCellUpdated(n,t,a[0],a[2],o),y(),G.bUseKeyTable){var l=U.keys;setTimeout(function(){l.block=!1},0)}},onerror:function(){G.fnEndProcessingMode(),G.fnShowError(\\\"Cell cannot be updated\\\",\\\"update\\\"),G.fnOnEdited(\\\"failure\\\")},onreset:function(){if(G.bUseKeyTable){var e=U.keys;setTimeout(function(){e.block=!1},0)}},height:G.sEditorHeight,width:G.sEditorWidth},a=null;if(null!=G.aoColumns){for(var s=0,l=0;s<z.aoColumns.length;s++)if(z.aoColumns[s].bVisible){if(null==G.aoColumns[l]){l++;continue}a=e(\\\"td:nth-child(\\\"+(l+1)+\\\")\\\",t);var i=n;i=e.extend({},n,G.oEditableSettings,G.aoColumns[l]),l++;var d=G.sUpdateURL;try{null!=i.sUpdateURL&&(d=i.sUpdateURL)}catch(r){}a.each(function(){e(this).hasClass(G.sReadOnlyCellClass)||e(this).editable(d,i)})}}else a=e(\\\"td:not(.\\\"+G.sReadOnlyCellClass+\\\")\\\",t),a.editable(G.sUpdateURL,e.extend({},n,G.oEditableSettings))}}function u(t){if(G.fnOnAdding()&&_.valid())if(q=S(),G.fnStartProcessingMode(),G.bUseFormsPlugin)e(_).ajaxSubmit({dataType:\\\"xml\\\",success:function(e,t,o){-1!=o.responseText.toLowerCase().indexOf(\\\"error\\\")?(G.fnEndProcessingMode(),G.fnShowError(o.responseText.replace(\\\"Error\\\",\\\"\\\"),\\\"add\\\"),G.fnOnAdded(\\\"failure\\\")):f(o.responseText)},error:function(e){G.fnEndProcessingMode(),G.fnShowError(e.responseText,\\\"add\\\"),G.fnOnAdded(\\\"failure\\\")}});else{var o=_.serialize();e.ajax({url:G.sAddURL,data:o,type:G.sAddHttpMethod,dataType:G.sAddDataType,success:f,error:function(e){G.fnEndProcessingMode(),G.fnShowError(e.responseText,\\\"add\\\"),G.fnOnAdded(\\\"failure\\\")}})}t.stopPropagation(),t.preventDefault()}function c(){return!0}function f(t){if(G.fnEndProcessingMode(),G.fnOnNewRowPosted(t)){var o=U.fnSettings();if(!o.oFeatures.bServerSide){jQuery.data(_,\\\"DT_RowId\\\",t);var n,a=I(_),s=void 0!==o.aoColumns[0].mDataProp?o.aoColumns[0].mDataProp:o.aoColumns[0].mData;n=U.fnAddData(null!=o.aoColumns&&isNaN(parseInt(s))?t:a);var l=U.fnGetNodes(n);G.fnSetRowID(e(l),t,!0),r(l),e(\\\"tr.last-added-row\\\",U).removeClass(\\\"last-added-row\\\"),e(l).addClass(\\\"last-added-row\\\")}if(_.dialog(\\\"close\\\"),e(_)[0].reset(),e(\\\".error\\\",e(_)).html(\\\"\\\"),y(),G.fnOnAdded(\\\"success\\\"),G.bUseKeyTable){var i=U.keys;setTimeout(function(){i.block=!1},0)}}}function p(t){e(_).validate().resetForm(),e(_)[0].reset(),e(\\\".error\\\",e(_)).html(\\\"\\\"),e(\\\".error\\\",e(_)).hide(),_.dialog(\\\"close\\\"),t.stopPropagation(),t.preventDefault()}function w(){G.bUseKeyTable||(null!=G.oDeleteRowButtonOptions?F.button(\\\"option\\\",\\\"disabled\\\",!0):F.attr(\\\"disabled\\\",\\\"true\\\"))}function h(){null!=G.oDeleteRowButtonOptions?F.button(\\\"option\\\",\\\"disabled\\\",!1):F.removeAttr(\\\"disabled\\\")}function m(t){var n=e(this).attr(\\\"href\\\");(null==n||\\\"\\\"==n)&&(n=G.sDeleteURL),t.preventDefault(),t.stopPropagation(),q=S(),Q=e(this).parents(\\\"td\\\")[0],jSelectedRow=e(this).parents(\\\"tr\\\"),H=jSelectedRow[0],jSelectedRow.addClass(G.sSelectedRowClass);var a=o(Q);G.fnOnDeleting(jSelectedRow,a,R)&&R(a,n)}function b(t){if(t.preventDefault(),t.stopPropagation(),q=S(),H=null,Q=null,G.bUseKeyTable)Q=e(\\\"td.focus\\\",U)[0];else{if(0==e(\\\"tr.\\\"+G.sSelectedRowClass+\\\" td\\\",U).length)return void _fnDisableDeleteButton();Q=e(\\\"tr.\\\"+G.sSelectedRowClass+\\\" td\\\",U)[0]}if(null==Q)return void w();G.bUseKeyTable&&(W=U.keys.fnGetCurrentPosition());var n=o(Q),a=e(Q).parent(\\\"tr\\\");H=a[0],G.fnOnDeleting(a,n,R)&&R(n)}function C(){return confirm(\\\"Are you sure that you want to delete this record?\\\")}function R(t,o){var n=o;null==o&&(n=G.sDeleteURL),G.fnStartProcessingMode();var a=e.extend(G.oDeleteParameters,{id:t});e.ajax({url:n,type:G.sDeleteHttpMethod,data:a,success:A,dataType:G.sDeleteDataType,error:function(e){G.fnEndProcessingMode(),G.fnShowError(e.responseText,\\\"delete\\\"),G.fnOnDeleted(\\\"failure\\\")}})}function A(e){G.fnEndProcessingMode();var t=H;e==G.sSuccessResponse||\\\"\\\"==e?(U.fnDeleteRow(t),w(),y(),G.bUseKeyTable&&U.keys.fnSetPosition(W[0],W[1]),G.fnOnDeleted(\\\"success\\\")):(G.fnShowError(e,\\\"delete\\\"),G.fnOnDeleted(\\\"failure\\\"))}function g(){}function v(){return!0}function O(){}function D(){return!0}function N(){}function S(){return z._iDisplayStart}function y(){z._iDisplayStart=q,z.oApi._fnCalculateEnd(z),z.oApi._fnDraw(z)}function T(){return!0}function k(){}function P(e){G.aoTableAction&&G.fnShowError(\\\"Configuration error - aoTableAction setting are not set\\\",e);var t=0;for(t=0;t<G.aoTableActions.length;t++)if(G.aoTableActions[t].sAction==e)return G.aoTableActions[t];G.fnShowError(\\\"Cannot find action configuration settings\\\",e)}function x(t,o){var n=U.fnGetPosition(o),a=G.fnGetRowID(e(o));e(t).validate().resetForm(),jQuery.data(e(t)[0],\\\"DT_RowId\\\",a),e(\\\"input.DT_RowId\\\",e(t)).val(a),jQuery.data(e(t)[0],\\\"ROWID\\\",n),e(\\\"input.ROWID\\\",e(t)).val(n);var s=U.fnSettings(),l=s.aoColumns.length;e(\\\"input:text[rel],input:radio[rel][checked],input:hidden[rel],select[rel],textarea[rel],input:checkbox[rel]\\\",e(t)).each(function(){var t=e(this).attr(\\\"rel\\\");if(t>=l)G.fnShowError(\\\"In the form is placed input element with the name '\\\"+e(this).attr(\\\"name\\\")+\\\"' with the 'rel' attribute that must be less than a column count - \\\"+l,\\\"action\\\");else{var n=U.fnGetData(o)[t];if(\\\"select\\\"==this.nodeName.toLowerCase()||\\\"select\\\"==this.tagName.toLowerCase())if(1==this.multiple){var a=new Array;for(aoCellValues=n.split(\\\",\\\"),i=0;i<=this.options.length-1;i++)-1!=jQuery.inArray(this.options[i].text.toLowerCase().trim(),aoCellValues)&&a.push(this.options[i].value);e(this).val(a)}else for(i=0;i<=this.options.length-1;i++)this.options[i].text.toLowerCase()==n.toLowerCase()&&e(this).val(this.options[i].value);else\\\"span\\\"==this.nodeName.toLowerCase()||\\\"span\\\"==this.tagName.toLowerCase()?e(this).html(n):\\\"checkbox\\\"==this.type?\\\"true\\\"==n&&e(this).attr(\\\"checked\\\",!0):\\\"radio\\\"==this.type?this.value==n&&(this.checked=!0):this.value=n}})}function I(t){var o=jQuery.data(t,\\\"DT_RowId\\\"),n=z.aoColumns.length,a=new Array,s=new Object;e(\\\"input:text[rel],input:radio[rel][checked],input:hidden[rel],select[rel],textarea[rel],span.datafield[rel],input:checkbox[rel]\\\",t).each(function(){var t=e(this).attr(\\\"rel\\\"),l=\\\"\\\";if(t>=n)G.fnShowError(\\\"In the add form is placed input element with the name '\\\"+e(this).attr(\\\"name\\\")+\\\"' with the 'rel' attribute that must be less than a column count - \\\"+n,\\\"add\\\");else{l=\\\"select\\\"==this.nodeName.toLowerCase()||\\\"select\\\"==this.tagName.toLowerCase()?e.map(e.makeArray(e(\\\"option:selected\\\",this)),function(t){return e(t).text()}).join(\\\",\\\"):\\\"span\\\"==this.nodeName.toLowerCase()||\\\"span\\\"==this.tagName.toLowerCase()?e(this).html():\\\"checkbox\\\"==this.type?this.checked?\\\"on\\\"!=this.value?this.value:\\\"true\\\":\\\"on\\\"!=this.value?\\\"\\\":\\\"false\\\":this.value,l=l.replace(\\\"DATAROWID\\\",o),l=l.replace(G.sIDToken,o);var i=void 0!==z.aoColumns[0].mDataProp?z.aoColumns[0].mDataProp:z.aoColumns[0].mData;null!=z.aoColumns&&null!=z.aoColumns[t]&&isNaN(parseInt(i))?s[z.aoColumns[t].mDataProp]=l:a[t]=l}});var l=void 0!==z.aoColumns[0].mDataProp?z.aoColumns[0].mDataProp:z.aoColumns[0].mData;return null!=z.aoColumns&&isNaN(parseInt(l))?s:a}function E(t){var o=e(t),n=o.attr(\\\"id\\\");n=n.replace(\\\"form\\\",\\\"\\\");var a=o.attr(\\\"action\\\");if(G.fnOnBeforeAction(n)&&o.valid())if(q=S(),G.fnStartProcessingMode(),G.bUseFormsPlugin){{var s={success:function(e,o){G.fnEndProcessingMode(),-1!=e.toLowerCase().indexOf(\\\"error\\\")||\\\"success\\\"!=o?(G.fnShowError(e,n),G.fnOnActionCompleted(\\\"failure\\\")):(B(t),G.fnOnActionCompleted(\\\"success\\\"))},error:function(e){G.fnEndProcessingMode(),G.fnShowError(e.responseText,n),G.fnOnActionCompleted(\\\"failure\\\")}};P(n)}s=e.extend({},G.oAjaxSubmitOptions,s),e(oActionForm).ajaxSubmit(s)}else{var l=o.serialize();e.ajax({url:a,data:l,type:G.sAddHttpMethod,dataType:G.sAddDataType,success:function(){G.fnEndProcessingMode(),B(t),G.fnOnActionCompleted(\\\"success\\\")},error:function(e){G.fnEndProcessingMode(),G.fnShowError(e.responseText,n),G.fnOnActionCompleted(\\\"failure\\\")}})}}function B(t){for(var o=I(t),n=jQuery.data(t,\\\"ROWID\\\"),a=U.fnSettings(),s=a.aoColumns.length,l=0;s>l;l++)sCellValue=null!=a.aoColumns&&null!=a.aoColumns[l]&&isNaN(parseInt(a.aoColumns[0].mDataProp))?rowData[a.aoColumns[l].mDataProp]:o[l],void 0!=sCellValue&&U.fnUpdate(sCellValue,n,l);y(),e(t).dialog(\\\"close\\\")}var U,L,F,M,j,_,G,V,K,H,Q,W,z,q=0;U=this;var J={sUpdateURL:\\\"UpdateData\\\",sAddURL:\\\"AddData\\\",sDeleteURL:\\\"DeleteData\\\",sAddNewRowFormId:\\\"formAddNewRow\\\",oAddNewRowFormOptions:{autoOpen:!1,modal:!0},sAddNewRowButtonId:\\\"btnAddNewRow\\\",oAddNewRowButtonOptions:null,sAddNewRowOkButtonId:\\\"btnAddNewRowOk\\\",sAddNewRowCancelButtonId:\\\"btnAddNewRowCancel\\\",oAddNewRowOkButtonOptions:{label:\\\"Ok\\\"},oAddNewRowCancelButtonOptions:{label:\\\"Cancel\\\"},sDeleteRowButtonId:\\\"btnDeleteRow\\\",oDeleteRowButtonOptions:null,sSelectedRowClass:\\\"row_selected\\\",sReadOnlyCellClass:\\\"read_only\\\",sAddDeleteToolbarSelector:\\\".add_delete_toolbar\\\",fnShowError:s,fnStartProcessingMode:l,fnEndProcessingMode:d,aoColumns:null,fnOnDeleting:C,fnOnDeleted:g,fnOnAdding:D,fnOnNewRowPosted:c,fnOnAdded:N,fnOnEditing:v,fnOnEdited:O,sAddHttpMethod:\\\"POST\\\",sAddDataType:\\\"text\\\",sDeleteHttpMethod:\\\"POST\\\",sDeleteDataType:\\\"text\\\",fnGetRowID:a,fnSetRowID:n,sEditorHeight:\\\"100%\\\",sEditorWidth:\\\"100%\\\",bDisableEditing:!1,oDeleteParameters:{},oUpdateParameters:{},sIDToken:\\\"DT_RowId\\\",aoTableActions:null,fnOnBeforeAction:T,bUseFormsPlugin:!1,fnOnActionCompleted:k,sSuccessResponse:\\\"ok\\\",sFailureResponsePrefix:\\\"ERROR\\\",oKeyTable:null};return G=e.extend(J,t),z=U.fnSettings(),G.bUseKeyTable=null!=G.oKeyTable,this.each(function(){var t=U.dataTableSettings[0].sTableId;if(G.bUseKeyTable){var o=new KeyTable({table:document.getElementById(t),datatable:U});U.keys=o,o.event.action(null,null,function(t){e(t).hasClass(G.sReadOnlyCellClass)||(o.block=!0,setTimeout(function(){e(t).dblclick()},0))})}if(null!=U.fnSettings().sAjaxSource?U.fnSettings().aoDrawCallback.push({fn:function(){r(U.fnGetNodes()),e(U.fnGetNodes()).each(function(){var t=U.fnGetPosition(this),o=U.fnGetData(t)[0];G.fnSetRowID(e(this),o)})},sName:\\\"fnApplyEditable\\\"}):r(U.fnGetNodes()),_=e(\\\"#\\\"+G.sAddNewRowFormId),0!=_.length){var n=U.fnSettings(),a=n.aoColumns.length;for(l=0;a>l;l++)0==e(\\\"[rel=\\\"+l+\\\"]\\\",_).length&&G.fnShowError(\\\"In the form that is used for adding new records cannot be found an input element with rel=\\\"+l+\\\" that will be bound to the value in the column \\\"+l+\\\". See http://code.google.com/p/jquery-datatables-editable/wiki/AddingNewRecords#Add_new_record_form for more details\\\",\\\"init\\\");if(null!=G.oAddNewRowFormOptions?G.oAddNewRowFormOptions.autoOpen=!1:G.oAddNewRowFormOptions={autoOpen:!1},_.dialog(G.oAddNewRowFormOptions),L=e(\\\"#\\\"+G.sAddNewRowButtonId),0!=L.length)\\\"true\\\"!=L.data(\\\"add-event-attached\\\")&&(L.click(function(){_.dialog(\\\"open\\\")}),L.data(\\\"add-event-attached\\\",\\\"true\\\"));else{if(0==e(G.sAddDeleteToolbarSelector).length)throw\\\"Cannot find a button with an id '\\\"+G.sAddNewRowButtonId+\\\"', or placeholder with an id '\\\"+G.sAddDeleteToolbarSelector+\\\"' that should be used for adding new row although form for adding new record is specified\\\";L=null}\\\"form\\\"==_[0].nodeName.toLowerCase()?(_.unbind(\\\"submit\\\"),_.submit(function(e){return u(e),!1})):(e(\\\"form\\\",_[0]).unbind(\\\"submit\\\"),e(\\\"form\\\",_[0]).submit(function(e){return u(e),!1}));var s=[];M=e(\\\"#\\\"+G.sAddNewRowOkButtonId,_),0==M.length?((null==G.oAddNewRowOkButtonOptions.text||\\\"\\\"==G.oAddNewRowOkButtonOptions.text)&&(G.oAddNewRowOkButtonOptions.text=\\\"Ok\\\"),G.oAddNewRowOkButtonOptions.click=u,G.oAddNewRowOkButtonOptions.id=G.sAddNewRowOkButtonId,s.push(G.oAddNewRowOkButtonOptions)):M.click(u),j=e(\\\"#\\\"+G.sAddNewRowCancelButtonId),0==j.length?((null==G.oAddNewRowCancelButtonOptions.text||\\\"\\\"==G.oAddNewRowCancelButtonOptions.text)&&(G.oAddNewRowCancelButtonOptions.text=\\\"Cancel\\\"),G.oAddNewRowCancelButtonOptions.click=p,G.oAddNewRowCancelButtonOptions.id=G.sAddNewRowCancelButtonId,s.push(G.oAddNewRowCancelButtonOptions)):j.click(p),s.length>0&&_.dialog(\\\"option\\\",\\\"buttons\\\",s),M=e(\\\"#\\\"+G.sAddNewRowOkButtonId),j=e(\\\"#\\\"+G.sAddNewRowCancelButtonId),null!=G.oAddNewRowFormValidation&&_.validate(G.oAddNewRowFormValidation)}else _=null;if(F=e(\\\"#\\\"+G.sDeleteRowButtonId),0!=F.length?\\\"true\\\"!=F.data(\\\"delete-event-attached\\\")&&(F.click(b),F.data(\\\"delete-event-attached\\\",\\\"true\\\")):F=null,oAddDeleteToolbar=e(G.sAddDeleteToolbarSelector),0!=oAddDeleteToolbar.length&&(null==L&&\\\"\\\"!=G.sAddNewRowButtonId&&null!=_&&(oAddDeleteToolbar.append(\\\"<button id='\\\"+G.sAddNewRowButtonId+\\\"' class='add_row'>Add</button>\\\"),L=e(\\\"#\\\"+G.sAddNewRowButtonId),L.click(function(){_.dialog(\\\"open\\\")})),null==F&&\\\"\\\"!=G.sDeleteRowButtonId&&(oAddDeleteToolbar.append(\\\"<button id='\\\"+G.sDeleteRowButtonId+\\\"' class='delete_row'>Delete</button>\\\"),F=e(\\\"#\\\"+G.sDeleteRowButtonId),F.click(b))),null!=F&&(null!=G.oDeleteRowButtonOptions&&F.button(G.oDeleteRowButtonOptions),w()),null!=L&&null!=G.oAddNewRowButtonOptions&&L.button(G.oAddNewRowButtonOptions),null!=M&&null!=G.oAddNewRowOkButtonOptions&&M.button(G.oAddNewRowOkButtonOptions),null!=j&&null!=G.oAddNewRowCancelButtonOptions&&j.button(G.oAddNewRowCancelButtonOptions),e(\\\".table-action-deletelink\\\",U).on(\\\"click\\\",m),G.bUseKeyTable?U.keys.event.focus(null,null,function(){}):e(\\\"tbody\\\",U).click(function(t){e(t.target.parentNode).hasClass(G.sSelectedRowClass)?(e(t.target.parentNode).removeClass(G.sSelectedRowClass),null!=F&&w()):(e(U.fnSettings().aoData).each(function(){e(this.nTr).removeClass(G.sSelectedRowClass)}),e(t.target.parentNode).addClass(G.sSelectedRowClass),null!=F&&h())}),null!=G.aoTableActions)for(var l=0;l<G.aoTableActions.length;l++){var i=e.extend({sType:\\\"edit\\\"},G.aoTableActions[l]),d=i.sAction,c=(i.sActionFormId,e(\\\"#form\\\"+d));if(0!=c.length){var f={autoOpen:!1,modal:!0};f=e.extend({},i.oFormOptions,f),c.dialog(f),c.data(\\\"action-options\\\",i);var C=e(\\\".table-action-\\\"+d);0!=C.length&&C.on(\\\"click\\\",function(){var t=this.className,o=t.split(/\s+/),n=\\\"\\\",a=\\\"\\\";for(l=0;l<o.length;l++)o[l].indexOf(\\\"table-action-\\\")>-1&&(a=o[l].replace(\\\"table-action-\\\",\\\"\\\"),n=\\\"#form\\\"+a);\\\"\\\"==n&&G.fnShowError(\\\"Cannot find a form with an id \\\"+n+\\\" that should be associated to the action - \\\"+a,a);var s=e(n).data(\\\"action-options\\\");if(\\\"edit\\\"==s.sType){var i=e(this).parents(\\\"tr\\\")[0];x(c,i)}e(c).dialog(\\\"open\\\")}),c.submit(function(){return E(this),!1});var R=new Array,A=e(\\\"#form\\\"+d+\\\"Cancel\\\",c);0!=A.length&&(R.push(A),A.click(function(){var t=e(this).parents(\\\"form\\\")[0];e(t).validate().resetForm(),e(t)[0].reset(),e(\\\".error\\\",e(t)).html(\\\"\\\"),e(\\\".error\\\",e(t)).hide(),e(t).dialog(\\\"close\\\")})),e(\\\"button\\\",c).button()}}})}}(jQuery);\";" . PHP_EOL . "file_put_contents(\"jquery.datatables.editable.js\", \$DATATABLESEDITABLE_JS);" . PHP_EOL . "?>";
    
    file_put_contents("__generator.php", $GENERATOR_PHP);
    unset($GENERATOR_PHP);
    
    // __layout.php
    $LAYOUT_PHP = "<!DOCTYPE html>" . PHP_EOL . "<html>" . PHP_EOL . "<head>" . PHP_EOL . "<?php echo loadScripts(); ?>" . PHP_EOL . "<script type=\"text/javascript\">" . PHP_EOL . "    // Add datetimepicker to JEditable" . PHP_EOL . "    $.editable.addInputType( 'datetimepicker', {" . PHP_EOL . "        /* create input element */" . PHP_EOL . "        element: function (settings, original) {" . PHP_EOL . "            var form = $(this)," . PHP_EOL . "                input = $('<input />');" . PHP_EOL . "            input.attr('autocomplete', 'off');" . PHP_EOL . "            form.append(input);" . PHP_EOL . "            return input;" . PHP_EOL . "        }," . PHP_EOL . "" . PHP_EOL . "        /* attach jquery.ui.datetimepicker to the input element */" . PHP_EOL . "        plugin: function (settings, original) {" . PHP_EOL . "            var form = this," . PHP_EOL . "                input = form.find(\"input\");" . PHP_EOL . "" . PHP_EOL . "            // Don't cancel inline editing onblur to allow clicking datetimepicker" . PHP_EOL . "            settings.onblur = 'nothing';" . PHP_EOL . "" . PHP_EOL . "            datetimepicker = {" . PHP_EOL . "                onSelect: function () {" . PHP_EOL . "                    // clicking specific day in the calendar should" . PHP_EOL . "                    // submit the form and close the input field" . PHP_EOL . "                    form.submit();" . PHP_EOL . "                }," . PHP_EOL . "" . PHP_EOL . "                onClose: function () {" . PHP_EOL . "                    setTimeout(function () {" . PHP_EOL . "                        if (!input.is(':focus')) {" . PHP_EOL . "                            // input has NO focus after 150ms which means" . PHP_EOL . "                            // calendar was closed due to click outside of it" . PHP_EOL . "                            // so let's close the input field without saving" . PHP_EOL . "                            original.reset(form);" . PHP_EOL . "                        } else {" . PHP_EOL . "                            // input still HAS focus after 150ms which means" . PHP_EOL . "                            // calendar was closed due to Enter in the input field" . PHP_EOL . "                            // so lets submit the form and close the input field" . PHP_EOL . "                            form.submit();" . PHP_EOL . "                        }" . PHP_EOL . "" . PHP_EOL . "                        // the delay is necessary; calendar must be already" . PHP_EOL . "                        // closed for the above :focus checking to work properly;" . PHP_EOL . "                        // without a delay the form is submitted in all scenarios, which is wrong" . PHP_EOL . "                    }, 150);" . PHP_EOL . "                }" . PHP_EOL . "            };" . PHP_EOL . "" . PHP_EOL . "            if (settings.datetimepicker) {" . PHP_EOL . "                jQuery.extend(datetimepicker, settings.datetimepicker);" . PHP_EOL . "            }" . PHP_EOL . "" . PHP_EOL . "            input.datetimepicker(datetimepicker);" . PHP_EOL . "        }" . PHP_EOL . "    });" . PHP_EOL . "    " . PHP_EOL . "    var table;" . PHP_EOL . "    " . PHP_EOL . "    $(document).ready(function() {" . PHP_EOL . "        table = $('#tbl').dataTable({" . PHP_EOL . "            dom: 'T<\"clear\">lfrtip',		 " . PHP_EOL . "            tableTools: {" . PHP_EOL . "                \"sSwfPath\": \"http://atunnecliffe.com/js/copy_csv_xls_pdf.swf\"" . PHP_EOL . "            }," . PHP_EOL . "            responsive: true" . PHP_EOL . "        });" . PHP_EOL . "        " . PHP_EOL . "        table.makeEditable({" . PHP_EOL . "            sUpdateURL: \"update-<?php echo \$page; ?>.php\"," . PHP_EOL . "            sAddURL: \"add-<?php echo \$page; ?>.php\"," . PHP_EOL . "            sDeleteURL: \"delete-<?php echo \$page; ?>.php\"," . PHP_EOL . "            \"aoColumns\": [" . PHP_EOL . "<?php" . PHP_EOL . "                    // Validation" . PHP_EOL . "                    \$addType = [];" . PHP_EOL . "                    \$maxLen = [];" . PHP_EOL . "                    foreach(\$body as \$items) {" . PHP_EOL . "                        \$tab = \"                    \";" . PHP_EOL . "                        \$rules = [];" . PHP_EOL . "                        \$messages = [];" . PHP_EOL . "                        \$types = [];" . PHP_EOL . "                        " . PHP_EOL . "                        // Add validation and types" . PHP_EOL . "                        if (strpos(strtolower(\$items[\"IS_NULLABLE\"]), \"yes\") > -1) {" . PHP_EOL . "                            array_push(\$rules, \"required: true\");" . PHP_EOL . "                        }" . PHP_EOL . "                        " . PHP_EOL . "                        if (strlen(\$items[\"CHARACTER_MAXIMUM_LENGTH\"]) > 0 && is_numeric(\$items[\"CHARACTER_MAXIMUM_LENGTH\"])) {" . PHP_EOL . "                            array_push(\$rules, \"maxlength: \" . \$items[\"CHARACTER_MAXIMUM_LENGTH\"]);   " . PHP_EOL . "                            array_push(\$messages, \"maxlength: \\\"Input must be less than \" . \$items[\"CHARACTER_MAXIMUM_LENGTH\"] . \" characters long.\\\"\");" . PHP_EOL . "                            array_push(\$maxLen, \$items[\"CHARACTER_MAXIMUM_LENGTH\"]);" . PHP_EOL . "                        } else if (strlen(\$items[\"NUMERIC_PRECISION\"]) > 0 && is_numeric(\$items[\"NUMERIC_PRECISION\"])) {" . PHP_EOL . "                            array_push(\$rules, \"maxlength: \" . \$items[\"NUMERIC_PRECISION\"]);   " . PHP_EOL . "                            array_push(\$messages, \"maxlength: \\\"Input must be less than \" . \$items[\"NUMERIC_PRECISION\"] . \" characters long.\\\"\");" . PHP_EOL . "                            array_push(\$maxLen, \$items[\"NUMERIC_PRECISION\"]);" . PHP_EOL . "                        } else {" . PHP_EOL . "                            array_push(\$maxLen, \"65535\");" . PHP_EOL . "                        }" . PHP_EOL . "                        " . PHP_EOL . "                        if (strpos(\$items[\"COLUMN_TYPE\"], \"int\") > -1) {" . PHP_EOL . "                            array_push(\$rules, \"digits: true\");  " . PHP_EOL . "                            array_push(\$messages, \"digits: \\\"Input must be numeric.\\\"\");" . PHP_EOL . "                            if (strpos(\$items[\"COLUMN_NAME\"], \"id\") == 0) {" . PHP_EOL . "                                array_push(\$addType, \"hidden' value='null\"); // Hectic injections to handle id" . PHP_EOL . "                            } else {" . PHP_EOL . "                                array_push(\$addType, \"number\");" . PHP_EOL . "                            }" . PHP_EOL . "                        } else if (strpos(strtolower(\$items[\"COLUMN_TYPE\"]), \"datetime\") > -1) {" . PHP_EOL . "                            array_push(\$rules, \"date: true\");  " . PHP_EOL . "                            array_push(\$messages, \"date: \\\"Input must be a date. Format like: yyyy/mm/dd hh:mm.\\\"\");" . PHP_EOL . "                            array_push(\$types, \"datetimepicker\"); array_push(\$addType, \"datetimepicker\");" . PHP_EOL . "                        } else if (strpos(strtolower(\$items[\"COLUMN_TYPE\"]), \"date\") > -1) {" . PHP_EOL . "                            array_push(\$rules, \"date: true\");  " . PHP_EOL . "                            array_push(\$messages, \"date: \\\"Input must be a date. Format like: yyyy/mm/dd.\\\"\");" . PHP_EOL . "                            array_push(\$types, \"datetimepicker\"); array_push(\$addType, \"datetimepicker\");" . PHP_EOL . "                        } else {" . PHP_EOL . "                            array_push(\$addType, \"text\");" . PHP_EOL . "                        }" . PHP_EOL . "                        echo \$tab . \"{\" . PHP_EOL;" . PHP_EOL . "                        " . PHP_EOL . "                        // Rules" . PHP_EOL . "                        echo \$tab . \"oValidationOptions: {\" . PHP_EOL" . PHP_EOL . "                            . \$tab . \"    rules: {\" . PHP_EOL" . PHP_EOL . "                            . \$tab . \"        value: {\" . PHP_EOL;" . PHP_EOL . "                        " . PHP_EOL . "                        foreach(\$rules as \$rule) {" . PHP_EOL . "                            echo \$tab . \"            \" . \$rule . \",\" . PHP_EOL;" . PHP_EOL . "                        }               " . PHP_EOL . "                        " . PHP_EOL . "                        // Messages" . PHP_EOL . "                        echo \$tab . \"        }\" . PHP_EOL" . PHP_EOL . "                            . \$tab . \"    },\" . PHP_EOL" . PHP_EOL . "                            . \$tab . \"    messages: {\" . PHP_EOL" . PHP_EOL . "                            . \$tab . \"        value: {\" . PHP_EOL;" . PHP_EOL . "                        " . PHP_EOL . "                        foreach(\$messages as \$message) {" . PHP_EOL . "                            echo \$tab . \"            \" . \$message . \",\" . PHP_EOL;" . PHP_EOL . "                        }" . PHP_EOL . "                        " . PHP_EOL . "                        echo \$tab . \"        }\" . PHP_EOL" . PHP_EOL . "                            . \$tab . \"    }\" . PHP_EOL" . PHP_EOL . "                            . \$tab . \"},\" . PHP_EOL;" . PHP_EOL . "                        " . PHP_EOL . "                        // Types and extras" . PHP_EOL . "                        foreach(\$types as \$type) {" . PHP_EOL . "                            echo \$tab . \"type: '\" . \$type . \"',\" . PHP_EOL;   " . PHP_EOL . "                        }" . PHP_EOL . "                        " . PHP_EOL . "                        echo \"                },\" . PHP_EOL;" . PHP_EOL . "                    }" . PHP_EOL . "                ?>" . PHP_EOL . "            ]" . PHP_EOL . "        });" . PHP_EOL . "" . PHP_EOL . "        $('#tbl tbody').on( 'click', 'tr', function () {" . PHP_EOL . "            $(this).toggleClass('selected');" . PHP_EOL . "        });" . PHP_EOL . "" . PHP_EOL . "        $.fn.dataTableExt.sErrMode = 'ignore'" . PHP_EOL . "" . PHP_EOL . "        $('input[type=datetimepicker]').datetimepicker();" . PHP_EOL . "" . PHP_EOL . "        $('#formAddNewRow').validate();" . PHP_EOL . "" . PHP_EOL . "        $(\"input[type=hidden]\").after(\"Field hidden.\");" . PHP_EOL . "    });" . PHP_EOL . "</script>" . PHP_EOL . "<style>" . PHP_EOL . "html, body {" . PHP_EOL . "    background:#F3F4F5;" . PHP_EOL . "    padding:0;" . PHP_EOL . "    margin:0;" . PHP_EOL . "}" . PHP_EOL . "" . PHP_EOL . ".selected {" . PHP_EOL . "    background:rgba(0, 150, 255, 0.4) !important" . PHP_EOL . "}" . PHP_EOL . ".nav {" . PHP_EOL . "    background:#E0E0E0;" . PHP_EOL . "    text-align:center;" . PHP_EOL . "}" . PHP_EOL . "" . PHP_EOL . ".nav h1 {" . PHP_EOL . "    margin:0;" . PHP_EOL . "    font-size:22px;" . PHP_EOL . "}" . PHP_EOL . "" . PHP_EOL . ".nav div {" . PHP_EOL . "    border-bottom:1px solid #333;" . PHP_EOL . "    line-height:40px;" . PHP_EOL . "    display:inline-block;" . PHP_EOL . "    cursor:pointer;" . PHP_EOL . "    padding:0 20px;" . PHP_EOL . "    transition:background 0.1s linear;" . PHP_EOL . "}" . PHP_EOL . "" . PHP_EOL . ".nav div:hover {" . PHP_EOL . "    background:rgba(0, 0, 0, 0.1);" . PHP_EOL . "}" . PHP_EOL . "" . PHP_EOL . ".nav div:active {" . PHP_EOL . "    background:rgba(0, 0, 0, 0.4);" . PHP_EOL . "}" . PHP_EOL . "" . PHP_EOL . ".nav div a {" . PHP_EOL . "    text-decoration:none;" . PHP_EOL . "    color:initial;" . PHP_EOL . "    padding-left:20px;" . PHP_EOL . "}" . PHP_EOL . "" . PHP_EOL . ".header h1 {" . PHP_EOL . "    text-align:center;" . PHP_EOL . "}" . PHP_EOL . "</style>" . PHP_EOL . "<title><?php echo \$page; ?></title>" . PHP_EOL . "</head>" . PHP_EOL . "<body>" . PHP_EOL . "    <div class=\"wrap\">" . PHP_EOL . "    <div class=\"header\">" . PHP_EOL . "        <h1><?php echo \$page; ?></h1>" . PHP_EOL . "    </div>" . PHP_EOL . "    <div class=\"wrap\">  " . PHP_EOL . "        <table id=\"tbl\" class=\"display table table-striped table-bordered\" width=\"100%\" cellspacing=\"0\">" . PHP_EOL . "            <thead>" . PHP_EOL . "                <tr>" . PHP_EOL . "<?php " . PHP_EOL . "    \$tab = \"                    \";" . PHP_EOL . "    foreach(\$body as \$items) {" . PHP_EOL . "         echo \$tab . \"<th>\" . \$items[\"COLUMN_NAME\"] . \"</th>\" . PHP_EOL;" . PHP_EOL . "    }" . PHP_EOL . "?>" . PHP_EOL . "                </tr>" . PHP_EOL . "            </thead>" . PHP_EOL . "            <tbody>" . PHP_EOL . "" . PHP_EOL . "            </tbody>" . PHP_EOL . "        </table>" . PHP_EOL . "        <div class=\"add_delete_toolbar\" />" . PHP_EOL . "        <form title=\"Add <?php echo \$page; ?>\" id=\"formAddNewRow\" action=\"add-<?php echo \$page; ?>.php\" style=\"background:white;padding:20px;border:1px solid;\">" . PHP_EOL . "        <?php " . PHP_EOL . "          \$idx = 0;" . PHP_EOL . "          echo \"<table style='align:right;'>\" . PHP_EOL;" . PHP_EOL . "          foreach(\$body as \$items) {" . PHP_EOL . "              echo \"            <tr>\" . PHP_EOL;" . PHP_EOL . "              echo \"                <td><label for='\" . \$items[\"COLUMN_NAME\"] . \"'>\" . \$items[\"COLUMN_NAME\"] . \"</label></td>\" . PHP_EOL;" . PHP_EOL . "              echo \"                <td><input type='\" . \$addType[\$idx] . \"' maxlength=\" . \$maxLen[\$idx] . \" name='\" . \$items[\"COLUMN_NAME\"] . \"' id='\" . \$items[\"COLUMN_NAME\"] . \"' rel='\" . \$idx . \"' /></td>\" . PHP_EOL;" . PHP_EOL . "              echo \"            </tr>\" . PHP_EOL;" . PHP_EOL . "              \$idx = \$idx + 1;" . PHP_EOL . "          }" . PHP_EOL . "          echo \"        </table>\" . PHP_EOL;?>" . PHP_EOL . "        </form>" . PHP_EOL . "    </div>" . PHP_EOL . "    </div>" . PHP_EOL . "</body>" . PHP_EOL . "</html>" . PHP_EOL . "";
    
    file_put_contents("__layout.php", $LAYOUT_PHP);
	unset($LAYOUT_PHP);
}

?>

</body>
</html>
